import{c as Pe,s as U,g as xo,a as yn,b as To,j as l,r as N,X as bo,W as Me,F as _o,T as wo,S as So,G as Eo,d as Oo,B as vn,C as Ur,u as No,e as Ao,f as Co}from"./index-Dr3PF51v.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=Pe("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=Pe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=Pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=Pe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=Pe("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=Pe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=Pe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),ht={async createRestaurant(t){const{data:e,error:r}=await U.from("restaurants").insert([{name:t.restaurantName,website:t.website||"",admin_email:t.email,subscription_tier:t.tier||"basic",payment_session_id:t.sessionId||"",created_at:new Date().toISOString()}]).select().single();if(r)throw new Error(`Restaurant creation failed: ${r.message}`);return e},async uploadLogo(t,e){try{const r=e.name.split(".").pop(),n=`${t}/logo.${r}`,{error:a}=await U.storage.from("restaurant-logos").upload(n,e,{cacheControl:"3600",upsert:!0});if(a)throw a;const{data:o}=U.storage.from("restaurant-logos").getPublicUrl(n),{error:i}=await U.from("restaurants").update({logo_url:o.publicUrl}).eq("id",t);if(i)throw i;return o.publicUrl}catch(r){throw console.error("Logo upload error:",r),new Error("Failed to upload logo")}},async getRestaurantById(t){const{data:e,error:r}=await U.from("restaurants").select("*").eq("id",t).single();if(r)throw new Error(`Failed to fetch restaurant: ${r.message}`);if(!e)throw new Error("Restaurant not found");return e},async updateRestaurant(t,e){const{data:r,error:n}=await U.from("restaurants").update({...e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(n)throw new Error(`Failed to update restaurant: ${n.message}`);return r},async createInvitation(t,e,r,n,a="standard"){try{const{data:o}=await U.from("restaurant_invitations").select("token").eq("email",t).eq("status","pending").maybeSingle();if(o){const u=window.location.origin;return{token:o.token,invitationUrl:`${u}/onboarding/${o.token}`}}const i=crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).substring(2),h=new Date;h.setDate(h.getDate()+7);const{data:c,error:p}=await U.from("restaurant_invitations").insert([{token:i,email:t,restaurant_name:e,website:r||"",admin_name:n||"",tier:a,created_at:new Date().toISOString(),expires_at:h.toISOString(),status:"pending"}]).select().single();if(p)throw new Error(`Failed to create invitation: ${p.message}`);const m=`${window.location.origin}/onboarding/${i}`;return{token:i,invitationUrl:m}}catch(o){throw console.error("Error creating invitation:",o),o}},async getInvitationByToken(t){try{const{data:e,error:r}=await U.from("restaurant_invitations").select("*").eq("token",t).single();if(r)return console.error("Error fetching invitation:",r),null;const n=new Date,a=new Date(e.expires_at);return n>a&&e.status==="pending"?(await U.from("restaurant_invitations").update({status:"expired"}).eq("id",e.id),{...e,status:"expired"}):e}catch(e){return console.error("Error checking invitation:",e),null}},async updateInvitationStatus(t,e,r){try{const n={status:e,updated_at:new Date().toISOString()};r&&(n.restaurant_id=r);const{error:a}=await U.from("restaurant_invitations").update(n).eq("token",t);if(a)throw new Error(`Failed to update invitation status: ${a.message}`)}catch(n){throw console.error("Error updating invitation status:",n),n}}},Pn={async createMembershipTier(t,e){try{if(t.stripe_product_id&&t.stripe_price_id){const{data:a,error:o}=await U.from("membership_tiers").insert([{name:t.name,price:t.price,description:t.description||"",restaurant_id:e,stripe_product_id:t.stripe_product_id,stripe_price_id:t.stripe_price_id,created_at:new Date().toISOString()}]).select().single();if(o)throw new Error(`Tier creation failed: ${o.message}`);return a}const r=await fetch("/api/membership-tiers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name,price:t.price,description:t.description||"",restaurant_id:e})});if(!r.ok){const a=await r.json();throw new Error(a.error||"Failed to create membership tier")}return await r.json()}catch(r){throw console.error("Error creating membership tier:",r),r}},async updateMembershipTier(t){try{const e=await fetch("/api/membership-tiers",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const n=await e.json();throw new Error(n.error||"Failed to update membership tier")}return await e.json()}catch(e){throw console.error("Error updating membership tier:",e),e}},async getMembershipTiersByRestaurant(t){try{const{data:e,error:r}=await U.from("membership_tiers").select("*").eq("restaurant_id",t).order("price",{ascending:!0}).returns();if(r)throw new Error(`Failed to fetch tiers: ${r.message}`);return e||[]}catch(e){throw console.error("Error fetching membership tiers:",e),e}},async getMembershipTierById(t){try{const{data:e,error:r}=await U.from("membership_tiers").select("*").eq("id",t).returns().single();if(r)throw new Error(`Failed to fetch tier: ${r.message}`);return e}catch(e){throw console.error("Error fetching membership tier:",e),e}}};class z{getClientName(){throw new Error("getClientName not implemented.")}makeRequest(e,r,n,a,o,i,h,c){throw new Error("makeRequest not implemented.")}static makeTimeoutError(){const e=new TypeError(z.TIMEOUT_ERROR_CODE);return e.code=z.TIMEOUT_ERROR_CODE,e}}z.CONNECTION_CLOSED_ERROR_CODES=["ECONNRESET","EPIPE"];z.TIMEOUT_ERROR_CODE="ETIMEDOUT";class $a{constructor(e,r){this._statusCode=e,this._headers=r}getStatusCode(){return this._statusCode}getHeaders(){return this._headers}getRawResponse(){throw new Error("getRawResponse not implemented.")}toStream(e){throw new Error("toStream not implemented.")}toJSON(){throw new Error("toJSON not implemented.")}}class Bt extends z{constructor(e){if(super(),!e){if(!globalThis.fetch)throw new Error("fetch() function not provided and is not defined in the global scope. You must provide a fetch implementation.");e=globalThis.fetch}globalThis.AbortController?this._fetchFn=Bt.makeFetchWithAbortTimeout(e):this._fetchFn=Bt.makeFetchWithRaceTimeout(e)}static makeFetchWithRaceTimeout(e){return(r,n,a)=>{let o;const i=new Promise((c,p)=>{o=setTimeout(()=>{o=null,p(z.makeTimeoutError())},a)}),h=e(r,n);return Promise.race([h,i]).finally(()=>{o&&clearTimeout(o)})}}static makeFetchWithAbortTimeout(e){return async(r,n,a)=>{const o=new AbortController;let i=setTimeout(()=>{i=null,o.abort(z.makeTimeoutError())},a);try{return await e(r,Object.assign(Object.assign({},n),{signal:o.signal}))}catch(h){throw h.name==="AbortError"?z.makeTimeoutError():h}finally{i&&clearTimeout(i)}}}getClientName(){return"fetch"}async makeRequest(e,r,n,a,o,i,h,c){const p=h==="http",d=new URL(n,`${p?"http":"https"}://${e}`);d.port=r;const m=a=="POST"||a=="PUT"||a=="PATCH",u=i||(m?"":void 0),v=await this._fetchFn(d.toString(),{method:a,headers:o,body:u},c);return new Zr(v)}}class Zr extends $a{constructor(e){super(e.status,Zr._transformHeadersToObject(e.headers)),this._res=e}getRawResponse(){return this._res}toStream(e){return e(),this._res.body}toJSON(){return this._res.json()}static _transformHeadersToObject(e){const r={};for(const n of e){if(!Array.isArray(n)||n.length!=2)throw new Error("Response objects produced by the fetch function given to FetchHttpClient do not have an iterable headers map. Response#headers should be an iterable object.");r[n[0]]=n[1]}return r}}class Ra{computeHMACSignature(e,r){throw new Error("computeHMACSignature not implemented.")}computeHMACSignatureAsync(e,r){throw new Error("computeHMACSignatureAsync not implemented.")}computeSHA256Async(e){throw new Error("computeSHA256 not implemented.")}}class Ma extends Error{}class Io extends Ra{constructor(e){super(),this.subtleCrypto=e||crypto.subtle}computeHMACSignature(e,r){throw new Ma("SubtleCryptoProvider cannot be used in a synchronous context.")}async computeHMACSignatureAsync(e,r){const n=new TextEncoder,a=await this.subtleCrypto.importKey("raw",n.encode(r),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),o=await this.subtleCrypto.sign("hmac",a,n.encode(e)),i=new Uint8Array(o),h=new Array(i.length);for(let c=0;c<i.length;c++)h[c]=Br[i[c]];return h.join("")}async computeSHA256Async(e){return new Uint8Array(await this.subtleCrypto.digest("SHA-256",e))}}const Br=new Array(256);for(let t=0;t<Br.length;t++)Br[t]=t.toString(16).padStart(2,"0");class ko{constructor(){this._fetchFn=null,this._agent=null}getUname(){throw new Error("getUname not implemented.")}uuid4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const r=Math.random()*16|0;return(e==="x"?r:r&3|8).toString(16)})}secureCompare(e,r){if(e.length!==r.length)return!1;const n=e.length;let a=0;for(let o=0;o<n;++o)a|=e.charCodeAt(o)^r.charCodeAt(o);return a===0}createEmitter(){throw new Error("createEmitter not implemented.")}tryBufferData(e){throw new Error("tryBufferData not implemented.")}createNodeHttpClient(e){throw new Error("createNodeHttpClient not implemented.")}createFetchHttpClient(e){return new Bt(e)}createDefaultHttpClient(){throw new Error("createDefaultHttpClient not implemented.")}createNodeCryptoProvider(){throw new Error("createNodeCryptoProvider not implemented.")}createSubtleCryptoProvider(e){return new Io(e)}createDefaultCryptoProvider(){throw new Error("createDefaultCryptoProvider not implemented.")}}class Go extends Event{constructor(e,r){super(e),this.data=r}}class Fo{constructor(){this.eventTarget=new EventTarget,this.listenerMapping=new Map}on(e,r){const n=a=>{r(a.data)};return this.listenerMapping.set(r,n),this.eventTarget.addEventListener(e,n)}removeListener(e,r){const n=this.listenerMapping.get(r);return this.listenerMapping.delete(r),this.eventTarget.removeEventListener(e,n)}once(e,r){const n=a=>{r(a.data)};return this.listenerMapping.set(r,n),this.eventTarget.addEventListener(e,n,{once:!0})}emit(e,r){return this.eventTarget.dispatchEvent(new Go(e,r))}}class Do extends ko{getUname(){return Promise.resolve(null)}createEmitter(){return new Fo}tryBufferData(e){if(e.file.data instanceof ReadableStream)throw new Error("Uploading a file as a stream is not supported in non-Node environments. Please open or upvote an issue at github.com/stripe/stripe-node if you use this, detailing your use-case.");return Promise.resolve(e)}createNodeHttpClient(){throw new Error("Stripe: `createNodeHttpClient()` is not available in non-Node environments. Please use `createFetchHttpClient()` instead.")}createDefaultHttpClient(){return super.createFetchHttpClient()}createNodeCryptoProvider(){throw new Error("Stripe: `createNodeCryptoProvider()` is not available in non-Node environments. Please use `createSubtleCryptoProvider()` instead.")}createDefaultCryptoProvider(){return this.createSubtleCryptoProvider()}}const Jt=t=>{switch(t.type){case"card_error":return new Ia(t);case"invalid_request_error":return new en(t);case"api_error":return new tn(t);case"authentication_error":return new rn(t);case"rate_limit_error":return new nn(t);case"idempotency_error":return new Fa(t);case"invalid_grant":return new Da(t);default:return new qa(t)}},ja=t=>{switch(t.type){case"temporary_session_expired":return new La(t)}switch(t.code){case"invalid_fields":return new en(t)}return Jt(t)};class B extends Error{constructor(e={},r=null){super(e.message),this.type=r||this.constructor.name,this.raw=e,this.rawType=e.type,this.code=e.code,this.doc_url=e.doc_url,this.param=e.param,this.detail=e.detail,this.headers=e.headers,this.requestId=e.requestId,this.statusCode=e.statusCode,this.message=e.message,this.userMessage=e.user_message,this.charge=e.charge,this.decline_code=e.decline_code,this.payment_intent=e.payment_intent,this.payment_method=e.payment_method,this.payment_method_type=e.payment_method_type,this.setup_intent=e.setup_intent,this.source=e.source}}B.generate=Jt;class Ia extends B{constructor(e={}){super(e,"StripeCardError")}}class en extends B{constructor(e={}){super(e,"StripeInvalidRequestError")}}class tn extends B{constructor(e={}){super(e,"StripeAPIError")}}class rn extends B{constructor(e={}){super(e,"StripeAuthenticationError")}}class ka extends B{constructor(e={}){super(e,"StripePermissionError")}}class nn extends B{constructor(e={}){super(e,"StripeRateLimitError")}}class Ga extends B{constructor(e={}){super(e,"StripeConnectionError")}}class se extends B{constructor(e,r,n={}){super(n,"StripeSignatureVerificationError"),this.header=e,this.payload=r}}class Fa extends B{constructor(e={}){super(e,"StripeIdempotencyError")}}class Da extends B{constructor(e={}){super(e,"StripeInvalidGrantError")}}class qa extends B{constructor(e={}){super(e,"StripeUnknownError")}}class La extends B{constructor(e={}){super(e,"TemporarySessionExpiredError")}}const xn=Object.freeze(Object.defineProperty({__proto__:null,StripeAPIError:tn,StripeAuthenticationError:rn,StripeCardError:Ia,StripeConnectionError:Ga,StripeError:B,StripeIdempotencyError:Fa,StripeInvalidGrantError:Da,StripeInvalidRequestError:en,StripePermissionError:ka,StripeRateLimitError:nn,StripeSignatureVerificationError:se,StripeUnknownError:qa,TemporarySessionExpiredError:La,generateV1Error:Jt,generateV2Error:ja},Symbol.toStringTag,{value:"Module"}));var Ge=TypeError;const qo={},Lo=Object.freeze(Object.defineProperty({__proto__:null,default:qo},Symbol.toStringTag,{value:"Module"})),Uo=xo(Lo);var an=typeof Map=="function"&&Map.prototype,rr=Object.getOwnPropertyDescriptor&&an?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Ht=an&&rr&&typeof rr.get=="function"?rr.get:null,Tn=an&&Map.prototype.forEach,on=typeof Set=="function"&&Set.prototype,nr=Object.getOwnPropertyDescriptor&&on?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,zt=on&&nr&&typeof nr.get=="function"?nr.get:null,bn=on&&Set.prototype.forEach,Bo=typeof WeakMap=="function"&&WeakMap.prototype,nt=Bo?WeakMap.prototype.has:null,Ho=typeof WeakSet=="function"&&WeakSet.prototype,at=Ho?WeakSet.prototype.has:null,zo=typeof WeakRef=="function"&&WeakRef.prototype,_n=zo?WeakRef.prototype.deref:null,Wo=Boolean.prototype.valueOf,Vo=Object.prototype.toString,Ko=Function.prototype.toString,Jo=String.prototype.match,sn=String.prototype.slice,ie=String.prototype.replace,Yo=String.prototype.toUpperCase,wn=String.prototype.toLowerCase,Ua=RegExp.prototype.test,Sn=Array.prototype.concat,Z=Array.prototype.join,Qo=Array.prototype.slice,En=Math.floor,Hr=typeof BigInt=="function"?BigInt.prototype.valueOf:null,ar=Object.getOwnPropertySymbols,zr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Ie=typeof Symbol=="function"&&typeof Symbol.iterator=="object",ot=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ie||!0)?Symbol.toStringTag:null,Ba=Object.prototype.propertyIsEnumerable,On=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function Nn(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||Ua.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-En(-t):En(t);if(n!==t){var a=String(n),o=sn.call(e,a.length+1);return ie.call(a,r,"$&_")+"."+ie.call(ie.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return ie.call(e,r,"$&_")}var Wr=Uo,An=Wr.custom,Cn=Wa(An)?An:null,Ha={__proto__:null,double:'"',single:"'"},Xo={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},Yt=function t(e,r,n,a){var o=r||{};if(ee(o,"quoteStyle")&&!ee(Ha,o.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ee(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var i=ee(o,"customInspect")?o.customInspect:!0;if(typeof i!="boolean"&&i!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ee(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ee(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var h=o.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return Ka(e,o);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var c=String(e);return h?Nn(e,c):c}if(typeof e=="bigint"){var p=String(e)+"n";return h?Nn(e,p):p}var d=typeof o.depth>"u"?5:o.depth;if(typeof n>"u"&&(n=0),n>=d&&d>0&&typeof e=="object")return Vr(e)?"[Array]":"[Object]";var m=ys(o,n);if(typeof a>"u")a=[];else if(Va(a,e)>=0)return"[Circular]";function u(O,S,C){if(S&&(a=Qo.call(a),a.push(S)),C){var k={depth:o.depth};return ee(o,"quoteStyle")&&(k.quoteStyle=o.quoteStyle),t(O,k,n+1,a)}return t(O,o,n+1,a)}if(typeof e=="function"&&!$n(e)){var v=is(e),g=mt(e,u);return"[Function"+(v?": "+v:" (anonymous)")+"]"+(g.length>0?" { "+Z.call(g,", ")+" }":"")}if(Wa(e)){var T=Ie?ie.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):zr.call(e);return typeof e=="object"&&!Ie?Fe(T):T}if(ms(e)){for(var f="<"+wn.call(String(e.nodeName)),y=e.attributes||[],P=0;P<y.length;P++)f+=" "+y[P].name+"="+za(Zo(y[P].value),"double",o);return f+=">",e.childNodes&&e.childNodes.length&&(f+="..."),f+="</"+wn.call(String(e.nodeName))+">",f}if(Vr(e)){if(e.length===0)return"[]";var x=mt(e,u);return m&&!fs(x)?"["+Kr(x,m)+"]":"[ "+Z.call(x,", ")+" ]"}if(ts(e)){var b=mt(e,u);return!("cause"in Error.prototype)&&"cause"in e&&!Ba.call(e,"cause")?"{ ["+String(e)+"] "+Z.call(Sn.call("[cause]: "+u(e.cause),b),", ")+" }":b.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Z.call(b,", ")+" }"}if(typeof e=="object"&&i){if(Cn&&typeof e[Cn]=="function"&&Wr)return Wr(e,{depth:d-n});if(i!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(ls(e)){var w=[];return Tn&&Tn.call(e,function(O,S){w.push(u(S,e,!0)+" => "+u(O,e))}),Rn("Map",Ht.call(e),w,m)}if(us(e)){var q=[];return bn&&bn.call(e,function(O){q.push(u(O,e))}),Rn("Set",zt.call(e),q,m)}if(cs(e))return or("WeakMap");if(hs(e))return or("WeakSet");if(ds(e))return or("WeakRef");if(ns(e))return Fe(u(Number(e)));if(os(e))return Fe(u(Hr.call(e)));if(as(e))return Fe(Wo.call(e));if(rs(e))return Fe(u(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof yn<"u"&&e===yn)return"{ [object globalThis] }";if(!es(e)&&!$n(e)){var R=mt(e,u),L=On?On(e)===Object.prototype:e instanceof Object||e.constructor===Object,H=e instanceof Object?"":"null prototype",M=!L&&ot&&Object(e)===e&&ot in e?sn.call(le(e),8,-1):H?"Object":"",te=L||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",A=te+(M||H?"["+Z.call(Sn.call([],M||[],H||[]),": ")+"] ":"");return R.length===0?A+"{}":m?A+"{"+Kr(R,m)+"}":A+"{ "+Z.call(R,", ")+" }"}return String(e)};function za(t,e,r){var n=r.quoteStyle||e,a=Ha[n];return a+t+a}function Zo(t){return ie.call(String(t),/"/g,"&quot;")}function xe(t){return!ot||!(typeof t=="object"&&(ot in t||typeof t[ot]<"u"))}function Vr(t){return le(t)==="[object Array]"&&xe(t)}function es(t){return le(t)==="[object Date]"&&xe(t)}function $n(t){return le(t)==="[object RegExp]"&&xe(t)}function ts(t){return le(t)==="[object Error]"&&xe(t)}function rs(t){return le(t)==="[object String]"&&xe(t)}function ns(t){return le(t)==="[object Number]"&&xe(t)}function as(t){return le(t)==="[object Boolean]"&&xe(t)}function Wa(t){if(Ie)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!zr)return!1;try{return zr.call(t),!0}catch{}return!1}function os(t){if(!t||typeof t!="object"||!Hr)return!1;try{return Hr.call(t),!0}catch{}return!1}var ss=Object.prototype.hasOwnProperty||function(t){return t in this};function ee(t,e){return ss.call(t,e)}function le(t){return Vo.call(t)}function is(t){if(t.name)return t.name;var e=Jo.call(Ko.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function Va(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function ls(t){if(!Ht||!t||typeof t!="object")return!1;try{Ht.call(t);try{zt.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function cs(t){if(!nt||!t||typeof t!="object")return!1;try{nt.call(t,nt);try{at.call(t,at)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function ds(t){if(!_n||!t||typeof t!="object")return!1;try{return _n.call(t),!0}catch{}return!1}function us(t){if(!zt||!t||typeof t!="object")return!1;try{zt.call(t);try{Ht.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function hs(t){if(!at||!t||typeof t!="object")return!1;try{at.call(t,at);try{nt.call(t,nt)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function ms(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function Ka(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return Ka(sn.call(t,0,e.maxStringLength),e)+n}var a=Xo[e.quoteStyle||"single"];a.lastIndex=0;var o=ie.call(ie.call(t,a,"\\$1"),/[\x00-\x1f]/g,ps);return za(o,"single",e)}function ps(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+Yo.call(e.toString(16))}function Fe(t){return"Object("+t+")"}function or(t){return t+" { ? }"}function Rn(t,e,r,n){var a=n?Kr(r,n):Z.call(r,", ");return t+" ("+e+") {"+a+"}"}function fs(t){for(var e=0;e<t.length;e++)if(Va(t[e],`
`)>=0)return!1;return!0}function ys(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=Z.call(Array(t.indent+1)," ");else return null;return{base:r,prev:Z.call(Array(e+1),r)}}function Kr(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+Z.call(t,","+r)+`
`+e.prev}function mt(t,e){var r=Vr(t),n=[];if(r){n.length=t.length;for(var a=0;a<t.length;a++)n[a]=ee(t,a)?e(t[a],t):""}var o=typeof ar=="function"?ar(t):[],i;if(Ie){i={};for(var h=0;h<o.length;h++)i["$"+o[h]]=o[h]}for(var c in t)ee(t,c)&&(r&&String(Number(c))===c&&c<t.length||Ie&&i["$"+c]instanceof Symbol||(Ua.call(/[^\w$]/,c)?n.push(e(c,t)+": "+e(t[c],t)):n.push(c+": "+e(t[c],t))));if(typeof ar=="function")for(var p=0;p<o.length;p++)Ba.call(t,o[p])&&n.push("["+e(o[p])+"]: "+e(t[o[p]],t));return n}var vs=Yt,gs=Ge,Qt=function(t,e,r){for(var n=t,a;(a=n.next)!=null;n=a)if(a.key===e)return n.next=a.next,r||(a.next=t.next,t.next=a),a},Ps=function(t,e){if(t){var r=Qt(t,e);return r&&r.value}},xs=function(t,e,r){var n=Qt(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},Ts=function(t,e){return t?!!Qt(t,e):!1},bs=function(t,e){if(t)return Qt(t,e,!0)},_s=function(){var e,r={assert:function(n){if(!r.has(n))throw new gs("Side channel does not contain "+vs(n))},delete:function(n){var a=e&&e.next,o=bs(e,n);return o&&a&&a===o&&(e=void 0),!!o},get:function(n){return Ps(e,n)},has:function(n){return Ts(e,n)},set:function(n,a){e||(e={next:void 0}),xs(e,n,a)}};return r},Ja=Object,ws=Error,Ss=EvalError,Es=RangeError,Os=ReferenceError,Ns=SyntaxError,As=URIError,Cs=Math.abs,$s=Math.floor,Rs=Math.max,Ms=Math.min,js=Math.pow,Is=Math.round,ks=Number.isNaN||function(e){return e!==e},Gs=ks,Fs=function(e){return Gs(e)||e===0?e:e<0?-1:1},Ds=Object.getOwnPropertyDescriptor,qt=Ds;if(qt)try{qt([],"length")}catch{qt=null}var Ya=qt,Lt=Object.defineProperty||!1;if(Lt)try{Lt({},"a",{value:1})}catch{Lt=!1}var qs=Lt,sr,Mn;function Ls(){return Mn||(Mn=1,sr=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var a=42;e[r]=a;for(var o in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var i=Object.getOwnPropertySymbols(e);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var h=Object.getOwnPropertyDescriptor(e,r);if(h.value!==a||h.enumerable!==!0)return!1}return!0}),sr}var ir,jn;function Us(){if(jn)return ir;jn=1;var t=typeof Symbol<"u"&&Symbol,e=Ls();return ir=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},ir}var lr,In;function Qa(){return In||(In=1,lr=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),lr}var cr,kn;function Xa(){if(kn)return cr;kn=1;var t=Ja;return cr=t.getPrototypeOf||null,cr}var dr,Gn;function Bs(){if(Gn)return dr;Gn=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,r=Math.max,n="[object Function]",a=function(c,p){for(var d=[],m=0;m<c.length;m+=1)d[m]=c[m];for(var u=0;u<p.length;u+=1)d[u+c.length]=p[u];return d},o=function(c,p){for(var d=[],m=p,u=0;m<c.length;m+=1,u+=1)d[u]=c[m];return d},i=function(h,c){for(var p="",d=0;d<h.length;d+=1)p+=h[d],d+1<h.length&&(p+=c);return p};return dr=function(c){var p=this;if(typeof p!="function"||e.apply(p)!==n)throw new TypeError(t+p);for(var d=o(arguments,1),m,u=function(){if(this instanceof m){var y=p.apply(this,a(d,arguments));return Object(y)===y?y:this}return p.apply(c,a(d,arguments))},v=r(0,p.length-d.length),g=[],T=0;T<v;T++)g[T]="$"+T;if(m=Function("binder","return function ("+i(g,",")+"){ return binder.apply(this,arguments); }")(u),p.prototype){var f=function(){};f.prototype=p.prototype,m.prototype=new f,f.prototype=null}return m},dr}var ur,Fn;function Xt(){if(Fn)return ur;Fn=1;var t=Bs();return ur=Function.prototype.bind||t,ur}var hr,Dn;function ln(){return Dn||(Dn=1,hr=Function.prototype.call),hr}var mr,qn;function Za(){return qn||(qn=1,mr=Function.prototype.apply),mr}var Hs=typeof Reflect<"u"&&Reflect&&Reflect.apply,zs=Xt(),Ws=Za(),Vs=ln(),Ks=Hs,Js=Ks||zs.call(Vs,Ws),Ys=Xt(),Qs=Ge,Xs=ln(),Zs=Js,eo=function(e){if(e.length<1||typeof e[0]!="function")throw new Qs("a function is required");return Zs(Ys,Xs,e)},pr,Ln;function ei(){if(Ln)return pr;Ln=1;var t=eo,e=Ya,r;try{r=[].__proto__===Array.prototype}catch(i){if(!i||typeof i!="object"||!("code"in i)||i.code!=="ERR_PROTO_ACCESS")throw i}var n=!!r&&e&&e(Object.prototype,"__proto__"),a=Object,o=a.getPrototypeOf;return pr=n&&typeof n.get=="function"?t([n.get]):typeof o=="function"?function(h){return o(h==null?h:a(h))}:!1,pr}var fr,Un;function ti(){if(Un)return fr;Un=1;var t=Qa(),e=Xa(),r=ei();return fr=t?function(a){return t(a)}:e?function(a){if(!a||typeof a!="object"&&typeof a!="function")throw new TypeError("getProto: not an object");return e(a)}:r?function(a){return r(a)}:null,fr}var yr,Bn;function ri(){if(Bn)return yr;Bn=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,r=Xt();return yr=r.call(t,e),yr}var _,ni=Ja,ai=ws,oi=Ss,si=Es,ii=Os,ke=Ns,je=Ge,li=As,ci=Cs,di=$s,ui=Rs,hi=Ms,mi=js,pi=Is,fi=Fs,to=Function,vr=function(t){try{return to('"use strict"; return ('+t+").constructor;")()}catch{}},lt=Ya,yi=qs,gr=function(){throw new je},vi=lt?function(){try{return arguments.callee,gr}catch{try{return lt(arguments,"callee").get}catch{return gr}}}():gr,Te=Us()(),D=ti(),gi=Xa(),Pi=Qa(),ro=Za(),ct=ln(),Re={},xi=typeof Uint8Array>"u"||!D?_:D(Uint8Array),ve={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?_:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?_:ArrayBuffer,"%ArrayIteratorPrototype%":Te&&D?D([][Symbol.iterator]()):_,"%AsyncFromSyncIteratorPrototype%":_,"%AsyncFunction%":Re,"%AsyncGenerator%":Re,"%AsyncGeneratorFunction%":Re,"%AsyncIteratorPrototype%":Re,"%Atomics%":typeof Atomics>"u"?_:Atomics,"%BigInt%":typeof BigInt>"u"?_:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?_:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?_:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?_:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":ai,"%eval%":eval,"%EvalError%":oi,"%Float16Array%":typeof Float16Array>"u"?_:Float16Array,"%Float32Array%":typeof Float32Array>"u"?_:Float32Array,"%Float64Array%":typeof Float64Array>"u"?_:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?_:FinalizationRegistry,"%Function%":to,"%GeneratorFunction%":Re,"%Int8Array%":typeof Int8Array>"u"?_:Int8Array,"%Int16Array%":typeof Int16Array>"u"?_:Int16Array,"%Int32Array%":typeof Int32Array>"u"?_:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Te&&D?D(D([][Symbol.iterator]())):_,"%JSON%":typeof JSON=="object"?JSON:_,"%Map%":typeof Map>"u"?_:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Te||!D?_:D(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":ni,"%Object.getOwnPropertyDescriptor%":lt,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?_:Promise,"%Proxy%":typeof Proxy>"u"?_:Proxy,"%RangeError%":si,"%ReferenceError%":ii,"%Reflect%":typeof Reflect>"u"?_:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?_:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Te||!D?_:D(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?_:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Te&&D?D(""[Symbol.iterator]()):_,"%Symbol%":Te?Symbol:_,"%SyntaxError%":ke,"%ThrowTypeError%":vi,"%TypedArray%":xi,"%TypeError%":je,"%Uint8Array%":typeof Uint8Array>"u"?_:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?_:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?_:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?_:Uint32Array,"%URIError%":li,"%WeakMap%":typeof WeakMap>"u"?_:WeakMap,"%WeakRef%":typeof WeakRef>"u"?_:WeakRef,"%WeakSet%":typeof WeakSet>"u"?_:WeakSet,"%Function.prototype.call%":ct,"%Function.prototype.apply%":ro,"%Object.defineProperty%":yi,"%Object.getPrototypeOf%":gi,"%Math.abs%":ci,"%Math.floor%":di,"%Math.max%":ui,"%Math.min%":hi,"%Math.pow%":mi,"%Math.round%":pi,"%Math.sign%":fi,"%Reflect.getPrototypeOf%":Pi};if(D)try{null.error}catch(t){var Ti=D(D(t));ve["%Error.prototype%"]=Ti}var bi=function t(e){var r;if(e==="%AsyncFunction%")r=vr("async function () {}");else if(e==="%GeneratorFunction%")r=vr("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=vr("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var a=t("%AsyncGenerator%");a&&D&&(r=D(a.prototype))}return ve[e]=r,r},Hn={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},dt=Xt(),Wt=ri(),_i=dt.call(ct,Array.prototype.concat),wi=dt.call(ro,Array.prototype.splice),zn=dt.call(ct,String.prototype.replace),Vt=dt.call(ct,String.prototype.slice),Si=dt.call(ct,RegExp.prototype.exec),Ei=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Oi=/\\(\\)?/g,Ni=function(e){var r=Vt(e,0,1),n=Vt(e,-1);if(r==="%"&&n!=="%")throw new ke("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new ke("invalid intrinsic syntax, expected opening `%`");var a=[];return zn(e,Ei,function(o,i,h,c){a[a.length]=h?zn(c,Oi,"$1"):i||o}),a},Ai=function(e,r){var n=e,a;if(Wt(Hn,n)&&(a=Hn[n],n="%"+a[0]+"%"),Wt(ve,n)){var o=ve[n];if(o===Re&&(o=bi(n)),typeof o>"u"&&!r)throw new je("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:a,name:n,value:o}}throw new ke("intrinsic "+e+" does not exist!")},cn=function(e,r){if(typeof e!="string"||e.length===0)throw new je("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new je('"allowMissing" argument must be a boolean');if(Si(/^%?[^%]*%?$/,e)===null)throw new ke("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Ni(e),a=n.length>0?n[0]:"",o=Ai("%"+a+"%",r),i=o.name,h=o.value,c=!1,p=o.alias;p&&(a=p[0],wi(n,_i([0,1],p)));for(var d=1,m=!0;d<n.length;d+=1){var u=n[d],v=Vt(u,0,1),g=Vt(u,-1);if((v==='"'||v==="'"||v==="`"||g==='"'||g==="'"||g==="`")&&v!==g)throw new ke("property names with quotes must have matching quotes");if((u==="constructor"||!m)&&(c=!0),a+="."+u,i="%"+a+"%",Wt(ve,i))h=ve[i];else if(h!=null){if(!(u in h)){if(!r)throw new je("base intrinsic for "+e+" exists, but the property is not available.");return}if(lt&&d+1>=n.length){var T=lt(h,u);m=!!T,m&&"get"in T&&!("originalValue"in T.get)?h=T.get:h=h[u]}else m=Wt(h,u),h=h[u];m&&!c&&(ve[i]=h)}}return h},no=cn,ao=eo,Ci=ao([no("%String.prototype.indexOf%")]),oo=function(e,r){var n=no(e,!!r);return typeof n=="function"&&Ci(e,".prototype.")>-1?ao([n]):n},$i=cn,ut=oo,Ri=Yt,Mi=Ge,Wn=$i("%Map%",!0),ji=ut("Map.prototype.get",!0),Ii=ut("Map.prototype.set",!0),ki=ut("Map.prototype.has",!0),Gi=ut("Map.prototype.delete",!0),Fi=ut("Map.prototype.size",!0),so=!!Wn&&function(){var e,r={assert:function(n){if(!r.has(n))throw new Mi("Side channel does not contain "+Ri(n))},delete:function(n){if(e){var a=Gi(e,n);return Fi(e)===0&&(e=void 0),a}return!1},get:function(n){if(e)return ji(e,n)},has:function(n){return e?ki(e,n):!1},set:function(n,a){e||(e=new Wn),Ii(e,n,a)}};return r},Di=cn,Zt=oo,qi=Yt,pt=so,Li=Ge,be=Di("%WeakMap%",!0),Ui=Zt("WeakMap.prototype.get",!0),Bi=Zt("WeakMap.prototype.set",!0),Hi=Zt("WeakMap.prototype.has",!0),zi=Zt("WeakMap.prototype.delete",!0),Wi=be?function(){var e,r,n={assert:function(a){if(!n.has(a))throw new Li("Side channel does not contain "+qi(a))},delete:function(a){if(be&&a&&(typeof a=="object"||typeof a=="function")){if(e)return zi(e,a)}else if(pt&&r)return r.delete(a);return!1},get:function(a){return be&&a&&(typeof a=="object"||typeof a=="function")&&e?Ui(e,a):r&&r.get(a)},has:function(a){return be&&a&&(typeof a=="object"||typeof a=="function")&&e?Hi(e,a):!!r&&r.has(a)},set:function(a,o){be&&a&&(typeof a=="object"||typeof a=="function")?(e||(e=new be),Bi(e,a,o)):pt&&(r||(r=pt()),r.set(a,o))}};return n}:pt,Vi=Ge,Ki=Yt,Ji=_s,Yi=so,Qi=Wi,Xi=Qi||Yi||Ji,Zi=function(){var e,r={assert:function(n){if(!r.has(n))throw new Vi("Side channel does not contain "+Ki(n))},delete:function(n){return!!e&&e.delete(n)},get:function(n){return e&&e.get(n)},has:function(n){return!!e&&e.has(n)},set:function(n,a){e||(e=Xi()),e.set(n,a)}};return r},el=String.prototype.replace,tl=/%20/g,Pr={RFC1738:"RFC1738",RFC3986:"RFC3986"},dn={default:Pr.RFC3986,formatters:{RFC1738:function(t){return el.call(t,tl,"+")},RFC3986:function(t){return String(t)}},RFC1738:Pr.RFC1738,RFC3986:Pr.RFC3986},rl=dn,xr=Object.prototype.hasOwnProperty,ye=Array.isArray,V=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),nl=function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(ye(n)){for(var a=[],o=0;o<n.length;++o)typeof n[o]<"u"&&a.push(n[o]);r.obj[r.prop]=a}}},io=function(e,r){for(var n=r&&r.plainObjects?{__proto__:null}:{},a=0;a<e.length;++a)typeof e[a]<"u"&&(n[a]=e[a]);return n},al=function t(e,r,n){if(!r)return e;if(typeof r!="object"&&typeof r!="function"){if(ye(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!xr.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var a=e;return ye(e)&&!ye(r)&&(a=io(e,n)),ye(e)&&ye(r)?(r.forEach(function(o,i){if(xr.call(e,i)){var h=e[i];h&&typeof h=="object"&&o&&typeof o=="object"?e[i]=t(h,o,n):e.push(o)}else e[i]=o}),e):Object.keys(r).reduce(function(o,i){var h=r[i];return xr.call(o,i)?o[i]=t(o[i],h,n):o[i]=h,o},a)},ol=function(e,r){return Object.keys(r).reduce(function(n,a){return n[a]=r[a],n},e)},sl=function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},Tr=1024,il=function(e,r,n,a,o){if(e.length===0)return e;var i=e;if(typeof e=="symbol"?i=Symbol.prototype.toString.call(e):typeof e!="string"&&(i=String(e)),n==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(v){return"%26%23"+parseInt(v.slice(2),16)+"%3B"});for(var h="",c=0;c<i.length;c+=Tr){for(var p=i.length>=Tr?i.slice(c,c+Tr):i,d=[],m=0;m<p.length;++m){var u=p.charCodeAt(m);if(u===45||u===46||u===95||u===126||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||o===rl.RFC1738&&(u===40||u===41)){d[d.length]=p.charAt(m);continue}if(u<128){d[d.length]=V[u];continue}if(u<2048){d[d.length]=V[192|u>>6]+V[128|u&63];continue}if(u<55296||u>=57344){d[d.length]=V[224|u>>12]+V[128|u>>6&63]+V[128|u&63];continue}m+=1,u=65536+((u&1023)<<10|p.charCodeAt(m)&1023),d[d.length]=V[240|u>>18]+V[128|u>>12&63]+V[128|u>>6&63]+V[128|u&63]}h+=d.join("")}return h},ll=function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],a=0;a<r.length;++a)for(var o=r[a],i=o.obj[o.prop],h=Object.keys(i),c=0;c<h.length;++c){var p=h[c],d=i[p];typeof d=="object"&&d!==null&&n.indexOf(d)===-1&&(r.push({obj:i,prop:p}),n.push(d))}return nl(r),e},cl=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},dl=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},ul=function(e,r){return[].concat(e,r)},hl=function(e,r){if(ye(e)){for(var n=[],a=0;a<e.length;a+=1)n.push(r(e[a]));return n}return r(e)},lo={arrayToObject:io,assign:ol,combine:ul,compact:ll,decode:sl,encode:il,isBuffer:dl,isRegExp:cl,maybeMap:hl,merge:al},co=Zi,Ut=lo,st=dn,ml=Object.prototype.hasOwnProperty,uo={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},X=Array.isArray,pl=Array.prototype.push,ho=function(t,e){pl.apply(t,X(e)?e:[e])},fl=Date.prototype.toISOString,Vn=st.default,F={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Ut.encode,encodeValuesOnly:!1,filter:void 0,format:Vn,formatter:st.formatters[Vn],indices:!1,serializeDate:function(e){return fl.call(e)},skipNulls:!1,strictNullHandling:!1},yl=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},br={},vl=function t(e,r,n,a,o,i,h,c,p,d,m,u,v,g,T,f,y,P){for(var x=e,b=P,w=0,q=!1;(b=b.get(br))!==void 0&&!q;){var R=b.get(e);if(w+=1,typeof R<"u"){if(R===w)throw new RangeError("Cyclic object value");q=!0}typeof b.get(br)>"u"&&(w=0)}if(typeof d=="function"?x=d(r,x):x instanceof Date?x=v(x):n==="comma"&&X(x)&&(x=Ut.maybeMap(x,function(tr){return tr instanceof Date?v(tr):tr})),x===null){if(i)return p&&!f?p(r,F.encoder,y,"key",g):r;x=""}if(yl(x)||Ut.isBuffer(x)){if(p){var L=f?r:p(r,F.encoder,y,"key",g);return[T(L)+"="+T(p(x,F.encoder,y,"value",g))]}return[T(r)+"="+T(String(x))]}var H=[];if(typeof x>"u")return H;var M;if(n==="comma"&&X(x))f&&p&&(x=Ut.maybeMap(x,p)),M=[{value:x.length>0?x.join(",")||null:void 0}];else if(X(d))M=d;else{var te=Object.keys(x);M=m?te.sort(m):te}var A=c?String(r).replace(/\./g,"%2E"):String(r),O=a&&X(x)&&x.length===1?A+"[]":A;if(o&&X(x)&&x.length===0)return O+"[]";for(var S=0;S<M.length;++S){var C=M[S],k=typeof C=="object"&&C&&typeof C.value<"u"?C.value:x[C];if(!(h&&k===null)){var ce=u&&c?String(C).replace(/\./g,"%2E"):String(C),Po=X(x)?typeof n=="function"?n(O,ce):O:O+(u?"."+ce:"["+ce+"]");P.set(e,w);var fn=co();fn.set(br,P),ho(H,t(k,Po,n,a,o,i,h,c,n==="comma"&&f&&X(x)?null:p,d,m,u,v,g,T,f,y,fn))}}return H},gl=function(e){if(!e)return F;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||F.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=st.default;if(typeof e.format<"u"){if(!ml.call(st.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var a=st.formatters[n],o=F.filter;(typeof e.filter=="function"||X(e.filter))&&(o=e.filter);var i;if(e.arrayFormat in uo?i=e.arrayFormat:"indices"in e?i=e.indices?"indices":"repeat":i=F.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var h=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:F.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:F.addQueryPrefix,allowDots:h,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:F.allowEmptyArrays,arrayFormat:i,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:F.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?F.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:F.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:F.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:F.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:F.encodeValuesOnly,filter:o,format:n,formatter:a,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:F.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:F.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:F.strictNullHandling}},Pl=function(t,e){var r=t,n=gl(e),a,o;typeof n.filter=="function"?(o=n.filter,r=o("",r)):X(n.filter)&&(o=n.filter,a=o);var i=[];if(typeof r!="object"||r===null)return"";var h=uo[n.arrayFormat],c=h==="comma"&&n.commaRoundTrip;a||(a=Object.keys(r)),n.sort&&a.sort(n.sort);for(var p=co(),d=0;d<a.length;++d){var m=a[d],u=r[m];n.skipNulls&&u===null||ho(i,vl(u,m,h,c,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,p))}var v=i.join(n.delimiter),g=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),v.length>0?g+v:""},ge=lo,Jr=Object.prototype.hasOwnProperty,Kn=Array.isArray,I={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:ge.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},xl=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},mo=function(t,e,r){if(t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1)return t.split(",");if(e.throwOnLimitExceeded&&r>=e.arrayLimit)throw new RangeError("Array limit exceeded. Only "+e.arrayLimit+" element"+(e.arrayLimit===1?"":"s")+" allowed in an array.");return t},Tl="utf8=%26%2310003%3B",bl="utf8=%E2%9C%93",_l=function(e,r){var n={__proto__:null},a=r.ignoreQueryPrefix?e.replace(/^\?/,""):e;a=a.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var o=r.parameterLimit===1/0?void 0:r.parameterLimit,i=a.split(r.delimiter,r.throwOnLimitExceeded?o+1:o);if(r.throwOnLimitExceeded&&i.length>o)throw new RangeError("Parameter limit exceeded. Only "+o+" parameter"+(o===1?"":"s")+" allowed.");var h=-1,c,p=r.charset;if(r.charsetSentinel)for(c=0;c<i.length;++c)i[c].indexOf("utf8=")===0&&(i[c]===bl?p="utf-8":i[c]===Tl&&(p="iso-8859-1"),h=c,c=i.length);for(c=0;c<i.length;++c)if(c!==h){var d=i[c],m=d.indexOf("]="),u=m===-1?d.indexOf("="):m+1,v,g;u===-1?(v=r.decoder(d,I.decoder,p,"key"),g=r.strictNullHandling?null:""):(v=r.decoder(d.slice(0,u),I.decoder,p,"key"),g=ge.maybeMap(mo(d.slice(u+1),r,Kn(n[v])?n[v].length:0),function(f){return r.decoder(f,I.decoder,p,"value")})),g&&r.interpretNumericEntities&&p==="iso-8859-1"&&(g=xl(String(g))),d.indexOf("[]=")>-1&&(g=Kn(g)?[g]:g);var T=Jr.call(n,v);T&&r.duplicates==="combine"?n[v]=ge.combine(n[v],g):(!T||r.duplicates==="last")&&(n[v]=g)}return n},wl=function(t,e,r,n){var a=0;if(t.length>0&&t[t.length-1]==="[]"){var o=t.slice(0,-1).join("");a=Array.isArray(e)&&e[o]?e[o].length:0}for(var i=n?e:mo(e,r,a),h=t.length-1;h>=0;--h){var c,p=t[h];if(p==="[]"&&r.parseArrays)c=r.allowEmptyArrays&&(i===""||r.strictNullHandling&&i===null)?[]:ge.combine([],i);else{c=r.plainObjects?{__proto__:null}:{};var d=p.charAt(0)==="["&&p.charAt(p.length-1)==="]"?p.slice(1,-1):p,m=r.decodeDotInKeys?d.replace(/%2E/g,"."):d,u=parseInt(m,10);!r.parseArrays&&m===""?c={0:i}:!isNaN(u)&&p!==m&&String(u)===m&&u>=0&&r.parseArrays&&u<=r.arrayLimit?(c=[],c[u]=i):m!=="__proto__"&&(c[m]=i)}i=c}return i},Sl=function(e,r,n,a){if(e){var o=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/,h=/(\[[^[\]]*])/g,c=n.depth>0&&i.exec(o),p=c?o.slice(0,c.index):o,d=[];if(p){if(!n.plainObjects&&Jr.call(Object.prototype,p)&&!n.allowPrototypes)return;d.push(p)}for(var m=0;n.depth>0&&(c=h.exec(o))!==null&&m<n.depth;){if(m+=1,!n.plainObjects&&Jr.call(Object.prototype,c[1].slice(1,-1))&&!n.allowPrototypes)return;d.push(c[1])}if(c){if(n.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+n.depth+" and strictDepth is true");d.push("["+o.slice(c.index)+"]")}return wl(d,r,n,a)}},El=function(e){if(!e)return I;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof e.throwOnLimitExceeded<"u"&&typeof e.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var r=typeof e.charset>"u"?I.charset:e.charset,n=typeof e.duplicates>"u"?I.duplicates:e.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var a=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:I.allowDots:!!e.allowDots;return{allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:I.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:I.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:I.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:I.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:I.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:I.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:I.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:I.decoder,delimiter:typeof e.delimiter=="string"||ge.isRegExp(e.delimiter)?e.delimiter:I.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:I.depth,duplicates:n,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:I.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:I.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:I.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:I.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:I.strictNullHandling,throwOnLimitExceeded:typeof e.throwOnLimitExceeded=="boolean"?e.throwOnLimitExceeded:!1}},Ol=function(t,e){var r=El(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?{__proto__:null}:{};for(var n=typeof t=="string"?_l(t,r):t,a=r.plainObjects?{__proto__:null}:{},o=Object.keys(n),i=0;i<o.length;++i){var h=o[i],c=Sl(h,n[h],r,typeof t=="string");a=ge.merge(a,c,r)}return r.allowSparse===!0?a:ge.compact(a)},Nl=Pl,Al=Ol,Cl=dn,$l={formats:Cl,parse:Al,stringify:Nl};const un=["apiKey","idempotencyKey","stripeAccount","apiVersion","maxNetworkRetries","timeout","host","authenticator","stripeContext","additionalHeaders"];function po(t){return t&&typeof t=="object"&&un.some(e=>Object.prototype.hasOwnProperty.call(t,e))}function er(t,e){return $l.stringify(t,{serializeDate:r=>Math.floor(r.getTime()/1e3).toString(),arrayFormat:e=="v2"?"repeat":"indices"}).replace(/%5B/g,"[").replace(/%5D/g,"]")}const Yr=(()=>{const t={"\n":"\\n",'"':'\\"',"\u2028":"\\u2028","\u2029":"\\u2029"};return e=>{const r=e.replace(/["\n\r\u2028\u2029]/g,n=>t[n]);return n=>r.replace(/\{([\s\S]+?)\}/g,(a,o)=>encodeURIComponent(n[o]||""))}})();function Rl(t){const e=t.match(/\{\w+\}/g);return e?e.map(r=>r.replace(/[{}]/g,"")):[]}function hn(t){if(!Array.isArray(t)||!t[0]||typeof t[0]!="object")return{};if(!po(t[0]))return t.shift();const e=Object.keys(t[0]),r=e.filter(n=>un.includes(n));return r.length>0&&r.length!==e.length&&Kt(`Options found in arguments (${r.join(", ")}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.`),{}}function fo(t){const e={host:null,headers:{},settings:{}};if(t.length>0){const r=t[t.length-1];if(typeof r=="string")e.authenticator=Qr(t.pop());else if(po(r)){const n=Object.assign({},t.pop()),a=Object.keys(n).filter(o=>!un.includes(o));if(a.length&&Kt(`Invalid options found (${a.join(", ")}); ignoring.`),n.apiKey&&(e.authenticator=Qr(n.apiKey)),n.idempotencyKey&&(e.headers["Idempotency-Key"]=n.idempotencyKey),n.stripeAccount&&(e.headers["Stripe-Account"]=n.stripeAccount),n.stripeContext){if(e.headers["Stripe-Account"])throw new Error("Can't specify both stripeAccount and stripeContext.");e.headers["Stripe-Context"]=n.stripeContext}if(n.apiVersion&&(e.headers["Stripe-Version"]=n.apiVersion),Number.isInteger(n.maxNetworkRetries)&&(e.settings.maxNetworkRetries=n.maxNetworkRetries),Number.isInteger(n.timeout)&&(e.settings.timeout=n.timeout),n.host&&(e.host=n.host),n.authenticator){if(n.apiKey)throw new Error("Can't specify both apiKey and authenticator.");if(typeof n.authenticator!="function")throw new Error("The authenticator must be a function receiving a request as the first parameter.");e.authenticator=n.authenticator}n.additionalHeaders&&(e.headers=n.additionalHeaders)}}return e}function Ml(t){const e=this,r=Object.prototype.hasOwnProperty.call(t,"constructor")?t.constructor:function(...n){e.apply(this,n)};return Object.assign(r,e),r.prototype=Object.create(e.prototype),Object.assign(r.prototype,t),r}function _r(t){if(typeof t!="object")throw new Error("Argument must be an object");return Object.keys(t).reduce((e,r)=>(t[r]!=null&&(e[r]=t[r]),e),{})}function jl(t){return t&&typeof t=="object"?Object.keys(t).reduce((e,r)=>(e[Il(r)]=t[r],e),{}):t}function Il(t){return t.split("-").map(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()).join("-")}function mn(t,e){return e?t.then(r=>{setTimeout(()=>{e(null,r)},0)},r=>{setTimeout(()=>{e(r,null)},0)}):t}function kl(t){return t==="OAuth"?"oauth":t[0].toLowerCase()+t.substring(1)}function Kt(t){return typeof process.emitWarning!="function"?console.warn(`Stripe: ${t}`):process.emitWarning(t,"Stripe")}function Gl(t){const e=typeof t;return(e==="function"||e==="object")&&!!t}function Fl(t){const e={},r=(n,a)=>{Object.entries(n).forEach(([o,i])=>{const h=a?`${a}[${o}]`:o;if(Gl(i)){if(!(i instanceof Uint8Array)&&!Object.prototype.hasOwnProperty.call(i,"data"))return r(i,h);e[h]=i}else e[h]=String(i)})};return r(t,null),e}function wr(t,e,r){if(!Number.isInteger(e)){if(r!==void 0)return r;throw new Error(`${t} must be an integer`)}return e}function Dl(){return typeof process>"u"?{}:{lang_version:process.version,platform:process.platform}}function Qr(t){const e=r=>(r.headers.Authorization="Bearer "+t,Promise.resolve());return e._apiKey=t,e}function ql(t,e){return this[t]instanceof Date?Math.floor(this[t].getTime()/1e3).toString():e}function Ll(t){return JSON.stringify(t,ql)}function pn(t){return t&&t.startsWith("/v2")?"v2":"v1"}const Ul=60;class it{constructor(e,r){this._stripe=e,this._maxBufferedRequestMetric=r}_addHeadersDirectlyToObject(e,r){e.requestId=r["request-id"],e.stripeAccount=e.stripeAccount||r["stripe-account"],e.apiVersion=e.apiVersion||r["stripe-version"],e.idempotencyKey=e.idempotencyKey||r["idempotency-key"]}_makeResponseEvent(e,r,n){const a=Date.now(),o=a-e.request_start_time;return _r({api_version:n["stripe-version"],account:n["stripe-account"],idempotency_key:n["idempotency-key"],method:e.method,path:e.path,status:r,request_id:this._getRequestId(n),elapsed:o,request_start_time:e.request_start_time,request_end_time:a})}_getRequestId(e){return e["request-id"]}_streamingResponseHandler(e,r,n){return a=>{const o=a.getHeaders(),i=()=>{const c=this._makeResponseEvent(e,a.getStatusCode(),o);this._stripe._emitter.emit("response",c),this._recordRequestMetrics(this._getRequestId(o),c.elapsed,r)},h=a.toStream(i);return this._addHeadersDirectlyToObject(h,o),n(null,h)}}_jsonResponseHandler(e,r,n,a){return o=>{const i=o.getHeaders(),h=this._getRequestId(i),c=o.getStatusCode(),p=this._makeResponseEvent(e,c,i);this._stripe._emitter.emit("response",p),o.toJSON().then(d=>{if(d.error){let m;throw typeof d.error=="string"&&(d.error={type:d.error,message:d.error_description}),d.error.headers=i,d.error.statusCode=c,d.error.requestId=h,c===401?m=new rn(d.error):c===403?m=new ka(d.error):c===429?m=new nn(d.error):r==="v2"?m=ja(d.error):m=Jt(d.error),m}return d},d=>{throw new tn({message:"Invalid JSON received from the Stripe API",exception:d,requestId:i["request-id"]})}).then(d=>{this._recordRequestMetrics(h,p.elapsed,n);const m=o.getRawResponse();this._addHeadersDirectlyToObject(m,i),Object.defineProperty(d,"lastResponse",{enumerable:!1,writable:!1,value:m}),a(null,d)},d=>a(d,null))}}static _generateConnectionErrorMessage(e){return`An error occurred with our connection to Stripe.${e>0?` Request was retried ${e} times.`:""}`}static _shouldRetry(e,r,n,a){return a&&r===0&&z.CONNECTION_CLOSED_ERROR_CODES.includes(a.code)?!0:r>=n?!1:e?e.getHeaders()["stripe-should-retry"]==="false"?!1:e.getHeaders()["stripe-should-retry"]==="true"||e.getStatusCode()===409||e.getStatusCode()>=500:!0}_getSleepTimeInMS(e,r=null){const n=this._stripe.getInitialNetworkRetryDelay(),a=this._stripe.getMaxNetworkRetryDelay();let o=Math.min(n*Math.pow(2,e-1),a);return o*=.5*(1+Math.random()),o=Math.max(n,o),Number.isInteger(r)&&r<=Ul&&(o=Math.max(o,r)),o*1e3}_getMaxNetworkRetries(e={}){return e.maxNetworkRetries!==void 0&&Number.isInteger(e.maxNetworkRetries)?e.maxNetworkRetries:this._stripe.getMaxNetworkRetries()}_defaultIdempotencyKey(e,r,n){const a=this._getMaxNetworkRetries(r),o=()=>`stripe-node-retry-${this._stripe._platformFunctions.uuid4()}`;if(n==="v2"){if(e==="POST"||e==="DELETE")return o()}else if(n==="v1"&&e==="POST"&&a>0)return o();return null}_makeHeaders({contentType:e,contentLength:r,apiVersion:n,clientUserAgent:a,method:o,userSuppliedHeaders:i,userSuppliedSettings:h,stripeAccount:c,stripeContext:p,apiMode:d}){const m={Accept:"application/json","Content-Type":e,"User-Agent":this._getUserAgentString(d),"X-Stripe-Client-User-Agent":a,"X-Stripe-Client-Telemetry":this._getTelemetryHeader(),"Stripe-Version":n,"Stripe-Account":c,"Stripe-Context":p,"Idempotency-Key":this._defaultIdempotencyKey(o,h,d)},u=o=="POST"||o=="PUT"||o=="PATCH";return(u||r)&&(u||Kt(`${o} method had non-zero contentLength but no payload is expected for this verb`),m["Content-Length"]=r),Object.assign(_r(m),jl(i))}_getUserAgentString(e){const r=this._stripe.getConstant("PACKAGE_VERSION"),n=this._stripe._appInfo?this._stripe.getAppInfoAsString():"";return`Stripe/${e} NodeBindings/${r} ${n}`.trim()}_getTelemetryHeader(){if(this._stripe.getTelemetryEnabled()&&this._stripe._prevRequestMetrics.length>0){const e=this._stripe._prevRequestMetrics.shift();return JSON.stringify({last_request_metrics:e})}}_recordRequestMetrics(e,r,n){if(this._stripe.getTelemetryEnabled()&&e)if(this._stripe._prevRequestMetrics.length>this._maxBufferedRequestMetric)Kt("Request metrics buffer is full, dropping telemetry message.");else{const a={request_id:e,request_duration_ms:r};n&&n.length>0&&(a.usage=n),this._stripe._prevRequestMetrics.push(a)}}_rawRequest(e,r,n,a){return new Promise((i,h)=>{let c;try{const v=e.toUpperCase();if(v!=="POST"&&n&&Object.keys(n).length!==0)throw new Error("rawRequest only supports params on POST requests. Please pass null and add your parameters to path.");const g=[].slice.call([n,a]),T=hn(g),f=Object.assign({},T),y=fo(g),P=y.headers,x=y.authenticator;c={requestMethod:v,requestPath:r,bodyData:f,queryData:{},authenticator:x,headers:P,host:null,streaming:!1,settings:{},usage:["raw_request"]}}catch(v){h(v);return}function p(v,g){v?h(v):i(g)}const{headers:d,settings:m}=c,u=c.authenticator;this._request(c.requestMethod,c.host,r,c.bodyData,u,{headers:d,settings:m,streaming:c.streaming},c.usage,p)})}_request(e,r,n,a,o,i,h=[],c,p=null){var d;let m;o=(d=o??this._stripe._authenticator)!==null&&d!==void 0?d:null;const u=pn(n),v=(f,y,P,x,b)=>setTimeout(f,this._getSleepTimeInMS(x,b),y,P,x+1),g=(f,y,P)=>{const x=i.settings&&i.settings.timeout&&Number.isInteger(i.settings.timeout)&&i.settings.timeout>=0?i.settings.timeout:this._stripe.getApiField("timeout"),b={host:r||this._stripe.getApiField("host"),port:this._stripe.getApiField("port"),path:n,method:e,headers:Object.assign({},y),body:m,protocol:this._stripe.getApiField("protocol")};o(b).then(()=>{const w=this._stripe.getApiField("httpClient").makeRequest(b.host,b.port,b.path,b.method,b.headers,b.body,b.protocol,x),q=Date.now(),R=_r({api_version:f,account:y["Stripe-Account"],idempotency_key:y["Idempotency-Key"],method:e,path:n,request_start_time:q}),L=P||0,H=this._getMaxNetworkRetries(i.settings||{});this._stripe._emitter.emit("request",R),w.then(M=>it._shouldRetry(M,L,H)?v(g,f,y,L,M.getHeaders()["retry-after"]):i.streaming&&M.getStatusCode()<400?this._streamingResponseHandler(R,h,c)(M):this._jsonResponseHandler(R,u,h,c)(M)).catch(M=>{if(it._shouldRetry(null,L,H,M))return v(g,f,y,L,null);{const te=M.code&&M.code===z.TIMEOUT_ERROR_CODE;return c(new Ga({message:te?`Request aborted due to timeout being reached (${x}ms)`:it._generateConnectionErrorMessage(L),detail:M}))}})}).catch(w=>{throw new B({message:"Unable to authenticate the request",exception:w})})},T=(f,y)=>{if(f)return c(f);m=y,this._stripe.getClientUserAgent(P=>{const x=this._stripe.getApiField("version"),b=this._makeHeaders({contentType:u=="v2"?"application/json":"application/x-www-form-urlencoded",contentLength:m.length,apiVersion:x,clientUserAgent:P,method:e,userSuppliedHeaders:i.headers,userSuppliedSettings:i.settings,stripeAccount:u=="v2"?null:this._stripe.getApiField("stripeAccount"),stripeContext:u=="v2"?this._stripe.getApiField("stripeContext"):null,apiMode:u});g(x,b,0)})};if(p)p(e,a,i.headers,T);else{let f;u=="v2"?f=a?Ll(a):"":f=er(a||{},u),T(null,f)}}}class yo{constructor(e,r,n,a){this.index=0,this.pagePromise=e,this.promiseCache={currentPromise:null},this.requestArgs=r,this.spec=n,this.stripeResource=a}async iterate(e){if(!(e&&e.data&&typeof e.data.length=="number"))throw Error("Unexpected: Stripe API response does not have a well-formed `data` array.");const r=vo(this.requestArgs);if(this.index<e.data.length){const n=r?e.data.length-1-this.index:this.index,a=e.data[n];return this.index+=1,{value:a,done:!1}}else if(e.has_more){this.index=0,this.pagePromise=this.getNextPage(e);const n=await this.pagePromise;return this.iterate(n)}return{done:!0,value:void 0}}getNextPage(e){throw new Error("Unimplemented")}async _next(){return this.iterate(await this.pagePromise)}next(){if(this.promiseCache.currentPromise)return this.promiseCache.currentPromise;const e=(async()=>{const r=await this._next();return this.promiseCache.currentPromise=null,r})();return this.promiseCache.currentPromise=e,e}}class Bl extends yo{getNextPage(e){const r=vo(this.requestArgs),n=Yl(e,r);return this.stripeResource._makeRequest(this.requestArgs,this.spec,{[r?"ending_before":"starting_after"]:n})}}class Hl extends yo{getNextPage(e){if(!e.next_page)throw Error("Unexpected: Stripe API response does not have a well-formed `next_page` field, but `has_more` was true.");return this.stripeResource._makeRequest(this.requestArgs,this.spec,{page:e.next_page})}}class zl{constructor(e,r,n,a){this.currentPageIterator=(async()=>(await e).data[Symbol.iterator]())(),this.nextPageUrl=(async()=>(await e).next_page_url||null)(),this.requestArgs=r,this.spec=n,this.stripeResource=a}async turnPage(){const e=await this.nextPageUrl;if(!e)return null;this.spec.fullPath=e;const r=await this.stripeResource._makeRequest([],this.spec,{});return this.nextPageUrl=Promise.resolve(r.next_page_url),this.currentPageIterator=Promise.resolve(r.data[Symbol.iterator]()),this.currentPageIterator}async next(){{const n=(await this.currentPageIterator).next();if(!n.done)return{done:!1,value:n.value}}const e=await this.turnPage();if(!e)return{done:!0,value:void 0};const r=e.next();return r.done?{done:!0,value:void 0}:{done:!1,value:r.value}}}const Wl=(t,e,r,n)=>{const a=pn(r.fullPath||r.path);return a!=="v2"&&r.methodType==="search"?Sr(new Hl(n,e,r,t)):a!=="v2"&&r.methodType==="list"?Sr(new Bl(n,e,r,t)):a==="v2"&&r.methodType==="list"?Sr(new zl(n,e,r,t)):null},Sr=t=>{const e=Ql((...a)=>t.next(...a)),r=Xl(e),n={autoPagingEach:e,autoPagingToArray:r,next:()=>t.next(),return:()=>({}),[Vl()]:()=>n};return n};function Vl(){return typeof Symbol<"u"&&Symbol.asyncIterator?Symbol.asyncIterator:"@@asyncIterator"}function Kl(t){if(t.length<2)return null;const e=t[1];if(typeof e!="function")throw Error(`The second argument to autoPagingEach, if present, must be a callback function; received ${typeof e}`);return e}function Jl(t){if(t.length===0)return;const e=t[0];if(typeof e!="function")throw Error(`The first argument to autoPagingEach, if present, must be a callback function; received ${typeof e}`);if(e.length===2)return e;if(e.length>2)throw Error(`The \`onItem\` callback function passed to autoPagingEach must accept at most two arguments; got ${e}`);return function(n,a){const o=e(n);a(o)}}function Yl(t,e){const r=e?0:t.data.length-1,n=t.data[r],a=n&&n.id;if(!a)throw Error("Unexpected: No `id` found on the last item while auto-paging a list.");return a}function Ql(t){return function(){const r=[].slice.call(arguments),n=Jl(r),a=Kl(r);if(r.length>2)throw Error(`autoPagingEach takes up to two arguments; received ${r}`);const o=Zl(t,n);return mn(o,a)}}function Xl(t){return function(r,n){const a=r&&r.limit;if(!a)throw Error("You must pass a `limit` option to autoPagingToArray, e.g., `autoPagingToArray({limit: 1000});`.");if(a>1e4)throw Error("You cannot specify a limit of more than 10,000 items to fetch in `autoPagingToArray`; use `autoPagingEach` to iterate through longer lists.");const o=new Promise((i,h)=>{const c=[];t(p=>{if(c.push(p),c.length>=a)return!1}).then(()=>{i(c)}).catch(h)});return mn(o,n)}}function Zl(t,e){return new Promise((r,n)=>{function a(o){if(o.done){r();return}const i=o.value;return new Promise(h=>{e(i,h)}).then(h=>h===!1?a({done:!0,value:void 0}):t().then(a))}t().then(a).catch(n)})}function vo(t){const e=[].slice.call(t);return!!hn(e).ending_before}function ec(t){if(t.path!==void 0&&t.fullPath!==void 0)throw new Error(`Method spec specified both a 'path' (${t.path}) and a 'fullPath' (${t.fullPath}).`);return function(...e){const r=typeof e[e.length-1]=="function"&&e.pop();t.urlParams=Rl(t.fullPath||this.createResourcePathWithSymbols(t.path||""));const n=mn(this._makeRequest(e,t,{}),r);return Object.assign(n,Wl(this,e,t,n)),n}}s.extend=Ml;s.method=ec;s.MAX_BUFFERED_REQUEST_METRICS=100;function s(t,e){if(this._stripe=t,e)throw new Error("Support for curried url params was dropped in stripe-node v7.0.0. Instead, pass two ids.");this.basePath=Yr(this.basePath||t.getApiField("basePath")),this.resourcePath=this.path,this.path=Yr(this.path),this.initialize(...arguments)}s.prototype={_stripe:null,path:"",resourcePath:"",basePath:null,initialize(){},requestDataProcessor:null,validateRequest:null,createFullPath(t,e){const r=[this.basePath(e),this.path(e)];if(typeof t=="function"){const n=t(e);n&&r.push(n)}else r.push(t);return this._joinUrlParts(r)},createResourcePathWithSymbols(t){return t?`/${this._joinUrlParts([this.resourcePath,t])}`:`/${this.resourcePath}`},_joinUrlParts(t){return t.join("/").replace(/\/{2,}/g,"/")},_getRequestOpts(t,e,r){var n;const a=(e.method||"GET").toUpperCase(),o=e.usage||[],i=e.urlParams||[],h=e.encode||(R=>R),c=!!e.fullPath,p=Yr(c?e.fullPath:e.path||""),d=c?e.fullPath:this.createResourcePathWithSymbols(e.path),m=[].slice.call(t),u=i.reduce((R,L)=>{const H=m.shift();if(typeof H!="string")throw new Error(`Stripe: Argument "${L}" must be a string, but got: ${H} (on API request to \`${a} ${d}\`)`);return R[L]=H,R},{}),v=hn(m),g=h(Object.assign({},v,r)),T=fo(m),f=T.host||e.host,y=!!e.streaming;if(m.filter(R=>R!=null).length)throw new Error(`Stripe: Unknown arguments (${m}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options. (on API request to ${a} \`${d}\`)`);const P=c?p(u):this.createFullPath(p,u),x=Object.assign(T.headers,e.headers);e.validator&&e.validator(g,{headers:x});const b=e.method==="GET"||e.method==="DELETE";return{requestMethod:a,requestPath:P,bodyData:b?null:g,queryData:b?g:{},authenticator:(n=T.authenticator)!==null&&n!==void 0?n:null,headers:x,host:f??null,streaming:y,settings:T.settings,usage:o}},_makeRequest(t,e,r){return new Promise((n,a)=>{var o;let i;try{i=this._getRequestOpts(t,e,r)}catch(u){a(u);return}function h(u,v){u?a(u):n(e.transformResponseData?e.transformResponseData(v):v)}const c=Object.keys(i.queryData).length===0,p=[i.requestPath,c?"":"?",er(i.queryData,pn(i.requestPath))].join(""),{headers:d,settings:m}=i;this._stripe._requestSender._request(i.requestMethod,i.host,p,i.bodyData,i.authenticator,{headers:d,settings:m,streaming:i.streaming},i.usage,h,(o=this.requestDataProcessor)===null||o===void 0?void 0:o.bind(this))})}};function Jn(t){const e={DEFAULT_TOLERANCE:300,signature:null,constructEvent(d,m,u,v,g,T){try{this.signature.verifyHeader(d,m,u,v||e.DEFAULT_TOLERANCE,g,T)}catch(y){throw y instanceof Ma&&(y.message+="\nUse `await constructEventAsync(...)` instead of `constructEvent(...)`"),y}return d instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(d)):JSON.parse(d)},async constructEventAsync(d,m,u,v,g,T){return await this.signature.verifyHeaderAsync(d,m,u,v||e.DEFAULT_TOLERANCE,g,T),d instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(d)):JSON.parse(d)},generateTestHeaderString:function(d){const m=p(d),u=m.signature||m.cryptoProvider.computeHMACSignature(m.payloadString,m.secret);return m.generateHeaderString(u)},generateTestHeaderStringAsync:async function(d){const m=p(d),u=m.signature||await m.cryptoProvider.computeHMACSignatureAsync(m.payloadString,m.secret);return m.generateHeaderString(u)}},r={EXPECTED_SCHEME:"v1",verifyHeader(d,m,u,v,g,T){const{decodedHeader:f,decodedPayload:y,details:P,suspectPayloadType:x}=a(d,m,this.EXPECTED_SCHEME),b=/\s/.test(u);g=g||c();const w=g.computeHMACSignature(n(y,P),u);return o(y,f,P,w,v,x,b,T),!0},async verifyHeaderAsync(d,m,u,v,g,T){const{decodedHeader:f,decodedPayload:y,details:P,suspectPayloadType:x}=a(d,m,this.EXPECTED_SCHEME),b=/\s/.test(u);g=g||c();const w=await g.computeHMACSignatureAsync(n(y,P),u);return o(y,f,P,w,v,x,b,T)}};function n(d,m){return`${m.timestamp}.${d}`}function a(d,m,u){if(!d)throw new se(m,d,{message:"No webhook payload was provided."});const v=typeof d!="string"&&!(d instanceof Uint8Array),g=new TextDecoder("utf8"),T=d instanceof Uint8Array?g.decode(d):d;if(Array.isArray(m))throw new Error("Unexpected: An array was passed as a header, which should not be possible for the stripe-signature header.");if(m==null||m=="")throw new se(m,d,{message:"No stripe-signature header value was provided."});const f=m instanceof Uint8Array?g.decode(m):m,y=i(f,u);if(!y||y.timestamp===-1)throw new se(f,T,{message:"Unable to extract timestamp and signatures from header"});if(!y.signatures.length)throw new se(f,T,{message:"No signatures found with expected scheme"});return{decodedPayload:T,decodedHeader:f,details:y,suspectPayloadType:v}}function o(d,m,u,v,g,T,f,y){const P=!!u.signatures.filter(t.secureCompare.bind(t,v)).length,x=`
Learn more about webhook signing and explore webhook integration examples for various frameworks at https://docs.stripe.com/webhooks/signature`,b=f?`

Note: The provided signing secret contains whitespace. This often indicates an extra newline or space is in the value`:"";if(!P)throw T?new se(m,d,{message:`Webhook payload must be provided as a string or a Buffer (https://nodejs.org/api/buffer.html) instance representing the _raw_ request body.Payload was provided as a parsed JavaScript object instead. 
Signature verification is impossible without access to the original signed material. 
`+x+`
`+b}):new se(m,d,{message:`No signatures found matching the expected signature for payload. Are you passing the raw request body you received from Stripe? 
 If a webhook request is being forwarded by a third-party tool, ensure that the exact request body, including JSON formatting and new line style, is preserved.
`+x+`
`+b});const w=Math.floor((typeof y=="number"?y:Date.now())/1e3)-u.timestamp;if(g>0&&w>g)throw new se(m,d,{message:"Timestamp outside the tolerance zone"});return!0}function i(d,m){return typeof d!="string"?null:d.split(",").reduce((u,v)=>{const g=v.split("=");return g[0]==="t"&&(u.timestamp=parseInt(g[1],10)),g[0]===m&&u.signatures.push(g[1]),u},{timestamp:-1,signatures:[]})}let h=null;function c(){return h||(h=t.createDefaultCryptoProvider()),h}function p(d){if(!d)throw new B({message:"Options are required"});const m=Math.floor(d.timestamp)||Math.floor(Date.now()/1e3),u=d.scheme||r.EXPECTED_SCHEME,v=d.cryptoProvider||c(),g=`${m}.${d.payload}`,T=f=>`t=${m},${u}=${f}`;return Object.assign(Object.assign({},d),{timestamp:m,scheme:u,cryptoProvider:v,payloadString:g,generateHeaderString:T})}return e.signature=r,e}const tc="2025-02-24.acacia";function rc(t,e){for(const r in e){if(!Object.prototype.hasOwnProperty.call(e,r))continue;const n=r[0].toLowerCase()+r.substring(1),a=new e[r](t);this[n]=a}}function $(t,e){return function(r){return new rc(r,e)}}const de=s.method,nc=s.extend({retrieve:de({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}"}),list:de({method:"GET",fullPath:"/v1/financial_connections/accounts",methodType:"list"}),disconnect:de({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/disconnect"}),listOwners:de({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}/owners",methodType:"list"}),refresh:de({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/refresh"}),subscribe:de({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/subscribe"}),unsubscribe:de({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/unsubscribe"})}),Yn=s.method,ac=s.extend({retrieve:Yn({method:"GET",fullPath:"/v1/entitlements/active_entitlements/{id}"}),list:Yn({method:"GET",fullPath:"/v1/entitlements/active_entitlements",methodType:"list"})}),_e=s.method,oc=s.extend({create:_e({method:"POST",fullPath:"/v1/billing/alerts"}),retrieve:_e({method:"GET",fullPath:"/v1/billing/alerts/{id}"}),list:_e({method:"GET",fullPath:"/v1/billing/alerts",methodType:"list"}),activate:_e({method:"POST",fullPath:"/v1/billing/alerts/{id}/activate"}),archive:_e({method:"POST",fullPath:"/v1/billing/alerts/{id}/archive"}),deactivate:_e({method:"POST",fullPath:"/v1/billing/alerts/{id}/deactivate"})}),ue=s.method,sc=s.extend({create:ue({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations"}),capture:ue({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/capture"}),expire:ue({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/expire"}),finalizeAmount:ue({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/finalize_amount"}),increment:ue({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/increment"}),respond:ue({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/fraud_challenges/respond"}),reverse:ue({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/reverse"})}),De=s.method,ic=s.extend({retrieve:De({method:"GET",fullPath:"/v1/issuing/authorizations/{authorization}"}),update:De({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}"}),list:De({method:"GET",fullPath:"/v1/issuing/authorizations",methodType:"list"}),approve:De({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/approve"}),decline:De({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/decline"})}),Er=s.method,lc=s.extend({create:Er({method:"POST",fullPath:"/v1/tax/calculations"}),retrieve:Er({method:"GET",fullPath:"/v1/tax/calculations/{calculation}"}),listLineItems:Er({method:"GET",fullPath:"/v1/tax/calculations/{calculation}/line_items",methodType:"list"})}),ft=s.method,cc=s.extend({create:ft({method:"POST",fullPath:"/v1/issuing/cardholders"}),retrieve:ft({method:"GET",fullPath:"/v1/issuing/cardholders/{cardholder}"}),update:ft({method:"POST",fullPath:"/v1/issuing/cardholders/{cardholder}"}),list:ft({method:"GET",fullPath:"/v1/issuing/cardholders",methodType:"list"})}),qe=s.method,dc=s.extend({deliverCard:qe({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/deliver"}),failCard:qe({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/fail"}),returnCard:qe({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/return"}),shipCard:qe({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/ship"}),submitCard:qe({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/submit"})}),yt=s.method,uc=s.extend({create:yt({method:"POST",fullPath:"/v1/issuing/cards"}),retrieve:yt({method:"GET",fullPath:"/v1/issuing/cards/{card}"}),update:yt({method:"POST",fullPath:"/v1/issuing/cards/{card}"}),list:yt({method:"GET",fullPath:"/v1/issuing/cards",methodType:"list"})}),vt=s.method,hc=s.extend({create:vt({method:"POST",fullPath:"/v1/billing_portal/configurations"}),retrieve:vt({method:"GET",fullPath:"/v1/billing_portal/configurations/{configuration}"}),update:vt({method:"POST",fullPath:"/v1/billing_portal/configurations/{configuration}"}),list:vt({method:"GET",fullPath:"/v1/billing_portal/configurations",methodType:"list"})}),Le=s.method,mc=s.extend({create:Le({method:"POST",fullPath:"/v1/terminal/configurations"}),retrieve:Le({method:"GET",fullPath:"/v1/terminal/configurations/{configuration}"}),update:Le({method:"POST",fullPath:"/v1/terminal/configurations/{configuration}"}),list:Le({method:"GET",fullPath:"/v1/terminal/configurations",methodType:"list"}),del:Le({method:"DELETE",fullPath:"/v1/terminal/configurations/{configuration}"})}),pc=s.method,fc=s.extend({create:pc({method:"POST",fullPath:"/v1/test_helpers/confirmation_tokens"})}),yc=s.method,vc=s.extend({create:yc({method:"POST",fullPath:"/v1/terminal/connection_tokens"})}),gc=s.method,Pc=s.extend({retrieve:gc({method:"GET",fullPath:"/v1/billing/credit_balance_summary"})}),Qn=s.method,xc=s.extend({retrieve:Qn({method:"GET",fullPath:"/v1/billing/credit_balance_transactions/{id}"}),list:Qn({method:"GET",fullPath:"/v1/billing/credit_balance_transactions",methodType:"list"})}),we=s.method,Tc=s.extend({create:we({method:"POST",fullPath:"/v1/billing/credit_grants"}),retrieve:we({method:"GET",fullPath:"/v1/billing/credit_grants/{id}"}),update:we({method:"POST",fullPath:"/v1/billing/credit_grants/{id}"}),list:we({method:"GET",fullPath:"/v1/billing/credit_grants",methodType:"list"}),expire:we({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/expire"}),voidGrant:we({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/void"})}),Or=s.method,bc=s.extend({create:Or({method:"POST",fullPath:"/v1/treasury/credit_reversals"}),retrieve:Or({method:"GET",fullPath:"/v1/treasury/credit_reversals/{credit_reversal}"}),list:Or({method:"GET",fullPath:"/v1/treasury/credit_reversals",methodType:"list"})}),_c=s.method,wc=s.extend({fundCashBalance:_c({method:"POST",fullPath:"/v1/test_helpers/customers/{customer}/fund_cash_balance"})}),Nr=s.method,Sc=s.extend({create:Nr({method:"POST",fullPath:"/v1/treasury/debit_reversals"}),retrieve:Nr({method:"GET",fullPath:"/v1/treasury/debit_reversals/{debit_reversal}"}),list:Nr({method:"GET",fullPath:"/v1/treasury/debit_reversals",methodType:"list"})}),Ue=s.method,Ec=s.extend({create:Ue({method:"POST",fullPath:"/v1/issuing/disputes"}),retrieve:Ue({method:"GET",fullPath:"/v1/issuing/disputes/{dispute}"}),update:Ue({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}"}),list:Ue({method:"GET",fullPath:"/v1/issuing/disputes",methodType:"list"}),submit:Ue({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}/submit"})}),Xn=s.method,Oc=s.extend({retrieve:Xn({method:"GET",fullPath:"/v1/radar/early_fraud_warnings/{early_fraud_warning}"}),list:Xn({method:"GET",fullPath:"/v1/radar/early_fraud_warnings",methodType:"list"})}),re=s.method,Nc=s.extend({create:re({method:"POST",fullPath:"/v2/core/event_destinations"}),retrieve:re({method:"GET",fullPath:"/v2/core/event_destinations/{id}"}),update:re({method:"POST",fullPath:"/v2/core/event_destinations/{id}"}),list:re({method:"GET",fullPath:"/v2/core/event_destinations",methodType:"list"}),del:re({method:"DELETE",fullPath:"/v2/core/event_destinations/{id}"}),disable:re({method:"POST",fullPath:"/v2/core/event_destinations/{id}/disable"}),enable:re({method:"POST",fullPath:"/v2/core/event_destinations/{id}/enable"}),ping:re({method:"POST",fullPath:"/v2/core/event_destinations/{id}/ping"})}),Ar=s.method,Ac=s.extend({retrieve(...t){return Ar({method:"GET",fullPath:"/v2/core/events/{id}",transformResponseData:r=>this.addFetchRelatedObjectIfNeeded(r)}).apply(this,t)},list(...t){return Ar({method:"GET",fullPath:"/v2/core/events",methodType:"list",transformResponseData:r=>Object.assign(Object.assign({},r),{data:r.data.map(this.addFetchRelatedObjectIfNeeded.bind(this))})}).apply(this,t)},addFetchRelatedObjectIfNeeded(t){return!t.related_object||!t.related_object.url?t:Object.assign(Object.assign({},t),{fetchRelatedObject:()=>Ar({method:"GET",fullPath:t.related_object.url}).apply(this,[{stripeAccount:t.context}])})}}),gt=s.method,Cc=s.extend({create:gt({method:"POST",fullPath:"/v1/entitlements/features"}),retrieve:gt({method:"GET",fullPath:"/v1/entitlements/features/{id}"}),update:gt({method:"POST",fullPath:"/v1/entitlements/features/{id}"}),list:gt({method:"GET",fullPath:"/v1/entitlements/features",methodType:"list"})}),he=s.method,$c=s.extend({create:he({method:"POST",fullPath:"/v1/treasury/financial_accounts"}),retrieve:he({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),update:he({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),list:he({method:"GET",fullPath:"/v1/treasury/financial_accounts",methodType:"list"}),close:he({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/close"}),retrieveFeatures:he({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"}),updateFeatures:he({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"})}),Cr=s.method,Rc=s.extend({fail:Cr({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/fail"}),returnInboundTransfer:Cr({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/return"}),succeed:Cr({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/succeed"})}),Pt=s.method,Mc=s.extend({create:Pt({method:"POST",fullPath:"/v1/treasury/inbound_transfers"}),retrieve:Pt({method:"GET",fullPath:"/v1/treasury/inbound_transfers/{id}"}),list:Pt({method:"GET",fullPath:"/v1/treasury/inbound_transfers",methodType:"list"}),cancel:Pt({method:"POST",fullPath:"/v1/treasury/inbound_transfers/{inbound_transfer}/cancel"})}),Be=s.method,jc=s.extend({create:Be({method:"POST",fullPath:"/v1/terminal/locations"}),retrieve:Be({method:"GET",fullPath:"/v1/terminal/locations/{location}"}),update:Be({method:"POST",fullPath:"/v1/terminal/locations/{location}"}),list:Be({method:"GET",fullPath:"/v1/terminal/locations",methodType:"list"}),del:Be({method:"DELETE",fullPath:"/v1/terminal/locations/{location}"})}),Ic=s.method,kc=s.extend({create:Ic({method:"POST",fullPath:"/v1/billing/meter_event_adjustments"})}),Gc=s.method,Fc=s.extend({create:Gc({method:"POST",fullPath:"/v2/billing/meter_event_adjustments"})}),Dc=s.method,qc=s.extend({create:Dc({method:"POST",fullPath:"/v2/billing/meter_event_session"})}),Lc=s.method,Uc=s.extend({create:Lc({method:"POST",fullPath:"/v2/billing/meter_event_stream",host:"meter-events.stripe.com"})}),Bc=s.method,Hc=s.extend({create:Bc({method:"POST",fullPath:"/v1/billing/meter_events"})}),zc=s.method,Wc=s.extend({create:zc({method:"POST",fullPath:"/v2/billing/meter_events"})}),me=s.method,Vc=s.extend({create:me({method:"POST",fullPath:"/v1/billing/meters"}),retrieve:me({method:"GET",fullPath:"/v1/billing/meters/{id}"}),update:me({method:"POST",fullPath:"/v1/billing/meters/{id}"}),list:me({method:"GET",fullPath:"/v1/billing/meters",methodType:"list"}),deactivate:me({method:"POST",fullPath:"/v1/billing/meters/{id}/deactivate"}),listEventSummaries:me({method:"GET",fullPath:"/v1/billing/meters/{id}/event_summaries",methodType:"list"}),reactivate:me({method:"POST",fullPath:"/v1/billing/meters/{id}/reactivate"})}),He=s.method,Kc=s.extend({create:He({method:"POST",fullPath:"/v1/climate/orders"}),retrieve:He({method:"GET",fullPath:"/v1/climate/orders/{order}"}),update:He({method:"POST",fullPath:"/v1/climate/orders/{order}"}),list:He({method:"GET",fullPath:"/v1/climate/orders",methodType:"list"}),cancel:He({method:"POST",fullPath:"/v1/climate/orders/{order}/cancel"})}),xt=s.method,Jc=s.extend({update:xt({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}"}),fail:xt({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/fail"}),post:xt({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/post"}),returnOutboundPayment:xt({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/return"})}),Tt=s.method,Yc=s.extend({create:Tt({method:"POST",fullPath:"/v1/treasury/outbound_payments"}),retrieve:Tt({method:"GET",fullPath:"/v1/treasury/outbound_payments/{id}"}),list:Tt({method:"GET",fullPath:"/v1/treasury/outbound_payments",methodType:"list"}),cancel:Tt({method:"POST",fullPath:"/v1/treasury/outbound_payments/{id}/cancel"})}),bt=s.method,Qc=s.extend({update:bt({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}"}),fail:bt({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/fail"}),post:bt({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/post"}),returnOutboundTransfer:bt({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/return"})}),_t=s.method,Xc=s.extend({create:_t({method:"POST",fullPath:"/v1/treasury/outbound_transfers"}),retrieve:_t({method:"GET",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}"}),list:_t({method:"GET",fullPath:"/v1/treasury/outbound_transfers",methodType:"list"}),cancel:_t({method:"POST",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}/cancel"})}),$r=s.method,Zc=s.extend({activate:$r({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/activate"}),deactivate:$r({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/deactivate"}),reject:$r({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/reject"})}),wt=s.method,ed=s.extend({create:wt({method:"POST",fullPath:"/v1/issuing/personalization_designs"}),retrieve:wt({method:"GET",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),update:wt({method:"POST",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),list:wt({method:"GET",fullPath:"/v1/issuing/personalization_designs",methodType:"list"})}),Zn=s.method,td=s.extend({retrieve:Zn({method:"GET",fullPath:"/v1/issuing/physical_bundles/{physical_bundle}"}),list:Zn({method:"GET",fullPath:"/v1/issuing/physical_bundles",methodType:"list"})}),ea=s.method,rd=s.extend({retrieve:ea({method:"GET",fullPath:"/v1/climate/products/{product}"}),list:ea({method:"GET",fullPath:"/v1/climate/products",methodType:"list"})}),nd=s.method,ad=s.extend({presentPaymentMethod:nd({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/present_payment_method"})}),K=s.method,od=s.extend({create:K({method:"POST",fullPath:"/v1/terminal/readers"}),retrieve:K({method:"GET",fullPath:"/v1/terminal/readers/{reader}"}),update:K({method:"POST",fullPath:"/v1/terminal/readers/{reader}"}),list:K({method:"GET",fullPath:"/v1/terminal/readers",methodType:"list"}),del:K({method:"DELETE",fullPath:"/v1/terminal/readers/{reader}"}),cancelAction:K({method:"POST",fullPath:"/v1/terminal/readers/{reader}/cancel_action"}),processPaymentIntent:K({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_payment_intent"}),processSetupIntent:K({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_setup_intent"}),refundPayment:K({method:"POST",fullPath:"/v1/terminal/readers/{reader}/refund_payment"}),setReaderDisplay:K({method:"POST",fullPath:"/v1/terminal/readers/{reader}/set_reader_display"})}),sd=s.method,id=s.extend({create:sd({method:"POST",fullPath:"/v1/test_helpers/treasury/received_credits"})}),ta=s.method,ld=s.extend({retrieve:ta({method:"GET",fullPath:"/v1/treasury/received_credits/{id}"}),list:ta({method:"GET",fullPath:"/v1/treasury/received_credits",methodType:"list"})}),cd=s.method,dd=s.extend({create:cd({method:"POST",fullPath:"/v1/test_helpers/treasury/received_debits"})}),ra=s.method,ud=s.extend({retrieve:ra({method:"GET",fullPath:"/v1/treasury/received_debits/{id}"}),list:ra({method:"GET",fullPath:"/v1/treasury/received_debits",methodType:"list"})}),hd=s.method,md=s.extend({expire:hd({method:"POST",fullPath:"/v1/test_helpers/refunds/{refund}/expire"})}),St=s.method,pd=s.extend({create:St({method:"POST",fullPath:"/v1/tax/registrations"}),retrieve:St({method:"GET",fullPath:"/v1/tax/registrations/{id}"}),update:St({method:"POST",fullPath:"/v1/tax/registrations/{id}"}),list:St({method:"GET",fullPath:"/v1/tax/registrations",methodType:"list"})}),Rr=s.method,fd=s.extend({create:Rr({method:"POST",fullPath:"/v1/reporting/report_runs"}),retrieve:Rr({method:"GET",fullPath:"/v1/reporting/report_runs/{report_run}"}),list:Rr({method:"GET",fullPath:"/v1/reporting/report_runs",methodType:"list"})}),na=s.method,yd=s.extend({retrieve:na({method:"GET",fullPath:"/v1/reporting/report_types/{report_type}"}),list:na({method:"GET",fullPath:"/v1/reporting/report_types",methodType:"list"})}),Mr=s.method,vd=s.extend({create:Mr({method:"POST",fullPath:"/v1/forwarding/requests"}),retrieve:Mr({method:"GET",fullPath:"/v1/forwarding/requests/{id}"}),list:Mr({method:"GET",fullPath:"/v1/forwarding/requests",methodType:"list"})}),aa=s.method,gd=s.extend({retrieve:aa({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs/{scheduled_query_run}"}),list:aa({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs",methodType:"list"})}),Et=s.method,Pd=s.extend({create:Et({method:"POST",fullPath:"/v1/apps/secrets"}),list:Et({method:"GET",fullPath:"/v1/apps/secrets",methodType:"list"}),deleteWhere:Et({method:"POST",fullPath:"/v1/apps/secrets/delete"}),find:Et({method:"GET",fullPath:"/v1/apps/secrets/find"})}),xd=s.method,Td=s.extend({create:xd({method:"POST",fullPath:"/v1/billing_portal/sessions"})}),Se=s.method,bd=s.extend({create:Se({method:"POST",fullPath:"/v1/checkout/sessions"}),retrieve:Se({method:"GET",fullPath:"/v1/checkout/sessions/{session}"}),update:Se({method:"POST",fullPath:"/v1/checkout/sessions/{session}"}),list:Se({method:"GET",fullPath:"/v1/checkout/sessions",methodType:"list"}),expire:Se({method:"POST",fullPath:"/v1/checkout/sessions/{session}/expire"}),listLineItems:Se({method:"GET",fullPath:"/v1/checkout/sessions/{session}/line_items",methodType:"list"})}),oa=s.method,_d=s.extend({create:oa({method:"POST",fullPath:"/v1/financial_connections/sessions"}),retrieve:oa({method:"GET",fullPath:"/v1/financial_connections/sessions/{session}"})}),sa=s.method,wd=s.extend({retrieve:sa({method:"GET",fullPath:"/v1/tax/settings"}),update:sa({method:"POST",fullPath:"/v1/tax/settings"})}),ia=s.method,Sd=s.extend({retrieve:ia({method:"GET",fullPath:"/v1/climate/suppliers/{supplier}"}),list:ia({method:"GET",fullPath:"/v1/climate/suppliers",methodType:"list"})}),ze=s.method,Ed=s.extend({create:ze({method:"POST",fullPath:"/v1/test_helpers/test_clocks"}),retrieve:ze({method:"GET",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),list:ze({method:"GET",fullPath:"/v1/test_helpers/test_clocks",methodType:"list"}),del:ze({method:"DELETE",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),advance:ze({method:"POST",fullPath:"/v1/test_helpers/test_clocks/{test_clock}/advance"})}),jr=s.method,Od=s.extend({retrieve:jr({method:"GET",fullPath:"/v1/issuing/tokens/{token}"}),update:jr({method:"POST",fullPath:"/v1/issuing/tokens/{token}"}),list:jr({method:"GET",fullPath:"/v1/issuing/tokens",methodType:"list"})}),la=s.method,Nd=s.extend({retrieve:la({method:"GET",fullPath:"/v1/treasury/transaction_entries/{id}"}),list:la({method:"GET",fullPath:"/v1/treasury/transaction_entries",methodType:"list"})}),Ir=s.method,Ad=s.extend({createForceCapture:Ir({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_force_capture"}),createUnlinkedRefund:Ir({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_unlinked_refund"}),refund:Ir({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/{transaction}/refund"})}),ca=s.method,Cd=s.extend({retrieve:ca({method:"GET",fullPath:"/v1/financial_connections/transactions/{transaction}"}),list:ca({method:"GET",fullPath:"/v1/financial_connections/transactions",methodType:"list"})}),kr=s.method,$d=s.extend({retrieve:kr({method:"GET",fullPath:"/v1/issuing/transactions/{transaction}"}),update:kr({method:"POST",fullPath:"/v1/issuing/transactions/{transaction}"}),list:kr({method:"GET",fullPath:"/v1/issuing/transactions",methodType:"list"})}),Ot=s.method,Rd=s.extend({retrieve:Ot({method:"GET",fullPath:"/v1/tax/transactions/{transaction}"}),createFromCalculation:Ot({method:"POST",fullPath:"/v1/tax/transactions/create_from_calculation"}),createReversal:Ot({method:"POST",fullPath:"/v1/tax/transactions/create_reversal"}),listLineItems:Ot({method:"GET",fullPath:"/v1/tax/transactions/{transaction}/line_items",methodType:"list"})}),da=s.method,Md=s.extend({retrieve:da({method:"GET",fullPath:"/v1/treasury/transactions/{id}"}),list:da({method:"GET",fullPath:"/v1/treasury/transactions",methodType:"list"})}),Nt=s.method,jd=s.extend({create:Nt({method:"POST",fullPath:"/v1/radar/value_list_items"}),retrieve:Nt({method:"GET",fullPath:"/v1/radar/value_list_items/{item}"}),list:Nt({method:"GET",fullPath:"/v1/radar/value_list_items",methodType:"list"}),del:Nt({method:"DELETE",fullPath:"/v1/radar/value_list_items/{item}"})}),We=s.method,Id=s.extend({create:We({method:"POST",fullPath:"/v1/radar/value_lists"}),retrieve:We({method:"GET",fullPath:"/v1/radar/value_lists/{value_list}"}),update:We({method:"POST",fullPath:"/v1/radar/value_lists/{value_list}"}),list:We({method:"GET",fullPath:"/v1/radar/value_lists",methodType:"list"}),del:We({method:"DELETE",fullPath:"/v1/radar/value_lists/{value_list}"})}),ua=s.method,kd=s.extend({retrieve:ua({method:"GET",fullPath:"/v1/identity/verification_reports/{report}"}),list:ua({method:"GET",fullPath:"/v1/identity/verification_reports",methodType:"list"})}),Ee=s.method,Gd=s.extend({create:Ee({method:"POST",fullPath:"/v1/identity/verification_sessions"}),retrieve:Ee({method:"GET",fullPath:"/v1/identity/verification_sessions/{session}"}),update:Ee({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}"}),list:Ee({method:"GET",fullPath:"/v1/identity/verification_sessions",methodType:"list"}),cancel:Ee({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/cancel"}),redact:Ee({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/redact"})}),j=s.method,ha=s.extend({create:j({method:"POST",fullPath:"/v1/accounts"}),retrieve(t,...e){return typeof t=="string"?j({method:"GET",fullPath:"/v1/accounts/{id}"}).apply(this,[t,...e]):(t==null&&[].shift.apply([t,...e]),j({method:"GET",fullPath:"/v1/account"}).apply(this,[t,...e]))},update:j({method:"POST",fullPath:"/v1/accounts/{account}"}),list:j({method:"GET",fullPath:"/v1/accounts",methodType:"list"}),del:j({method:"DELETE",fullPath:"/v1/accounts/{account}"}),createExternalAccount:j({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts"}),createLoginLink:j({method:"POST",fullPath:"/v1/accounts/{account}/login_links"}),createPerson:j({method:"POST",fullPath:"/v1/accounts/{account}/persons"}),deleteExternalAccount:j({method:"DELETE",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),deletePerson:j({method:"DELETE",fullPath:"/v1/accounts/{account}/persons/{person}"}),listCapabilities:j({method:"GET",fullPath:"/v1/accounts/{account}/capabilities",methodType:"list"}),listExternalAccounts:j({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts",methodType:"list"}),listPersons:j({method:"GET",fullPath:"/v1/accounts/{account}/persons",methodType:"list"}),reject:j({method:"POST",fullPath:"/v1/accounts/{account}/reject"}),retrieveCurrent:j({method:"GET",fullPath:"/v1/account"}),retrieveCapability:j({method:"GET",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),retrieveExternalAccount:j({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),retrievePerson:j({method:"GET",fullPath:"/v1/accounts/{account}/persons/{person}"}),updateCapability:j({method:"POST",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),updateExternalAccount:j({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),updatePerson:j({method:"POST",fullPath:"/v1/accounts/{account}/persons/{person}"})}),Fd=s.method,Dd=s.extend({create:Fd({method:"POST",fullPath:"/v1/account_links"})}),qd=s.method,Ld=s.extend({create:qd({method:"POST",fullPath:"/v1/account_sessions"})}),At=s.method,Ud=s.extend({create:At({method:"POST",fullPath:"/v1/apple_pay/domains"}),retrieve:At({method:"GET",fullPath:"/v1/apple_pay/domains/{domain}"}),list:At({method:"GET",fullPath:"/v1/apple_pay/domains",methodType:"list"}),del:At({method:"DELETE",fullPath:"/v1/apple_pay/domains/{domain}"})}),Oe=s.method,Bd=s.extend({retrieve:Oe({method:"GET",fullPath:"/v1/application_fees/{id}"}),list:Oe({method:"GET",fullPath:"/v1/application_fees",methodType:"list"}),createRefund:Oe({method:"POST",fullPath:"/v1/application_fees/{id}/refunds"}),listRefunds:Oe({method:"GET",fullPath:"/v1/application_fees/{id}/refunds",methodType:"list"}),retrieveRefund:Oe({method:"GET",fullPath:"/v1/application_fees/{fee}/refunds/{id}"}),updateRefund:Oe({method:"POST",fullPath:"/v1/application_fees/{fee}/refunds/{id}"})}),Hd=s.method,zd=s.extend({retrieve:Hd({method:"GET",fullPath:"/v1/balance"})}),ma=s.method,Wd=s.extend({retrieve:ma({method:"GET",fullPath:"/v1/balance_transactions/{id}"}),list:ma({method:"GET",fullPath:"/v1/balance_transactions",methodType:"list"})}),Ne=s.method,Vd=s.extend({create:Ne({method:"POST",fullPath:"/v1/charges"}),retrieve:Ne({method:"GET",fullPath:"/v1/charges/{charge}"}),update:Ne({method:"POST",fullPath:"/v1/charges/{charge}"}),list:Ne({method:"GET",fullPath:"/v1/charges",methodType:"list"}),capture:Ne({method:"POST",fullPath:"/v1/charges/{charge}/capture"}),search:Ne({method:"GET",fullPath:"/v1/charges/search",methodType:"search"})}),Kd=s.method,Jd=s.extend({retrieve:Kd({method:"GET",fullPath:"/v1/confirmation_tokens/{confirmation_token}"})}),pa=s.method,Yd=s.extend({retrieve:pa({method:"GET",fullPath:"/v1/country_specs/{country}"}),list:pa({method:"GET",fullPath:"/v1/country_specs",methodType:"list"})}),Ve=s.method,Qd=s.extend({create:Ve({method:"POST",fullPath:"/v1/coupons"}),retrieve:Ve({method:"GET",fullPath:"/v1/coupons/{coupon}"}),update:Ve({method:"POST",fullPath:"/v1/coupons/{coupon}"}),list:Ve({method:"GET",fullPath:"/v1/coupons",methodType:"list"}),del:Ve({method:"DELETE",fullPath:"/v1/coupons/{coupon}"})}),ne=s.method,Xd=s.extend({create:ne({method:"POST",fullPath:"/v1/credit_notes"}),retrieve:ne({method:"GET",fullPath:"/v1/credit_notes/{id}"}),update:ne({method:"POST",fullPath:"/v1/credit_notes/{id}"}),list:ne({method:"GET",fullPath:"/v1/credit_notes",methodType:"list"}),listLineItems:ne({method:"GET",fullPath:"/v1/credit_notes/{credit_note}/lines",methodType:"list"}),listPreviewLineItems:ne({method:"GET",fullPath:"/v1/credit_notes/preview/lines",methodType:"list"}),preview:ne({method:"GET",fullPath:"/v1/credit_notes/preview"}),voidCreditNote:ne({method:"POST",fullPath:"/v1/credit_notes/{id}/void"})}),Zd=s.method,eu=s.extend({create:Zd({method:"POST",fullPath:"/v1/customer_sessions"})}),E=s.method,tu=s.extend({create:E({method:"POST",fullPath:"/v1/customers"}),retrieve:E({method:"GET",fullPath:"/v1/customers/{customer}"}),update:E({method:"POST",fullPath:"/v1/customers/{customer}"}),list:E({method:"GET",fullPath:"/v1/customers",methodType:"list"}),del:E({method:"DELETE",fullPath:"/v1/customers/{customer}"}),createBalanceTransaction:E({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions"}),createFundingInstructions:E({method:"POST",fullPath:"/v1/customers/{customer}/funding_instructions"}),createSource:E({method:"POST",fullPath:"/v1/customers/{customer}/sources"}),createTaxId:E({method:"POST",fullPath:"/v1/customers/{customer}/tax_ids"}),deleteDiscount:E({method:"DELETE",fullPath:"/v1/customers/{customer}/discount"}),deleteSource:E({method:"DELETE",fullPath:"/v1/customers/{customer}/sources/{id}"}),deleteTaxId:E({method:"DELETE",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),listBalanceTransactions:E({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions",methodType:"list"}),listCashBalanceTransactions:E({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions",methodType:"list"}),listPaymentMethods:E({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods",methodType:"list"}),listSources:E({method:"GET",fullPath:"/v1/customers/{customer}/sources",methodType:"list"}),listTaxIds:E({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids",methodType:"list"}),retrieveBalanceTransaction:E({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),retrieveCashBalance:E({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance"}),retrieveCashBalanceTransaction:E({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions/{transaction}"}),retrievePaymentMethod:E({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods/{payment_method}"}),retrieveSource:E({method:"GET",fullPath:"/v1/customers/{customer}/sources/{id}"}),retrieveTaxId:E({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),search:E({method:"GET",fullPath:"/v1/customers/search",methodType:"search"}),updateBalanceTransaction:E({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),updateCashBalance:E({method:"POST",fullPath:"/v1/customers/{customer}/cash_balance"}),updateSource:E({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}"}),verifySource:E({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}/verify"})}),Ct=s.method,ru=s.extend({retrieve:Ct({method:"GET",fullPath:"/v1/disputes/{dispute}"}),update:Ct({method:"POST",fullPath:"/v1/disputes/{dispute}"}),list:Ct({method:"GET",fullPath:"/v1/disputes",methodType:"list"}),close:Ct({method:"POST",fullPath:"/v1/disputes/{dispute}/close"})}),fa=s.method,nu=s.extend({create:fa({method:"POST",fullPath:"/v1/ephemeral_keys",validator:(t,e)=>{if(!e.headers||!e.headers["Stripe-Version"])throw new Error("Passing apiVersion in a separate options hash is required to create an ephemeral key. See https://stripe.com/docs/api/versioning?lang=node")}}),del:fa({method:"DELETE",fullPath:"/v1/ephemeral_keys/{key}"})}),ya=s.method,au=s.extend({retrieve:ya({method:"GET",fullPath:"/v1/events/{id}"}),list:ya({method:"GET",fullPath:"/v1/events",methodType:"list"})}),va=s.method,ou=s.extend({retrieve:va({method:"GET",fullPath:"/v1/exchange_rates/{rate_id}"}),list:va({method:"GET",fullPath:"/v1/exchange_rates",methodType:"list"})}),$t=s.method,su=s.extend({create:$t({method:"POST",fullPath:"/v1/file_links"}),retrieve:$t({method:"GET",fullPath:"/v1/file_links/{link}"}),update:$t({method:"POST",fullPath:"/v1/file_links/{link}"}),list:$t({method:"GET",fullPath:"/v1/file_links",methodType:"list"})}),iu=(t,e,r)=>{const n=(Math.round(Math.random()*1e16)+Math.round(Math.random()*1e16)).toString();r["Content-Type"]=`multipart/form-data; boundary=${n}`;const a=new TextEncoder;let o=new Uint8Array(0);const i=a.encode(`\r
`);function h(d){const m=o,u=d instanceof Uint8Array?d:new Uint8Array(a.encode(d));o=new Uint8Array(m.length+u.length+2),o.set(m),o.set(u,m.length),o.set(i,o.length-2)}function c(d){return`"${d.replace(/"|"/g,"%22").replace(/\r\n|\r|\n/g," ")}"`}const p=Fl(e);for(const d in p){if(!Object.prototype.hasOwnProperty.call(p,d))continue;const m=p[d];if(h(`--${n}`),Object.prototype.hasOwnProperty.call(m,"data")){const u=m;h(`Content-Disposition: form-data; name=${c(d)}; filename=${c(u.name||"blob")}`),h(`Content-Type: ${u.type||"application/octet-stream"}`),h(""),h(u.data)}else h(`Content-Disposition: form-data; name=${c(d)}`),h(""),h(m)}return h(`--${n}--`),o};function lu(t,e,r,n){if(e=e||{},t!=="POST")return n(null,er(e));this._stripe._platformFunctions.tryBufferData(e).then(a=>{const o=iu(t,a,r);return n(null,o)}).catch(a=>n(a,null))}const Gr=s.method,cu=s.extend({create:Gr({method:"POST",fullPath:"/v1/files",headers:{"Content-Type":"multipart/form-data"},host:"files.stripe.com"}),retrieve:Gr({method:"GET",fullPath:"/v1/files/{file}"}),list:Gr({method:"GET",fullPath:"/v1/files",methodType:"list"}),requestDataProcessor:lu}),Ke=s.method,du=s.extend({create:Ke({method:"POST",fullPath:"/v1/invoiceitems"}),retrieve:Ke({method:"GET",fullPath:"/v1/invoiceitems/{invoiceitem}"}),update:Ke({method:"POST",fullPath:"/v1/invoiceitems/{invoiceitem}"}),list:Ke({method:"GET",fullPath:"/v1/invoiceitems",methodType:"list"}),del:Ke({method:"DELETE",fullPath:"/v1/invoiceitems/{invoiceitem}"})}),Rt=s.method,uu=s.extend({retrieve:Rt({method:"GET",fullPath:"/v1/invoice_rendering_templates/{template}"}),list:Rt({method:"GET",fullPath:"/v1/invoice_rendering_templates",methodType:"list"}),archive:Rt({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/archive"}),unarchive:Rt({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/unarchive"})}),G=s.method,hu=s.extend({create:G({method:"POST",fullPath:"/v1/invoices"}),retrieve:G({method:"GET",fullPath:"/v1/invoices/{invoice}"}),update:G({method:"POST",fullPath:"/v1/invoices/{invoice}"}),list:G({method:"GET",fullPath:"/v1/invoices",methodType:"list"}),del:G({method:"DELETE",fullPath:"/v1/invoices/{invoice}"}),addLines:G({method:"POST",fullPath:"/v1/invoices/{invoice}/add_lines"}),createPreview:G({method:"POST",fullPath:"/v1/invoices/create_preview"}),finalizeInvoice:G({method:"POST",fullPath:"/v1/invoices/{invoice}/finalize"}),listLineItems:G({method:"GET",fullPath:"/v1/invoices/{invoice}/lines",methodType:"list"}),listUpcomingLines:G({method:"GET",fullPath:"/v1/invoices/upcoming/lines",methodType:"list"}),markUncollectible:G({method:"POST",fullPath:"/v1/invoices/{invoice}/mark_uncollectible"}),pay:G({method:"POST",fullPath:"/v1/invoices/{invoice}/pay"}),removeLines:G({method:"POST",fullPath:"/v1/invoices/{invoice}/remove_lines"}),retrieveUpcoming:G({method:"GET",fullPath:"/v1/invoices/upcoming"}),search:G({method:"GET",fullPath:"/v1/invoices/search",methodType:"search"}),sendInvoice:G({method:"POST",fullPath:"/v1/invoices/{invoice}/send"}),updateLines:G({method:"POST",fullPath:"/v1/invoices/{invoice}/update_lines"}),updateLineItem:G({method:"POST",fullPath:"/v1/invoices/{invoice}/lines/{line_item_id}"}),voidInvoice:G({method:"POST",fullPath:"/v1/invoices/{invoice}/void"})}),mu=s.method,pu=s.extend({retrieve:mu({method:"GET",fullPath:"/v1/mandates/{mandate}"})}),ga=s.method,Fr="connect.stripe.com",fu=s.extend({basePath:"/",authorizeUrl(t,e){t=t||{},e=e||{};let r="oauth/authorize";return e.express&&(r=`express/${r}`),t.response_type||(t.response_type="code"),t.client_id||(t.client_id=this._stripe.getClientId()),t.scope||(t.scope="read_write"),`https://${Fr}/${r}?${er(t)}`},token:ga({method:"POST",path:"oauth/token",host:Fr}),deauthorize(t,...e){return t.client_id||(t.client_id=this._stripe.getClientId()),ga({method:"POST",path:"oauth/deauthorize",host:Fr}).apply(this,[t,...e])}}),W=s.method,yu=s.extend({create:W({method:"POST",fullPath:"/v1/payment_intents"}),retrieve:W({method:"GET",fullPath:"/v1/payment_intents/{intent}"}),update:W({method:"POST",fullPath:"/v1/payment_intents/{intent}"}),list:W({method:"GET",fullPath:"/v1/payment_intents",methodType:"list"}),applyCustomerBalance:W({method:"POST",fullPath:"/v1/payment_intents/{intent}/apply_customer_balance"}),cancel:W({method:"POST",fullPath:"/v1/payment_intents/{intent}/cancel"}),capture:W({method:"POST",fullPath:"/v1/payment_intents/{intent}/capture"}),confirm:W({method:"POST",fullPath:"/v1/payment_intents/{intent}/confirm"}),incrementAuthorization:W({method:"POST",fullPath:"/v1/payment_intents/{intent}/increment_authorization"}),search:W({method:"GET",fullPath:"/v1/payment_intents/search",methodType:"search"}),verifyMicrodeposits:W({method:"POST",fullPath:"/v1/payment_intents/{intent}/verify_microdeposits"})}),Je=s.method,vu=s.extend({create:Je({method:"POST",fullPath:"/v1/payment_links"}),retrieve:Je({method:"GET",fullPath:"/v1/payment_links/{payment_link}"}),update:Je({method:"POST",fullPath:"/v1/payment_links/{payment_link}"}),list:Je({method:"GET",fullPath:"/v1/payment_links",methodType:"list"}),listLineItems:Je({method:"GET",fullPath:"/v1/payment_links/{payment_link}/line_items",methodType:"list"})}),Mt=s.method,gu=s.extend({create:Mt({method:"POST",fullPath:"/v1/payment_method_configurations"}),retrieve:Mt({method:"GET",fullPath:"/v1/payment_method_configurations/{configuration}"}),update:Mt({method:"POST",fullPath:"/v1/payment_method_configurations/{configuration}"}),list:Mt({method:"GET",fullPath:"/v1/payment_method_configurations",methodType:"list"})}),Ye=s.method,Pu=s.extend({create:Ye({method:"POST",fullPath:"/v1/payment_method_domains"}),retrieve:Ye({method:"GET",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),update:Ye({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),list:Ye({method:"GET",fullPath:"/v1/payment_method_domains",methodType:"list"}),validate:Ye({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}/validate"})}),Ae=s.method,xu=s.extend({create:Ae({method:"POST",fullPath:"/v1/payment_methods"}),retrieve:Ae({method:"GET",fullPath:"/v1/payment_methods/{payment_method}"}),update:Ae({method:"POST",fullPath:"/v1/payment_methods/{payment_method}"}),list:Ae({method:"GET",fullPath:"/v1/payment_methods",methodType:"list"}),attach:Ae({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/attach"}),detach:Ae({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/detach"})}),Ce=s.method,Tu=s.extend({create:Ce({method:"POST",fullPath:"/v1/payouts"}),retrieve:Ce({method:"GET",fullPath:"/v1/payouts/{payout}"}),update:Ce({method:"POST",fullPath:"/v1/payouts/{payout}"}),list:Ce({method:"GET",fullPath:"/v1/payouts",methodType:"list"}),cancel:Ce({method:"POST",fullPath:"/v1/payouts/{payout}/cancel"}),reverse:Ce({method:"POST",fullPath:"/v1/payouts/{payout}/reverse"})}),Qe=s.method,bu=s.extend({create:Qe({method:"POST",fullPath:"/v1/plans"}),retrieve:Qe({method:"GET",fullPath:"/v1/plans/{plan}"}),update:Qe({method:"POST",fullPath:"/v1/plans/{plan}"}),list:Qe({method:"GET",fullPath:"/v1/plans",methodType:"list"}),del:Qe({method:"DELETE",fullPath:"/v1/plans/{plan}"})}),Xe=s.method,_u=s.extend({create:Xe({method:"POST",fullPath:"/v1/prices"}),retrieve:Xe({method:"GET",fullPath:"/v1/prices/{price}"}),update:Xe({method:"POST",fullPath:"/v1/prices/{price}"}),list:Xe({method:"GET",fullPath:"/v1/prices",methodType:"list"}),search:Xe({method:"GET",fullPath:"/v1/prices/search",methodType:"search"})}),J=s.method,wu=s.extend({create:J({method:"POST",fullPath:"/v1/products"}),retrieve:J({method:"GET",fullPath:"/v1/products/{id}"}),update:J({method:"POST",fullPath:"/v1/products/{id}"}),list:J({method:"GET",fullPath:"/v1/products",methodType:"list"}),del:J({method:"DELETE",fullPath:"/v1/products/{id}"}),createFeature:J({method:"POST",fullPath:"/v1/products/{product}/features"}),deleteFeature:J({method:"DELETE",fullPath:"/v1/products/{product}/features/{id}"}),listFeatures:J({method:"GET",fullPath:"/v1/products/{product}/features",methodType:"list"}),retrieveFeature:J({method:"GET",fullPath:"/v1/products/{product}/features/{id}"}),search:J({method:"GET",fullPath:"/v1/products/search",methodType:"search"})}),jt=s.method,Su=s.extend({create:jt({method:"POST",fullPath:"/v1/promotion_codes"}),retrieve:jt({method:"GET",fullPath:"/v1/promotion_codes/{promotion_code}"}),update:jt({method:"POST",fullPath:"/v1/promotion_codes/{promotion_code}"}),list:jt({method:"GET",fullPath:"/v1/promotion_codes",methodType:"list"})}),Y=s.method,Eu=s.extend({create:Y({method:"POST",fullPath:"/v1/quotes"}),retrieve:Y({method:"GET",fullPath:"/v1/quotes/{quote}"}),update:Y({method:"POST",fullPath:"/v1/quotes/{quote}"}),list:Y({method:"GET",fullPath:"/v1/quotes",methodType:"list"}),accept:Y({method:"POST",fullPath:"/v1/quotes/{quote}/accept"}),cancel:Y({method:"POST",fullPath:"/v1/quotes/{quote}/cancel"}),finalizeQuote:Y({method:"POST",fullPath:"/v1/quotes/{quote}/finalize"}),listComputedUpfrontLineItems:Y({method:"GET",fullPath:"/v1/quotes/{quote}/computed_upfront_line_items",methodType:"list"}),listLineItems:Y({method:"GET",fullPath:"/v1/quotes/{quote}/line_items",methodType:"list"}),pdf:Y({method:"GET",fullPath:"/v1/quotes/{quote}/pdf",host:"files.stripe.com",streaming:!0})}),Ze=s.method,Ou=s.extend({create:Ze({method:"POST",fullPath:"/v1/refunds"}),retrieve:Ze({method:"GET",fullPath:"/v1/refunds/{refund}"}),update:Ze({method:"POST",fullPath:"/v1/refunds/{refund}"}),list:Ze({method:"GET",fullPath:"/v1/refunds",methodType:"list"}),cancel:Ze({method:"POST",fullPath:"/v1/refunds/{refund}/cancel"})}),Dr=s.method,Nu=s.extend({retrieve:Dr({method:"GET",fullPath:"/v1/reviews/{review}"}),list:Dr({method:"GET",fullPath:"/v1/reviews",methodType:"list"}),approve:Dr({method:"POST",fullPath:"/v1/reviews/{review}/approve"})}),Au=s.method,Cu=s.extend({list:Au({method:"GET",fullPath:"/v1/setup_attempts",methodType:"list"})}),pe=s.method,$u=s.extend({create:pe({method:"POST",fullPath:"/v1/setup_intents"}),retrieve:pe({method:"GET",fullPath:"/v1/setup_intents/{intent}"}),update:pe({method:"POST",fullPath:"/v1/setup_intents/{intent}"}),list:pe({method:"GET",fullPath:"/v1/setup_intents",methodType:"list"}),cancel:pe({method:"POST",fullPath:"/v1/setup_intents/{intent}/cancel"}),confirm:pe({method:"POST",fullPath:"/v1/setup_intents/{intent}/confirm"}),verifyMicrodeposits:pe({method:"POST",fullPath:"/v1/setup_intents/{intent}/verify_microdeposits"})}),It=s.method,Ru=s.extend({create:It({method:"POST",fullPath:"/v1/shipping_rates"}),retrieve:It({method:"GET",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),update:It({method:"POST",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),list:It({method:"GET",fullPath:"/v1/shipping_rates",methodType:"list"})}),et=s.method,Mu=s.extend({create:et({method:"POST",fullPath:"/v1/sources"}),retrieve:et({method:"GET",fullPath:"/v1/sources/{source}"}),update:et({method:"POST",fullPath:"/v1/sources/{source}"}),listSourceTransactions:et({method:"GET",fullPath:"/v1/sources/{source}/source_transactions",methodType:"list"}),verify:et({method:"POST",fullPath:"/v1/sources/{source}/verify"})}),fe=s.method,ju=s.extend({create:fe({method:"POST",fullPath:"/v1/subscription_items"}),retrieve:fe({method:"GET",fullPath:"/v1/subscription_items/{item}"}),update:fe({method:"POST",fullPath:"/v1/subscription_items/{item}"}),list:fe({method:"GET",fullPath:"/v1/subscription_items",methodType:"list"}),del:fe({method:"DELETE",fullPath:"/v1/subscription_items/{item}"}),createUsageRecord:fe({method:"POST",fullPath:"/v1/subscription_items/{subscription_item}/usage_records"}),listUsageRecordSummaries:fe({method:"GET",fullPath:"/v1/subscription_items/{subscription_item}/usage_record_summaries",methodType:"list"})}),$e=s.method,Iu=s.extend({create:$e({method:"POST",fullPath:"/v1/subscription_schedules"}),retrieve:$e({method:"GET",fullPath:"/v1/subscription_schedules/{schedule}"}),update:$e({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}"}),list:$e({method:"GET",fullPath:"/v1/subscription_schedules",methodType:"list"}),cancel:$e({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/cancel"}),release:$e({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/release"})}),ae=s.method,ku=s.extend({create:ae({method:"POST",fullPath:"/v1/subscriptions"}),retrieve:ae({method:"GET",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),update:ae({method:"POST",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),list:ae({method:"GET",fullPath:"/v1/subscriptions",methodType:"list"}),cancel:ae({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),deleteDiscount:ae({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}/discount"}),resume:ae({method:"POST",fullPath:"/v1/subscriptions/{subscription}/resume"}),search:ae({method:"GET",fullPath:"/v1/subscriptions/search",methodType:"search"})}),Pa=s.method,Gu=s.extend({retrieve:Pa({method:"GET",fullPath:"/v1/tax_codes/{id}"}),list:Pa({method:"GET",fullPath:"/v1/tax_codes",methodType:"list"})}),kt=s.method,Fu=s.extend({create:kt({method:"POST",fullPath:"/v1/tax_ids"}),retrieve:kt({method:"GET",fullPath:"/v1/tax_ids/{id}"}),list:kt({method:"GET",fullPath:"/v1/tax_ids",methodType:"list"}),del:kt({method:"DELETE",fullPath:"/v1/tax_ids/{id}"})}),Gt=s.method,Du=s.extend({create:Gt({method:"POST",fullPath:"/v1/tax_rates"}),retrieve:Gt({method:"GET",fullPath:"/v1/tax_rates/{tax_rate}"}),update:Gt({method:"POST",fullPath:"/v1/tax_rates/{tax_rate}"}),list:Gt({method:"GET",fullPath:"/v1/tax_rates",methodType:"list"})}),xa=s.method,qu=s.extend({create:xa({method:"POST",fullPath:"/v1/tokens"}),retrieve:xa({method:"GET",fullPath:"/v1/tokens/{token}"})}),tt=s.method,Lu=s.extend({create:tt({method:"POST",fullPath:"/v1/topups"}),retrieve:tt({method:"GET",fullPath:"/v1/topups/{topup}"}),update:tt({method:"POST",fullPath:"/v1/topups/{topup}"}),list:tt({method:"GET",fullPath:"/v1/topups",methodType:"list"}),cancel:tt({method:"POST",fullPath:"/v1/topups/{topup}/cancel"})}),oe=s.method,Uu=s.extend({create:oe({method:"POST",fullPath:"/v1/transfers"}),retrieve:oe({method:"GET",fullPath:"/v1/transfers/{transfer}"}),update:oe({method:"POST",fullPath:"/v1/transfers/{transfer}"}),list:oe({method:"GET",fullPath:"/v1/transfers",methodType:"list"}),createReversal:oe({method:"POST",fullPath:"/v1/transfers/{id}/reversals"}),listReversals:oe({method:"GET",fullPath:"/v1/transfers/{id}/reversals",methodType:"list"}),retrieveReversal:oe({method:"GET",fullPath:"/v1/transfers/{transfer}/reversals/{id}"}),updateReversal:oe({method:"POST",fullPath:"/v1/transfers/{transfer}/reversals/{id}"})}),rt=s.method,Bu=s.extend({create:rt({method:"POST",fullPath:"/v1/webhook_endpoints"}),retrieve:rt({method:"GET",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),update:rt({method:"POST",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),list:rt({method:"GET",fullPath:"/v1/webhook_endpoints",methodType:"list"}),del:rt({method:"DELETE",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"})}),Hu=$("apps",{Secrets:Pd}),zu=$("billing",{Alerts:oc,CreditBalanceSummary:Pc,CreditBalanceTransactions:xc,CreditGrants:Tc,MeterEventAdjustments:kc,MeterEvents:Hc,Meters:Vc}),Wu=$("billingPortal",{Configurations:hc,Sessions:Td}),Vu=$("checkout",{Sessions:bd}),Ku=$("climate",{Orders:Kc,Products:rd,Suppliers:Sd}),Ju=$("entitlements",{ActiveEntitlements:ac,Features:Cc}),Yu=$("financialConnections",{Accounts:nc,Sessions:_d,Transactions:Cd}),Qu=$("forwarding",{Requests:vd}),Xu=$("identity",{VerificationReports:kd,VerificationSessions:Gd}),Zu=$("issuing",{Authorizations:ic,Cardholders:cc,Cards:uc,Disputes:Ec,PersonalizationDesigns:ed,PhysicalBundles:td,Tokens:Od,Transactions:$d}),eh=$("radar",{EarlyFraudWarnings:Oc,ValueListItems:jd,ValueLists:Id}),th=$("reporting",{ReportRuns:fd,ReportTypes:yd}),rh=$("sigma",{ScheduledQueryRuns:gd}),nh=$("tax",{Calculations:lc,Registrations:pd,Settings:wd,Transactions:Rd}),ah=$("terminal",{Configurations:mc,ConnectionTokens:vc,Locations:jc,Readers:od}),oh=$("testHelpers",{ConfirmationTokens:fc,Customers:wc,Refunds:md,TestClocks:Ed,Issuing:$("issuing",{Authorizations:sc,Cards:dc,PersonalizationDesigns:Zc,Transactions:Ad}),Terminal:$("terminal",{Readers:ad}),Treasury:$("treasury",{InboundTransfers:Rc,OutboundPayments:Jc,OutboundTransfers:Qc,ReceivedCredits:id,ReceivedDebits:dd})}),sh=$("treasury",{CreditReversals:bc,DebitReversals:Sc,FinancialAccounts:$c,InboundTransfers:Mc,OutboundPayments:Yc,OutboundTransfers:Xc,ReceivedCredits:ld,ReceivedDebits:ud,TransactionEntries:Nd,Transactions:Md}),ih=$("v2",{Billing:$("billing",{MeterEventAdjustments:Fc,MeterEventSession:qc,MeterEventStream:Uc,MeterEvents:Wc}),Core:$("core",{EventDestinations:Nc,Events:Ac})}),Ft=Object.freeze(Object.defineProperty({__proto__:null,Account:ha,AccountLinks:Dd,AccountSessions:Ld,Accounts:ha,ApplePayDomains:Ud,ApplicationFees:Bd,Apps:Hu,Balance:zd,BalanceTransactions:Wd,Billing:zu,BillingPortal:Wu,Charges:Vd,Checkout:Vu,Climate:Ku,ConfirmationTokens:Jd,CountrySpecs:Yd,Coupons:Qd,CreditNotes:Xd,CustomerSessions:eu,Customers:tu,Disputes:ru,Entitlements:Ju,EphemeralKeys:nu,Events:au,ExchangeRates:ou,FileLinks:su,Files:cu,FinancialConnections:Yu,Forwarding:Qu,Identity:Xu,InvoiceItems:du,InvoiceRenderingTemplates:uu,Invoices:hu,Issuing:Zu,Mandates:pu,OAuth:fu,PaymentIntents:yu,PaymentLinks:vu,PaymentMethodConfigurations:gu,PaymentMethodDomains:Pu,PaymentMethods:xu,Payouts:Tu,Plans:bu,Prices:_u,Products:wu,PromotionCodes:Su,Quotes:Eu,Radar:eh,Refunds:Ou,Reporting:th,Reviews:Nu,SetupAttempts:Cu,SetupIntents:$u,ShippingRates:Ru,Sigma:rh,Sources:Mu,SubscriptionItems:ju,SubscriptionSchedules:Iu,Subscriptions:ku,Tax:nh,TaxCodes:Gu,TaxIds:Fu,TaxRates:Du,Terminal:ah,TestHelpers:oh,Tokens:qu,Topups:Lu,Transfers:Uu,Treasury:sh,V2:ih,WebhookEndpoints:Bu},Symbol.toStringTag,{value:"Module"})),Ta="api.stripe.com",ba="443",_a="/v1/",wa=tc,Sa=8e4,Ea=5,Oa=.5,lh=["name","version","url","partner_id"],Na=["authenticator","apiVersion","typescript","maxNetworkRetries","httpAgent","httpClient","timeout","host","port","protocol","telemetry","appInfo","stripeAccount","stripeContext"],ch=t=>new it(t,s.MAX_BUFFERED_REQUEST_METRICS);function dh(t,e=ch){n.PACKAGE_VERSION="17.7.0",n.USER_AGENT=Object.assign({bindings_version:n.PACKAGE_VERSION,lang:"node",publisher:"stripe",uname:null,typescript:!1},Dl()),n.StripeResource=s,n.resources=Ft,n.HttpClient=z,n.HttpClientResponse=$a,n.CryptoProvider=Ra;function r(a=t){return Jn(a)}n.webhooks=Object.assign(r,Jn(t));function n(a,o={}){if(!(this instanceof n))return new n(a,o);const i=this._getPropsFromConfig(o);this._platformFunctions=t,Object.defineProperty(this,"_emitter",{value:this._platformFunctions.createEmitter(),enumerable:!1,configurable:!1,writable:!1}),this.VERSION=n.PACKAGE_VERSION,this.on=this._emitter.on.bind(this._emitter),this.once=this._emitter.once.bind(this._emitter),this.off=this._emitter.removeListener.bind(this._emitter);const h=i.httpAgent||null;this._api={host:i.host||Ta,port:i.port||ba,protocol:i.protocol||"https",basePath:_a,version:i.apiVersion||wa,timeout:wr("timeout",i.timeout,Sa),maxNetworkRetries:wr("maxNetworkRetries",i.maxNetworkRetries,2),agent:h,httpClient:i.httpClient||(h?this._platformFunctions.createNodeHttpClient(h):this._platformFunctions.createDefaultHttpClient()),dev:!1,stripeAccount:i.stripeAccount||null,stripeContext:i.stripeContext||null};const c=i.typescript||!1;c!==n.USER_AGENT.typescript&&(n.USER_AGENT.typescript=c),i.appInfo&&this._setAppInfo(i.appInfo),this._prepResources(),this._setAuthenticator(a,i.authenticator),this.errors=xn,this.webhooks=r(),this._prevRequestMetrics=[],this._enableTelemetry=i.telemetry!==!1,this._requestSender=e(this),this.StripeResource=n.StripeResource}return n.errors=xn,n.createNodeHttpClient=t.createNodeHttpClient,n.createFetchHttpClient=t.createFetchHttpClient,n.createNodeCryptoProvider=t.createNodeCryptoProvider,n.createSubtleCryptoProvider=t.createSubtleCryptoProvider,n.prototype={_appInfo:void 0,on:null,off:null,once:null,VERSION:null,StripeResource:null,webhooks:null,errors:null,_api:null,_prevRequestMetrics:null,_emitter:null,_enableTelemetry:null,_requestSender:null,_platformFunctions:null,rawRequest(a,o,i,h){return this._requestSender._rawRequest(a,o,i,h)},_setAuthenticator(a,o){if(a&&o)throw new Error("Can't specify both apiKey and authenticator");if(!a&&!o)throw new Error("Neither apiKey nor config.authenticator provided");this._authenticator=a?Qr(a):o},_setAppInfo(a){if(a&&typeof a!="object")throw new Error("AppInfo must be an object.");if(a&&!a.name)throw new Error("AppInfo.name is required");a=a||{},this._appInfo=lh.reduce((o,i)=>(typeof a[i]=="string"&&(o=o||{},o[i]=a[i]),o),void 0)},_setApiField(a,o){this._api[a]=o},getApiField(a){return this._api[a]},setClientId(a){this._clientId=a},getClientId(){return this._clientId},getConstant:a=>{switch(a){case"DEFAULT_HOST":return Ta;case"DEFAULT_PORT":return ba;case"DEFAULT_BASE_PATH":return _a;case"DEFAULT_API_VERSION":return wa;case"DEFAULT_TIMEOUT":return Sa;case"MAX_NETWORK_RETRY_DELAY_SEC":return Ea;case"INITIAL_NETWORK_RETRY_DELAY_SEC":return Oa}return n[a]},getMaxNetworkRetries(){return this.getApiField("maxNetworkRetries")},_setApiNumberField(a,o,i){const h=wr(a,o,i);this._setApiField(a,h)},getMaxNetworkRetryDelay(){return Ea},getInitialNetworkRetryDelay(){return Oa},getClientUserAgent(a){return this.getClientUserAgentSeeded(n.USER_AGENT,a)},getClientUserAgentSeeded(a,o){this._platformFunctions.getUname().then(i=>{var h;const c={};for(const d in a)Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=encodeURIComponent((h=a[d])!==null&&h!==void 0?h:"null"));c.uname=encodeURIComponent(i||"UNKNOWN");const p=this.getApiField("httpClient");p&&(c.httplib=encodeURIComponent(p.getClientName())),this._appInfo&&(c.application=this._appInfo),o(JSON.stringify(c))})},getAppInfoAsString(){if(!this._appInfo)return"";let a=this._appInfo.name;return this._appInfo.version&&(a+=`/${this._appInfo.version}`),this._appInfo.url&&(a+=` (${this._appInfo.url})`),a},getTelemetryEnabled(){return this._enableTelemetry},_prepResources(){for(const a in Ft)Object.prototype.hasOwnProperty.call(Ft,a)&&(this[kl(a)]=new Ft[a](this))},_getPropsFromConfig(a){if(!a)return{};const o=typeof a=="string";if(!(a===Object(a)&&!Array.isArray(a))&&!o)throw new Error("Config must either be an object or a string");if(o)return{apiVersion:a};if(Object.keys(a).filter(c=>!Na.includes(c)).length>0)throw new Error(`Config object may only contain the following: ${Na.join(", ")}`);return a},parseThinEvent(a,o,i,h,c,p){return this.webhooks.constructEvent(a,o,i,h,c,p)}},n}const uh=dh(new Do);var Xr={};const Q=To(Xr.SUPABASE_URL,Xr.SUPABASE_SERVICE_ROLE_KEY,{auth:{autoRefreshToken:!1,persistSession:!1}}),Dt=new uh(Xr.STRIPE_SECRET_KEY,{maxNetworkRetries:3}),qr={async validateInvitationToken(t){try{const{data:e,error:r}=await Q.from("restaurant_invitations").select("*").eq("token",t).single();if(r)return console.error("Error validating invitation token:",r),null;if(!e||e.status!=="pending")return null;const n=new Date,a=new Date(e.expires_at);return n>a?(await Q.from("restaurant_invitations").update({status:"expired",updated_at:new Date().toISOString()}).eq("token",t),null):e}catch(e){return console.error("Error in validateInvitationToken:",e),null}},async completeOnboarding(t,e,r,n){let a,o=[],i=!1;try{if(!await this.validateInvitationToken(t))return{success:!1,error:"Invalid or expired invitation token"};const{data:c,error:p}=await Q.from("restaurants").insert([{name:e.name,website:e.website||"",admin_email:e.admin_email,logo_url:e.logo_url||null,subscription_tier:n,created_at:new Date().toISOString(),registration_complete:!1}]).select().single();if(p||!c)return{success:!1,error:`Failed to create restaurant: ${p?.message||"Unknown error"}`};a=c.id,i=!0,o=await Promise.all(r.map(async u=>{const v=await Dt.products.create({name:`${c.name} - ${u.name} Membership`,description:u.description,metadata:{restaurant_id:a,restaurant_name:c.name,tier_type:u.name.toLowerCase().replace(/\s+/g,"_")}}),g=await Dt.prices.create({product:v.id,unit_amount:Math.round(parseFloat(u.price)*100),currency:"usd",recurring:{interval:"month"},metadata:{restaurant_id:a,tier_name:u.name}});return{productId:v.id,priceId:g.id,tier:u.name}}));const d=r.map((u,v)=>({name:u.name,price:u.price,description:u.description,restaurant_id:a,stripe_product_id:o[v].productId,stripe_price_id:o[v].priceId,created_at:new Date().toISOString()})),{error:m}=await Q.from("membership_tiers").insert(d);if(m)throw new Error(`Failed to store membership tiers: ${m.message}`);return await Q.from("restaurant_invitations").update({status:"completed",restaurant_id:a,updated_at:new Date().toISOString()}).eq("token",t),await Q.from("restaurants").update({registration_complete:!0,updated_at:new Date().toISOString()}).eq("id",a),{success:!0,restaurantId:a,stripeProductIds:o}}catch(h){return console.error("Error in completeOnboarding:",h),i&&await this.rollbackOnboarding(a,o),{success:!1,error:h.message||"An error occurred during onboarding"}}},async rollbackOnboarding(t,e){try{console.log("Rolling back onboarding due to error..."),await Q.from("membership_tiers").delete().eq("restaurant_id",t);for(const{priceId:r,productId:n}of e)try{await Dt.prices.update(r,{active:!1}),await Dt.products.update(n,{active:!1})}catch(a){console.error("Error deactivating Stripe resource:",a)}await Q.from("restaurants").delete().eq("id",t),console.log("Rollback completed successfully")}catch(r){console.error("Error during rollback:",r)}},async getBusinessPricingTiers(){return["NeighborhoodCellar","EstablishedShop","PremiumCollection","LuxuryVintage"]},validatePricingTier(t){return["NeighborhoodCellar","EstablishedShop","PremiumCollection","LuxuryVintage"].includes(t)},async getRestaurantById(t){const{data:e,error:r}=await Q.from("restaurants").select("*").eq("id",t).single();return r||!e?(console.error("Error fetching restaurant:",r),null):e},async getRestaurantMembershipTiers(t){const{data:e,error:r}=await Q.from("membership_tiers").select("*").eq("restaurant_id",t);return r?(console.error("Error fetching membership tiers:",r),[]):e||[]},getBusinessPricingTierInfo(t){const e={NeighborhoodCellar:{name:"Neighborhood Cellar",monthlyPrice:"199.00",description:"Perfect for smaller wine bars with limited selections"},EstablishedShop:{name:"Established Shop",monthlyPrice:"349.00",description:"For mid-size establishments with growing wine programs"},PremiumCollection:{name:"Premium Collection",monthlyPrice:"599.00",description:"For restaurants with extensive wine lists and sommelier services"},LuxuryVintage:{name:"Luxury Vintage",monthlyPrice:"999.00",description:"For high-end establishments with rare wines and collector selections"}};return e[t]||e.EstablishedShop}},go=({size:t="md",color:e="border-[#872657]",className:r=""})=>{const n={sm:"h-5 w-5 border-2",md:"h-8 w-8 border-2",lg:"h-12 w-12 border-3"}[t];return l.jsx("div",{className:`animate-spin rounded-full ${n} border-b-${e} ${r}`,role:"status","aria-label":"Loading"})},hh=({initialData:t,onSubmit:e,isSubmitting:r=!1,errors:n={},sessionId:a,tierInfo:o=null})=>{const[i,h]=N.useState(t),[c,p]=N.useState({});N.useEffect(()=>{h(t)},[t]),N.useEffect(()=>{p(n)},[n]);const d=f=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(f),m=f=>{const y=[];return f.length<8&&y.push("at least 8 characters"),/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/.test(f)||y.push("at least one special character"),/\d/.test(f)||y.push("at least one number"),/[A-Z]/.test(f)||y.push("at least one uppercase letter"),y},u=(f,y)=>{let P;switch(f){case"email":y&&!d(y)&&(P="Please enter a valid email address");break;case"password":if(y){const x=m(y);x.length>0&&(P=`Password must contain ${x.join(", ")}`)}break;case"confirmPassword":y!==i.password&&(P="Passwords do not match");break}return P},v=f=>{const{name:y,value:P}=f.target;h(b=>({...b,[y]:P})),c[y]&&p(b=>({...b,[y]:void 0}));const x=u(y,P);x&&p(b=>({...b,[y]:x}))},g=f=>{const y=f.target.files?.[0];if(!y)return;const P=["image/jpeg","image/png","image/webp"],x=5*1024*1024;if(!P.includes(y.type)){p({general:"Only JPG, PNG, and WEBP images are allowed"});return}if(y.size>x){p({general:"File size must be less than 5MB"});return}h({...i,logo:y})},T=f=>{f.preventDefault();let y=!0;const P={};if(i.restaurantName.trim()||(P.restaurantName="Restaurant name is required",y=!1),i.adminName.trim()||(P.adminName="Admin name is required",y=!1),i.email.trim()?d(i.email)||(P.email="Please enter a valid email address",y=!1):(P.email="Email is required",y=!1),!i.password)P.password="Password is required",y=!1;else{const x=m(i.password);x.length>0&&(P.password=`Password must contain ${x.join(", ")}`,y=!1)}i.password!==i.confirmPassword&&(P.confirmPassword="Passwords do not match",y=!1),p(P),y&&e({...i,sessionId:a})};return l.jsxs("form",{onSubmit:T,className:"space-y-8 md:space-y-10",children:[c.general&&l.jsx("div",{className:"p-4 bg-red-100 text-red-700 rounded-md border border-red-200",children:c.general}),o&&l.jsxs("div",{className:"mb-6 p-6 rounded-xl border border-[#872657] bg-gradient-to-br from-[#fff8f8] to-[#fff]",children:[l.jsxs("h3",{className:"text-xl font-bold mb-3 text-[#872657]",style:{fontFamily:"HV Florentino"},children:[o.name," Plan"]}),l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("p",{className:"text-2xl font-bold text-[#872657]",style:{fontFamily:"TayBasal"},children:["$",parseFloat(o.monthlyPrice).toFixed(2),l.jsx("span",{className:"text-sm text-gray-600 ml-1",children:"/month"})]}),l.jsx("div",{className:"px-3 py-1 bg-[#872657] bg-opacity-10 rounded-full text-[#872657] text-sm font-medium",children:"Selected Plan"})]}),l.jsx("p",{className:"text-gray-700",style:{fontFamily:"TayBasal"},children:o.description}),l.jsxs("div",{className:"mt-4 pt-4 border-t border-[#872657] border-opacity-20",children:[l.jsxs("h4",{className:"text-sm font-medium mb-2 text-gray-700",children:["Included with ",o.name,":"]}),l.jsxs("ul",{className:"space-y-2",children:[l.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[l.jsx("div",{className:"w-5 h-5 rounded-full bg-green-100 flex items-center justify-center mr-2",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3 h-3 text-green-600",children:l.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),"Personalized wine recommendations"]}),l.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[l.jsx("div",{className:"w-5 h-5 rounded-full bg-green-100 flex items-center justify-center mr-2",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3 h-3 text-green-600",children:l.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),"Membership tier management"]}),l.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[l.jsx("div",{className:"w-5 h-5 rounded-full bg-green-100 flex items-center justify-center mr-2",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3 h-3 text-green-600",children:l.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),"Customer accounts & profile data"]})]})]})]}),l.jsxs("div",{className:"space-y-6 md:space-y-8",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Restaurant Name *"}),l.jsx("input",{type:"text",name:"restaurantName",value:i.restaurantName,onChange:v,required:!0,className:`w-full px-4 py-2 border ${c.restaurantName?"border-red-500":"border-gray-300"} rounded-md focus:ring-2 focus:ring-[#872657]`}),c.restaurantName&&l.jsx("p",{className:"mt-1 text-sm text-red-500",children:c.restaurantName})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Name *"}),l.jsx("input",{type:"text",name:"adminName",value:i.adminName,onChange:v,required:!0,placeholder:"Your full name",className:`w-full px-4 py-2 border ${c.adminName?"border-red-500":"border-gray-300"} rounded-md focus:ring-2 focus:ring-[#872657]`}),c.adminName&&l.jsx("p",{className:"mt-1 text-sm text-red-500",children:c.adminName})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),l.jsx("input",{type:"email",name:"email",value:i.email,onChange:v,required:!0,placeholder:"admin@yourrestaurant.com",className:`w-full px-4 py-2 border ${c.email?"border-red-500":"border-gray-300"} rounded-md focus:ring-2 focus:ring-[#872657]`}),c.email&&l.jsx("p",{className:"mt-1 text-sm text-red-500",children:c.email})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),l.jsx("input",{type:"url",name:"website",value:i.website||"",onChange:v,placeholder:"https://www.yourrestaurant.com",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#872657]"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo"}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("label",{className:"cursor-pointer bg-[#2A3D45] text-white px-4 py-2 rounded-md hover:bg-opacity-90",children:[l.jsx(jo,{className:"inline-block w-5 h-5 mr-2"}),"Upload Logo",l.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:g})]}),i.logo&&l.jsxs("span",{className:"text-sm text-gray-600",children:["File selected: ",i.logo.name]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),l.jsx("input",{type:"password",name:"password",value:i.password,onChange:v,required:!0,placeholder:"At least 8 characters",className:`w-full px-4 py-2 border ${c.password?"border-red-500":"border-gray-300"} rounded-md focus:ring-2 focus:ring-[#872657]`}),c.password&&l.jsx("p",{className:"mt-1 text-sm text-red-500",children:c.password})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password *"}),l.jsx("input",{type:"password",name:"confirmPassword",value:i.confirmPassword,onChange:v,required:!0,placeholder:"Confirm your password",className:`w-full px-4 py-2 border ${c.confirmPassword?"border-red-500":"border-gray-300"} rounded-md focus:ring-2 focus:ring-[#872657]`}),c.confirmPassword&&l.jsx("p",{className:"mt-1 text-sm text-red-500",children:c.confirmPassword})]})]}),l.jsx("button",{type:"submit",disabled:r,className:`w-full md:w-auto md:px-12 mt-8 bg-[#872657] text-white py-4 rounded-md hover:bg-opacity-90 font-bold text-lg flex items-center justify-center ${r?"opacity-70 cursor-not-allowed":""}`,children:r?l.jsxs(l.Fragment,{children:[l.jsx(go,{size:"sm",className:"mr-2"}),"Processing..."]}):"Continue"})]})},mh=({isOpen:t,onClose:e,onSave:r,initialData:n,isEditing:a,restaurantId:o})=>{const[i,h]=N.useState(n),[c,p]=N.useState({}),[d,m]=N.useState(!1);N.useEffect(()=>{t&&(h(n),p({}))},[t,n]);const u=T=>{const{name:f,value:y}=T.target;h(P=>({...P,[f]:y})),c[f]&&p(P=>({...P,[f]:void 0}))},v=()=>{const T={};if(i.name.trim()||(T.name="Name is required"),!i.price)T.price="Price is required";else{const f=parseFloat(i.price);(isNaN(f)||f<=0)&&(T.price="Price must be a positive number")}return p(T),Object.keys(T).length===0},g=async T=>{if(T.preventDefault(),!!v()){m(!0),p({});try{if(!o){!a&&!i.id&&(i.id=crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).substring(2,15)),r(i),e();return}const f=await fetch("/api/membership-tiers",{method:a?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:a?i.id:void 0,name:i.name,price:i.price,description:i.description,restaurant_id:o,stripe_price_id:i.stripe_price_id,stripe_product_id:i.stripe_product_id})});if(!f.ok){const P=await f.json();throw new Error(P.error||"Failed to save membership tier")}const y=await f.json();y.warning&&console.warn("Stripe warning:",y.warning),r(y),e()}catch(f){console.error("Error saving tier:",f),p({general:f instanceof Error?f.message:"An unknown error occurred"})}finally{m(!1)}}};return t?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 bg-gray-50",children:[l.jsx("h2",{className:"text-xl font-bold text-[#800020]",style:{fontFamily:"HV Florentino"},children:a?"Edit Membership Tier":"Add Membership Tier"}),l.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 transition-colors duration-200",disabled:d,children:l.jsx(bo,{className:"w-6 h-6"})})]}),l.jsxs("form",{onSubmit:g,className:"p-6 space-y-5",children:[c.general&&l.jsx("div",{className:"p-4 bg-red-100 text-red-700 rounded-xl border border-red-200 mb-4",children:c.general}),l.jsxs("div",{children:[l.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",style:{fontFamily:"TayBasal"},children:[l.jsx(Me,{className:"w-4 h-4 mr-2 text-[#800020]"}),"Tier Name *"]}),l.jsx("input",{type:"text",name:"name",value:i.name,onChange:u,className:`w-full px-4 py-3 border ${c.name?"border-red-500":"border-gray-300"} rounded-xl focus:ring-2 focus:ring-[#800020] focus:border-transparent transition-all duration-200`,placeholder:"e.g., Bronze, Silver, Gold",disabled:d,required:!0}),c.name&&l.jsx("p",{className:"mt-1 text-sm text-red-500",children:c.name})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",style:{fontFamily:"TayBasal"},children:[l.jsx(Ca,{className:"w-4 h-4 mr-2 text-[#800020]"}),"Monthly Price ($) *"]}),l.jsx("input",{type:"number",name:"price",value:i.price,onChange:u,className:`w-full px-4 py-3 border ${c.price?"border-red-500":"border-gray-300"} rounded-xl focus:ring-2 focus:ring-[#800020] focus:border-transparent transition-all duration-200`,placeholder:"e.g., 29.99",step:"0.01",min:"0.01",disabled:d,required:!0}),c.price&&l.jsx("p",{className:"mt-1 text-sm text-red-500",children:c.price})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",style:{fontFamily:"TayBasal"},children:[l.jsx(_o,{className:"w-4 h-4 mr-2 text-[#800020]"}),"Description"]}),l.jsx("textarea",{name:"description",value:i.description,onChange:u,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#800020] focus:border-transparent transition-all duration-200",placeholder:"Describe what members get with this tier...",rows:3,disabled:d,style:{fontFamily:"Libre Baskerville"}})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx("button",{type:"button",onClick:e,className:"px-5 py-2.5 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition-colors duration-200",disabled:d,style:{fontFamily:"TayBasal"},children:"Cancel"}),l.jsx("button",{type:"submit",className:"px-5 py-2.5 bg-[#800020] text-white rounded-xl hover:bg-opacity-90 transition-all duration-200 flex items-center",disabled:d,style:{fontFamily:"TayBasal"},children:d?l.jsxs(l.Fragment,{children:[l.jsx(Aa,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):"Save Tier"})]})]})]})}):null},Lr=[{icon:l.jsx(Me,{className:"w-6 h-6"}),color:"#800020"},{icon:l.jsx(Mo,{className:"w-6 h-6"}),color:"#AA7F39"},{icon:l.jsx(So,{className:"w-6 h-6"}),color:"#2F4858"},{icon:l.jsx(Eo,{className:"w-6 h-6"}),color:"#5E2750"},{icon:l.jsx(Oo,{className:"w-6 h-6"}),color:"#2A3D45"}],ph=({tiers:t,restaurantId:e,onTierAdded:r,onTierUpdated:n,onTierDeleted:a,minTiersRequired:o=1,error:i})=>{const[h,c]=N.useState(!1),[p,d]=N.useState({id:"",name:"",price:"",description:""}),[m,u]=N.useState(!1),v=()=>{d({id:"",name:"",price:"",description:""}),u(!1),c(!0)},g=P=>{d(P),u(!0),c(!0)},T=P=>{m?n(P):r(P),c(!1)},f=P=>{t.length<=o?confirm(`You must have at least ${o} membership tier(s). Replace this tier with a new one?`)&&(d({id:"",name:"",price:"",description:""}),u(!1),c(!0)):confirm(`Are you sure you want to delete the "${P.name}" tier?`)&&a(P.id)},y=P=>P<Lr.length?Lr[P]:Lr[0];return l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold mt-8 mb-10 text-[#800020]",style:{fontFamily:"HV Florentino"},children:"Membership Tiers"}),l.jsx("p",{className:"mb-8 text-gray-700",style:{fontFamily:"Libre Baskerville"},children:"Define 1-3 membership tiers that your guests can subscribe to. Each tier should have a unique name, price, and description of benefits."}),i&&l.jsx("div",{className:"p-5 bg-red-100 text-red-700 rounded-xl border border-red-200 mb-8",children:i}),t.length>0?l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.map((P,x)=>{const b=y(x);return l.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-100 hover:shadow-lg transition-all duration-300",style:{minHeight:"260px"},children:[l.jsxs("div",{className:"p-5 text-white flex justify-between items-center",style:{backgroundColor:b.color},children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-white bg-opacity-20 flex items-center justify-center mr-3",children:b.icon}),l.jsx("h3",{className:"font-bold text-xl",style:{fontFamily:"HV Florentino"},children:P.name})]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{type:"button",onClick:()=>g(P),className:"p-2 bg-white bg-opacity-20 rounded-full hover:bg-opacity-30 transition-all duration-200","aria-label":`Edit ${P.name}`,children:l.jsx(Ro,{className:"w-4 h-4 text-white"})}),l.jsx("button",{type:"button",onClick:()=>f(P),className:"p-2 bg-white bg-opacity-20 rounded-full hover:bg-opacity-30 transition-all duration-200","aria-label":`Delete ${P.name}`,children:l.jsx(wo,{className:"w-4 h-4 text-white"})})]})]}),l.jsx("div",{className:"px-5 py-4 bg-gray-50 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(Ca,{className:"w-5 h-5 text-gray-500 mr-2"}),l.jsxs("span",{className:"text-2xl font-bold text-gray-800",style:{fontFamily:"TayBasal"},children:["$",parseFloat(P.price).toFixed(2)]}),l.jsx("span",{className:"text-gray-500 ml-1",style:{fontFamily:"TayBasal"},children:"/month"})]})}),l.jsx("div",{className:"p-5",children:l.jsx("p",{className:"text-gray-700 text-sm",style:{fontFamily:"Libre Baskerville"},children:P.description||"No description provided."})})]},P.id)}),t.length<3&&l.jsxs("div",{onClick:v,className:"bg-white rounded-xl border-2 border-dashed border-gray-300 flex flex-col items-center justify-center p-8 cursor-pointer hover:border-[#800020] hover:bg-gray-50 transition-all duration-300",style:{minHeight:"260px"},children:[l.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-6",children:l.jsx(gn,{className:"w-8 h-8 text-gray-400"})}),l.jsx("p",{className:"text-gray-500 font-medium text-center",style:{fontFamily:"TayBasal"},children:"Add Another Tier"}),l.jsx("p",{className:"text-xs text-gray-400 text-center mt-2",style:{fontFamily:"Libre Baskerville"},children:t.length===0?"Add your first membership tier":"You can add up to 3 tiers"})]})]}):l.jsxs("div",{onClick:v,className:"bg-white rounded-xl border-2 border-dashed border-gray-300 flex flex-col items-center justify-center p-12 cursor-pointer hover:border-[#800020] hover:bg-gray-50 transition-all duration-300",style:{minHeight:"260px"},children:[l.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-100 flex items-center justify-center mb-8",children:l.jsx(gn,{className:"w-10 h-10 text-gray-400"})}),l.jsx("h3",{className:"text-xl font-medium text-gray-700 mb-3",style:{fontFamily:"HV Florentino"},children:"Create Your First Tier"}),l.jsx("p",{className:"text-gray-500 text-center max-w-md",style:{fontFamily:"Libre Baskerville"},children:"Define at least one membership tier with a name, price, and description"})]}),l.jsx(mh,{isOpen:h,onClose:()=>c(!1),onSave:T,initialData:p,isEditing:m,restaurantId:e})]})},fh=({initialStep:t=1,initialRestaurantData:e={restaurantName:"",adminName:"",email:"",website:"",logo:null,password:"",confirmPassword:""},initialTiers:r=[],onComplete:n,isSubmitting:a=!1,sessionId:o,errors:i={},restaurantId:h})=>{const[c,p]=N.useState(t),[d,m]=N.useState(e),[u,v]=N.useState(r),g=w=>{m(w),p(2)},T=w=>{v([...u,w])},f=w=>{v(u.map(q=>q.id===w.id?w:q))},y=w=>{v(u.filter(q=>q.id!==w))},P=()=>{u.length!==0&&n({restaurant:d,tiers:u,restaurantId:h})},x=()=>l.jsx("div",{className:"mb-12",children:l.jsxs("div",{className:"flex items-center justify-between max-w-3xl mx-auto overflow-x-auto px-4 md:px-0",children:[l.jsxs("div",{className:`flex flex-col items-center flex-shrink-0 ${c>=1?"text-[#872657]":"text-gray-400"}`,children:[l.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center border-2 transition-all duration-300 ${c>=1?"border-[#872657] bg-[#872657] text-white":"border-gray-300 text-gray-400"}`,children:c>1?l.jsx(Ur,{className:"w-7 h-7"}):l.jsx(vn,{className:"w-7 h-7"})}),l.jsx("span",{className:"mt-3 text-sm font-medium",style:{fontFamily:"TayBasal"},children:"Restaurant Info"})]}),l.jsx("div",{className:`flex-1 h-1 mx-4 transition-all duration-300 min-w-[2rem] ${c>=2?"bg-[#872657]":"bg-gray-300"}`}),l.jsxs("div",{className:`flex flex-col items-center flex-shrink-0 ${c>=2?"text-[#872657]":"text-gray-400"}`,children:[l.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center border-2 transition-all duration-300 ${c>=2?"border-[#872657] bg-[#872657] text-white":"border-gray-300 text-gray-400"}`,children:c>2?l.jsx(Ur,{className:"w-7 h-7"}):l.jsx(Me,{className:"w-7 h-7"})}),l.jsx("span",{className:"mt-3 text-sm font-medium",style:{fontFamily:"TayBasal"},children:"Membership Tiers"})]}),l.jsx("div",{className:`flex-1 h-1 mx-4 transition-all duration-300 min-w-[2rem] ${c>=3?"bg-[#872657]":"bg-gray-300"}`}),l.jsxs("div",{className:`flex flex-col items-center flex-shrink-0 ${c>=3?"text-[#872657]":"text-gray-400"}`,children:[l.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center border-2 transition-all duration-300 ${c>=3?"border-[#872657] bg-[#872657] text-white":"border-gray-300 text-gray-400"}`,children:l.jsx($o,{className:"w-7 h-7"})}),l.jsx("span",{className:"mt-3 text-sm font-medium",style:{fontFamily:"TayBasal"},children:"Review & Submit"})]})]})});let b;switch(c){case 1:b=l.jsxs("div",{className:"bg-white p-8 md:p-10 rounded-2xl shadow-lg border border-gray-200 transition-all duration-300 transform",children:[l.jsx("h2",{className:"text-2xl font-bold mt-8 mb-10 text-[#872657]",style:{fontFamily:"HV Florentino"},children:"Restaurant Details"}),l.jsx(hh,{initialData:d,onSubmit:g,errors:i?.restaurant,sessionId:o,tierInfo:e.pricingTierInfo})]});break;case 2:b=l.jsxs("div",{className:"bg-white p-8 md:p-10 rounded-2xl shadow-lg border border-gray-200 transition-all duration-300 transform",children:[l.jsx(ph,{tiers:u,restaurantId:h,onTierAdded:T,onTierUpdated:f,onTierDeleted:y,error:i?.tiers}),l.jsxs("div",{className:"mt-10 flex flex-col sm:flex-row gap-4 sm:gap-6",children:[l.jsx("button",{type:"button",onClick:()=>p(1),className:"flex-1 py-4 px-6 bg-gray-100 text-gray-800 rounded-xl hover:bg-gray-200 transition-colors duration-300",style:{fontFamily:"TayBasal"},children:"Back"}),l.jsx("button",{type:"button",onClick:()=>p(3),disabled:u.length===0,className:`flex-1 py-4 px-6 bg-[#800020] text-white rounded-xl hover:bg-opacity-90 font-bold transition-all duration-300 ${u.length===0?"opacity-50 cursor-not-allowed":""}`,style:{fontFamily:"TayBasal"},children:"Continue"})]})]});break;case 3:b=l.jsxs("div",{className:"bg-white p-8 md:p-10 rounded-2xl shadow-lg border border-gray-200 transition-all duration-300 transform",children:[l.jsx("h2",{className:"text-2xl font-bold mt-8 mb-10 text-[#800020]",style:{fontFamily:"HV Florentino"},children:"Review Your Registration"}),i?.general&&l.jsx("div",{className:"mb-8 p-4 bg-red-100 text-red-700 rounded-xl border border-red-200",children:i.general}),l.jsxs("div",{className:"mb-12 space-y-10",children:[l.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 md:p-8 shadow-sm border border-gray-100",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-6 flex items-center text-[#800020]",style:{fontFamily:"HV Florentino"},children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-[#800020] text-white flex items-center justify-center mr-3 text-sm",children:l.jsx(vn,{className:"w-5 h-5"})}),"Restaurant Information"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-2",style:{fontFamily:"TayBasal"},children:"Restaurant Name"}),l.jsx("p",{className:"font-medium",style:{fontFamily:"Libre Baskerville"},children:d.restaurantName})]}),l.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-2",style:{fontFamily:"TayBasal"},children:"Admin Name"}),l.jsx("p",{className:"font-medium",style:{fontFamily:"Libre Baskerville"},children:d.adminName})]}),l.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-2",style:{fontFamily:"TayBasal"},children:"Email"}),l.jsx("p",{className:"font-medium",style:{fontFamily:"Libre Baskerville"},children:d.email})]}),d.website&&l.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-2",style:{fontFamily:"TayBasal"},children:"Website"}),l.jsx("p",{className:"font-medium",style:{fontFamily:"Libre Baskerville"},children:d.website})]}),d.logo&&l.jsxs("div",{className:"col-span-2 bg-white p-5 rounded-lg shadow-sm",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-2",style:{fontFamily:"TayBasal"},children:"Logo"}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-14 h-14 bg-gray-200 rounded-md flex items-center justify-center mr-3",children:l.jsx("img",{src:URL.createObjectURL(d.logo),alt:"Logo Preview",className:"max-w-full max-h-full object-contain rounded-md"})}),l.jsx("p",{className:"font-medium",style:{fontFamily:"Libre Baskerville"},children:d.logo.name})]})]})]})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 md:p-8 shadow-sm border border-gray-100",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-6 flex items-center text-[#800020]",style:{fontFamily:"HV Florentino"},children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-[#800020] text-white flex items-center justify-center mr-3 text-sm",children:l.jsx(Me,{className:"w-5 h-5"})}),"Membership Tiers"]}),u.length>0?l.jsx("div",{className:"space-y-5",children:u.map((w,q)=>l.jsx("div",{className:"p-5 bg-white rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow duration-300",children:l.jsxs("div",{className:"flex justify-between items-start sm:items-center flex-col sm:flex-row gap-4 sm:gap-0",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-[#800020] text-lg",style:{fontFamily:"HV Florentino"},children:w.name}),l.jsxs("p",{className:"text-gray-800 font-bold text-xl mt-2",style:{fontFamily:"TayBasal"},children:["$",parseFloat(w.price).toFixed(2),"/month"]}),l.jsx("p",{className:"text-sm text-gray-600 mt-4",style:{fontFamily:"Libre Baskerville"},children:w.description})]}),l.jsx("div",{className:"w-14 h-14 rounded-full bg-[#800020] bg-opacity-10 flex items-center justify-center self-end sm:self-auto",children:l.jsx(Me,{className:"w-7 h-7 text-[#800020]"})})]})},w.id))}):l.jsx("p",{className:"text-red-500 p-5 bg-red-50 rounded-lg border border-red-100",style:{fontFamily:"Libre Baskerville"},children:"No membership tiers added. Please go back and add at least one tier."})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-6",children:[l.jsx("button",{type:"button",onClick:()=>p(2),className:"flex-1 py-4 px-6 bg-gray-100 text-gray-800 rounded-xl hover:bg-gray-200 transition-colors duration-300",style:{fontFamily:"TayBasal"},children:"Back"}),l.jsx("button",{type:"button",onClick:P,disabled:a||u.length===0,className:`flex-1 py-4 px-6 bg-[#800020] text-white rounded-xl hover:bg-opacity-90 font-bold transition-all duration-300 ${a||u.length===0?"opacity-70 cursor-not-allowed":""}`,style:{fontFamily:"TayBasal"},children:a?l.jsxs("div",{className:"flex items-center justify-center",children:[l.jsx(go,{size:"sm",className:"mr-2"}),"Processing..."]}):"Complete Registration"})]}),l.jsx("div",{className:"mt-8 text-center",children:l.jsxs("p",{className:"text-xs text-gray-500",style:{fontFamily:"Libre Baskerville"},children:["By completing registration, you agree to Club Cuvee's ",l.jsx("a",{href:"/terms",className:"text-[#800020] hover:underline",children:"Terms of Service"})," and ",l.jsx("a",{href:"/privacy",className:"text-[#800020] hover:underline",children:"Privacy Policy"})]})}),l.jsxs("p",{className:"text-sm text-gray-500 mt-4 text-center",children:["Didn't mean to register? ",l.jsx("a",{href:"mailto:support@clubcuvee.com",className:"text-[#800020] underline",children:"Contact support"})]})]});break;default:b=null}return l.jsxs("div",{className:"max-w-7xl w-full mx-auto",children:[x(),l.jsx("div",{className:"transition-all duration-500 ease-in-out transform",children:b})]})},vh=()=>{const{restaurantRef:t}=No(),e=Ao(),r=Co(),n=new URLSearchParams(r.search),a=n.get("session_id"),o=n.get("status"),i=n.get("tier")||"EstablishedShop",[h,c]=N.useState(!0),[p,d]=N.useState(!1),[m,u]=N.useState(1),[v,g]=N.useState(!1),[T,f]=N.useState({}),[y,P]=N.useState(null),[x,b]=N.useState({restaurantName:"",adminName:"",email:"",website:"",logo:null,password:"",confirmPassword:""}),[w,q]=N.useState([]),[R,L]=N.useState(""),[H,M]=N.useState(!0);N.useEffect(()=>{(async()=>{try{if(c(!0),!qr.validatePricingTier(i)){f({general:"Invalid pricing tier specified. Please use a valid tier or contact support."}),c(!1);return}const O=qr.getBusinessPricingTierInfo(i);if(P(O),a&&o==="success"&&M(!0),t){const S=await ht.getInvitationByToken(t);if(S){if(S.status==="expired"){f({general:"This invitation link has expired. Please request a new invitation."}),c(!1);return}if(b({restaurantName:S.restaurant_name,adminName:S.admin_name||"",email:S.email,website:S.website||"",password:"",confirmPassword:"",tier:S.tier,invitationToken:S.token,pricingTier:i}),(S.status==="paid"||S.payment_session_id)&&M(!0),S.restaurant_id){L(S.restaurant_id),u(2);try{const C=await Pn.getMembershipTiersByRestaurant(S.restaurant_id);C&&C.length>0&&q(C)}catch(C){console.error("Error fetching existing tiers:",C)}}S.status==="pending"&&await ht.updateInvitationStatus(S.token,"accepted")}else f({general:"Invalid invitation token. Please check your invitation email or contact support."})}else f({general:"No invitation token provided. Please use the link from your invitation email."})}catch(O){console.error("Error checking registration status:",O),f({general:"Error loading registration data. Please try again or contact support."})}finally{c(!1)}})()},[t,a,o,i]);const te=async A=>{g(!0),f({});try{if(!R&&A.restaurant.invitationToken){const O={name:A.restaurant.restaurantName,website:A.restaurant.website,admin_email:A.restaurant.email,logo_url:A.restaurant.logo?URL.createObjectURL(A.restaurant.logo):void 0},S=A.tiers.map(ce=>({name:ce.name,price:ce.price,description:ce.description})),C=await qr.completeOnboarding(A.restaurant.invitationToken,O,S,i);if(!C.success)throw new Error(C.error||"Failed to complete onboarding");L(C.restaurantId);const{error:k}=await U.auth.signUp({email:A.restaurant.email,password:A.restaurant.password,options:{data:{restaurant_id:C.restaurantId,full_name:A.restaurant.adminName,role:"restaurant_admin"}}});k&&console.error("Error creating user account:",k),d(!0)}else{const O=A.restaurantId||R;if(!O)throw new Error("Missing restaurant ID");const S=A.tiers.map(async k=>k.id&&k.stripe_product_id&&k.stripe_price_id&&k.restaurant_id===O?k:await Pn.createMembershipTier({name:k.name,price:k.price,description:k.description,stripe_product_id:k.stripe_product_id,stripe_price_id:k.stripe_price_id},O));await Promise.all(S),await ht.updateRestaurant(O,{registration_complete:!0,updated_at:new Date().toISOString()}),x.invitationToken&&await ht.updateInvitationStatus(x.invitationToken,"completed",O);const{error:C}=await U.auth.signUp({email:A.restaurant.email,password:A.restaurant.password,options:{data:{restaurant_id:O,full_name:A.restaurant.adminName,role:"restaurant_admin"}}});C&&console.error("Error creating user account:",C),d(!0)}}catch(O){console.error("Error completing registration:",O),f({general:O.message||"Failed to complete registration"})}finally{g(!1)}};return h?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#fdfaf7] px-6 md:px-10 py-10 md:py-20 overflow-x-hidden",children:l.jsxs("div",{className:"text-center max-w-7xl w-full mx-auto p-8",children:[l.jsx(Aa,{className:"h-12 w-12 animate-spin text-[#872657] mx-auto mb-6"}),l.jsx("p",{className:"text-gray-600 text-lg",style:{fontFamily:"TayBasal"},children:"Loading your restaurant registration..."})]})}):p?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#fdfaf7] px-6 md:px-10 py-10 md:py-20 overflow-x-hidden",children:l.jsx("div",{className:"w-full max-w-7xl mx-auto",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 md:p-10 text-center",children:[l.jsx("div",{className:"mb-8 p-4 bg-green-100 rounded-full inline-flex items-center justify-center",children:l.jsx(Ur,{className:"w-16 h-16 text-green-500"})}),l.jsx("h1",{className:"text-3xl font-bold mb-6 text-[#872657]",style:{fontFamily:"HV Florentino"},children:"You're All Set!"}),l.jsx("p",{className:"mb-8 text-gray-700 text-lg",style:{fontFamily:"TayBasal"},children:"Your restaurant has been registered with Club Cuvee and your membership tiers are ready. You can now access your dashboard to manage your wine club."}),l.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-center space-y-4 sm:space-y-0 sm:space-x-4",children:[l.jsx("button",{onClick:()=>e("/dashboard"),className:"w-full sm:w-auto sm:px-8 bg-[#872657] text-white py-4 rounded-lg hover:bg-opacity-90 font-bold transition-all duration-300",style:{fontFamily:"TayBasal"},children:"Go to Dashboard"}),l.jsx("button",{onClick:()=>e("/preview-wine-club"),className:"w-full sm:w-auto sm:px-8 bg-white border border-[#872657] text-[#872657] py-4 rounded-lg hover:bg-gray-50 font-bold transition-all duration-300",style:{fontFamily:"TayBasal"},children:"Preview Your Wine Club"})]}),l.jsxs("p",{className:"text-sm text-gray-500 mt-4",children:["Didn't mean to register? ",l.jsx("a",{href:"mailto:support@clubcuvee.com",className:"text-[#800020] underline",children:"Contact support"})]})]})})}):T.general&&!R?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#fdfaf7] px-6 md:px-10 py-10 md:py-20 overflow-x-hidden",children:l.jsx("div",{className:"w-full max-w-7xl mx-auto",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 md:p-10 text-center",children:[l.jsx("div",{className:"mb-8 p-4 bg-red-100 rounded-full inline-flex items-center justify-center",children:l.jsx(Me,{className:"w-16 h-16 text-red-500"})}),l.jsx("h1",{className:"text-3xl font-bold mb-6 text-[#872657]",style:{fontFamily:"HV Florentino"},children:"Invitation Error"}),l.jsx("p",{className:"mb-4 text-gray-700 text-lg",style:{fontFamily:"TayBasal"},children:T.general}),l.jsx("p",{className:"text-sm text-gray-500 mb-8",style:{fontFamily:"TayBasal"},children:"Please check your email for a valid invitation or contact support for assistance."}),l.jsx("button",{onClick:()=>window.location.href="https://clubcuvee.com/contact",className:"w-full sm:w-auto sm:px-8 bg-[#872657] text-white py-4 rounded-lg hover:bg-opacity-90 font-bold mx-auto transition-all duration-300",style:{fontFamily:"TayBasal"},children:"Contact Support"}),l.jsxs("p",{className:"text-sm text-gray-500 mt-4",children:["Didn't mean to register? ",l.jsx("a",{href:"mailto:support@clubcuvee.com",className:"text-[#800020] underline",children:"Contact support"})]})]})})}):l.jsx("div",{className:"min-h-screen bg-[#fdfaf7] px-6 md:px-10 py-10 md:py-20 overflow-x-hidden",children:l.jsxs("div",{className:"max-w-7xl w-full mx-auto",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-[#872657] mb-6",style:{fontFamily:"HV Florentino"},children:"Welcome to Club Cuvee"}),l.jsx("p",{className:"text-xl text-gray-600",style:{fontFamily:"TayBasal"},children:"Set up your custom wine club and start offering personalized wine memberships to your guests"})]}),l.jsx(fh,{initialStep:m,initialRestaurantData:{...x,pricingTierInfo:y||void 0},initialTiers:w,onComplete:te,isSubmitting:v,sessionId:a||void 0,errors:T,restaurantId:R})]})})};export{vh as RestaurantOnboarding,vh as default};
//# sourceMappingURL=_restaurantRef_-DR4ohNIs.js.map

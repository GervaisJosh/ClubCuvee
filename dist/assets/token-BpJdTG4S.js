import{u as g,a as f,r as d,j as e}from"./index-SNaHzofs.js";const y=[{id:"basic",name:"Basic",description:"Perfect for small restaurants",price:99,features:["Up to 100 wine selections","Basic analytics","Email support","Monthly reports"]},{id:"premium",name:"Premium",description:"For growing restaurants",price:199,features:["Up to 500 wine selections","Advanced analytics","Priority support","Weekly reports","Custom branding","API access"]},{id:"enterprise",name:"Enterprise",description:"For large establishments",price:499,features:["Unlimited wine selections","Enterprise analytics","24/7 support","Real-time reports","Custom branding","API access","Dedicated account manager","Custom integrations"]}];class x extends Error{constructor(u,n,i){super(n),this.statusCode=u,this.code=i,this.name="APIError"}}function j(){const{token:t}=g(),u=f(),[n,i]=d.useState(!0),[p,o]=d.useState(null),[l,c]=d.useState({restaurantName:"",email:"",membershipTier:"basic"});d.useEffect(()=>{(async()=>{if(!t){o("Invalid invite token"),i(!1);return}try{const s=await fetch(`/api/restaurant-invite?token=${t}`);if(!s.ok){const a=await s.json();throw new x(s.status,a.error.message,a.error.code)}const m=await s.json();c(a=>({...a,restaurantName:m.restaurantName,email:m.email}))}catch(s){o(s instanceof Error?s.message:"Failed to validate invite")}finally{i(!1)}})()},[t]);const h=async r=>{if(r.preventDefault(),!t){o("Invalid invite token");return}i(!0),o(null);try{const s=await fetch("/api/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,membershipTier:l.membershipTier})});if(!s.ok){const a=await s.json();throw new x(s.status,a.error.message,a.error.code)}const{url:m}=await s.json();window.location.href=m}catch(s){o(s instanceof Error?s.message:"Failed to create checkout session"),i(!1)}};return n?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):p?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full p-6 bg-white rounded-lg shadow-lg",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error"}),e.jsx("p",{className:"text-gray-600",children:p}),e.jsx("button",{onClick:()=>u("/"),className:"mt-4 px-4 py-2 bg-primary text-white rounded hover:bg-primary-dark",children:"Return Home"})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Welcome to Club Cuvee"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Complete your restaurant's onboarding to get started"})]}),e.jsxs("form",{onSubmit:h,className:"space-y-8",children:[e.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"restaurantName",className:"block text-sm font-medium text-gray-700",children:"Restaurant Name"}),e.jsx("input",{id:"restaurantName",type:"text",value:l.restaurantName,onChange:r=>c(s=>({...s,restaurantName:r.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{id:"email",type:"email",value:l.email,onChange:r=>c(s=>({...s,email:r.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary",required:!0})]})]})}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Choose Your Plan"}),e.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-3",children:y.map(r=>e.jsxs("div",{className:`relative rounded-lg border p-6 cursor-pointer ${l.membershipTier===r.id?"border-primary ring-2 ring-primary":"border-gray-300"}`,onClick:()=>c(s=>({...s,membershipTier:r.id})),children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r.name}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:r.description}),e.jsxs("p",{className:"mt-4",children:[e.jsxs("span",{className:"text-4xl font-bold text-gray-900",children:["$",r.price]}),e.jsx("span",{className:"text-base font-medium text-gray-500",children:"/month"})]}),e.jsx("ul",{className:"mt-6 space-y-4",children:r.features.map(s=>e.jsxs("li",{className:"flex items-start",children:[e.jsx("svg",{className:"h-5 w-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{className:"ml-3 text-sm text-gray-700",children:s})]},s))})]},r.id))})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:n,className:"px-6 py-3 bg-primary text-white rounded-md hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50",children:n?"Processing...":"Continue to Payment"})})]})]})})}export{j as default};
//# sourceMappingURL=token-BpJdTG4S.js.map

import{g as v,a as w,u as C,r,j as e,B as i,e as h,C as p,h as k,i as S,k as E}from"./index-CiaQwhO3.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=v("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),D=()=>{const c=w(),{token:n}=C(),[t,b]=r.useState(null),[g,d]=r.useState(!0),[o,m]=r.useState(null),[l,j]=r.useState(null),[y,x]=r.useState(!1);r.useEffect(()=>{(async()=>{if(!n){m("No token provided"),d(!1);return}try{const a=await fetch("/api/get-business-by-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:n})});if(!a.ok)throw new Error("Failed to fetch business data");const u=await a.json();if(!u.business){console.error("Invalid state: OnboardingSuccess accessed without business creation"),console.log("Redirecting to business setup page..."),c(`/onboard/${n}/setup`);return}b(u)}catch(a){m(a instanceof Error?a.message:"An error occurred")}finally{d(!1)}})()},[n]);const N=async()=>{if(t)try{const s=await fetch("/api/generate-customer-invitation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({businessId:t.business.id})});if(!s.ok)throw new Error("Failed to generate customer link");const a=await s.json();j(a.customerUrl)}catch(s){console.error("Error generating customer link:",s)}},f=async s=>{try{await navigator.clipboard.writeText(s),x(!0),setTimeout(()=>x(!1),2e3)}catch(a){console.error("Failed to copy text: ",a)}};return g?e.jsx("div",{className:"min-h-screen bg-[#fdfaf7] px-6 py-10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#800020] mx-auto mb-4"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Loading your business details..."})]})}):o||!t?e.jsx("div",{className:"min-h-screen bg-[#fdfaf7] px-6 py-10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-lg text-red-600 mb-4",children:["Error: ",o||"Failed to load business data"]}),e.jsx(i,{onClick:()=>c("/business/dashboard"),children:"Go to Dashboard"})]})}):e.jsx("div",{className:"min-h-screen bg-[#fdfaf7] px-6 py-10",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx(h,{className:"h-24 w-24 text-green-500 mx-auto mb-6"}),e.jsxs("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:["ðŸŽ‰ Welcome to Club CuvÃ©e, ",t.business.name,"!"]}),e.jsx("p",{className:"text-xl text-gray-600 mb-2",children:"Your business account has been successfully created"}),e.jsx("p",{className:"text-lg text-gray-500",children:"You're ready to start building your wine club community"})]}),e.jsxs(p,{className:"p-8 mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Your Membership Tiers"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:t.membershipTiers.map(s=>e.jsxs("div",{className:"text-center p-6 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("div",{className:"h-12 w-12 bg-[#800020] rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(k,{className:"h-6 w-6 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:s.name}),e.jsxs("p",{className:"text-2xl font-bold text-[#800020] mb-2",children:["$",parseFloat(s.price).toFixed(2),"/month"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:s.description}),e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-xs text-green-600",children:[e.jsx(h,{className:"h-4 w-4"}),e.jsx("span",{children:"Stripe Ready"})]})]},s.id))}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 text-center",children:"Ready to Start Acquiring Customers?"}),e.jsx("div",{className:"text-center",children:l?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("p",{className:"text-sm text-green-800 mb-2",children:"Your customer sign-up link is ready!"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:l,readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-sm"}),e.jsxs(i,{onClick:()=>f(l),variant:"secondary",size:"sm",children:[e.jsx(S,{className:"w-4 h-4 mr-1"}),y?"Copied!":"Copy"]})]})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Share this link with potential customers to start building your wine club community!"})]}):e.jsxs(i,{onClick:N,className:"mb-4",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Generate Customer Sign-Up Link"]})})]})]}),e.jsxs(p,{className:"p-6 mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your Account Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"âœ… Business Name:"}),e.jsx("span",{className:"text-gray-600 ml-2",children:t.business.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"âœ… Admin Email:"}),e.jsx("span",{className:"text-gray-600 ml-2",children:t.business.admin_email})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"âœ… Membership Tiers:"}),e.jsxs("span",{className:"text-gray-600 ml-2",children:[t.membershipTiers.length," Created"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"âœ… Stripe Integration:"}),e.jsx("span",{className:"text-gray-600 ml-2",children:"Products & Prices Created"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"âœ… Subscription Tier:"}),e.jsx("span",{className:"text-gray-600 ml-2",children:t.business.subscription_tier})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"âœ… Status:"}),e.jsx("span",{className:"text-green-600 ml-2",children:"Ready for Customers"})]})]})]}),e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs(i,{onClick:()=>c("/business/dashboard"),className:"px-8 py-3",children:["Access Your Dashboard",e.jsx(E,{className:"w-5 h-5 ml-2"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"You can now log in with your admin credentials at any time"})]}),e.jsxs("div",{className:"text-center mt-12 p-6 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Need Help Getting Started?"}),e.jsx("p",{className:"text-blue-700 mb-4",children:"Our team is here to help you make the most of Club CuvÃ©e"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:["ðŸ“§ Email: ",e.jsx("a",{href:"mailto:support@clubcuvee.com",className:"text-blue-600 hover:underline",children:"support@clubcuvee.com"})]}),e.jsxs("p",{children:["ðŸ“š Documentation: ",e.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"View setup guides"})]}),e.jsxs("p",{children:["ðŸŽ¥ Video Tutorials: ",e.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"Watch getting started videos"})]})]})]})]})})};export{D as default};
//# sourceMappingURL=OnboardingSuccess-CiVQ8UPp.js.map

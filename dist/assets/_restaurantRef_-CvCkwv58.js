import{c as Pe,s as U,g as ps,a as mn,b as fs,j as l,r as N,X as ys,W as Me,F as vs,T as gs,S as Ps,G as xs,d as Ts,B as pn,C as Dr,u as bs,e as _s,f as ws}from"./index-2BKm2-0Z.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=Pe("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=Pe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=Pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=Pe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=Pe("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=Pe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=Pe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),ht={async createRestaurant(t){const{data:e,error:r}=await U.from("restaurants").insert([{name:t.restaurantName,website:t.website||"",admin_email:t.email,subscription_tier:t.tier||"basic",payment_session_id:t.sessionId||"",created_at:new Date().toISOString()}]).select().single();if(r)throw new Error(`Restaurant creation failed: ${r.message}`);return e},async uploadLogo(t,e){try{const r=e.name.split(".").pop(),n=`${t}/logo.${r}`,{error:a}=await U.storage.from("restaurant-logos").upload(n,e,{cacheControl:"3600",upsert:!0});if(a)throw a;const{data:s}=U.storage.from("restaurant-logos").getPublicUrl(n),{error:i}=await U.from("restaurants").update({logo_url:s.publicUrl}).eq("id",t);if(i)throw i;return s.publicUrl}catch(r){throw console.error("Logo upload error:",r),new Error("Failed to upload logo")}},async getRestaurantById(t){const{data:e,error:r}=await U.from("restaurants").select("*").eq("id",t).single();if(r)throw new Error(`Failed to fetch restaurant: ${r.message}`);if(!e)throw new Error("Restaurant not found");return e},async updateRestaurant(t,e){const{data:r,error:n}=await U.from("restaurants").update({...e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(n)throw new Error(`Failed to update restaurant: ${n.message}`);return r},async createInvitation(t,e,r,n,a="standard"){try{const{data:s}=await U.from("restaurant_invitations").select("token").eq("email",t).eq("status","pending").maybeSingle();if(s){const u=window.location.origin;return{token:s.token,invitationUrl:`${u}/onboarding/${s.token}`}}const i=crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).substring(2),h=new Date;h.setDate(h.getDate()+7);const{data:c,error:p}=await U.from("restaurant_invitations").insert([{token:i,email:t,restaurant_name:e,website:r||"",admin_name:n||"",tier:a,created_at:new Date().toISOString(),expires_at:h.toISOString(),status:"pending"}]).select().single();if(p)throw new Error(`Failed to create invitation: ${p.message}`);const m=`${window.location.origin}/onboarding/${i}`;return{token:i,invitationUrl:m}}catch(s){throw console.error("Error creating invitation:",s),s}},async getInvitationByToken(t){try{const{data:e,error:r}=await U.from("restaurant_invitations").select("*").eq("token",t).single();if(r)return console.error("Error fetching invitation:",r),null;const n=new Date,a=new Date(e.expires_at);return n>a&&e.status==="pending"?(await U.from("restaurant_invitations").update({status:"expired"}).eq("id",e.id),{...e,status:"expired"}):e}catch(e){return console.error("Error checking invitation:",e),null}},async updateInvitationStatus(t,e,r){try{const n={status:e,updated_at:new Date().toISOString()};r&&(n.restaurant_id=r);const{error:a}=await U.from("restaurant_invitations").update(n).eq("token",t);if(a)throw new Error(`Failed to update invitation status: ${a.message}`)}catch(n){throw console.error("Error updating invitation status:",n),n}}},yn={async createMembershipTier(t,e){try{if(t.stripe_product_id&&t.stripe_price_id){const{data:a,error:s}=await U.from("membership_tiers").insert([{name:t.name,price:t.price,description:t.description||"",restaurant_id:e,stripe_product_id:t.stripe_product_id,stripe_price_id:t.stripe_price_id,created_at:new Date().toISOString()}]).select().single();if(s)throw new Error(`Tier creation failed: ${s.message}`);return a}const r=await fetch("/api/membership-tiers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name,price:t.price,description:t.description||"",restaurant_id:e})});if(!r.ok){const a=await r.json();throw new Error(a.error||"Failed to create membership tier")}return await r.json()}catch(r){throw console.error("Error creating membership tier:",r),r}},async updateMembershipTier(t){try{const e=await fetch("/api/membership-tiers",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const n=await e.json();throw new Error(n.error||"Failed to update membership tier")}return await e.json()}catch(e){throw console.error("Error updating membership tier:",e),e}},async getMembershipTiersByRestaurant(t){try{const{data:e,error:r}=await U.from("membership_tiers").select("*").eq("restaurant_id",t).order("price",{ascending:!0}).returns();if(r)throw new Error(`Failed to fetch tiers: ${r.message}`);return e||[]}catch(e){throw console.error("Error fetching membership tiers:",e),e}},async getMembershipTierById(t){try{const{data:e,error:r}=await U.from("membership_tiers").select("*").eq("id",t).returns().single();if(r)throw new Error(`Failed to fetch tier: ${r.message}`);return e}catch(e){throw console.error("Error fetching membership tier:",e),e}}};class z{getClientName(){throw new Error("getClientName not implemented.")}makeRequest(e,r,n,a,s,i,h,c){throw new Error("makeRequest not implemented.")}static makeTimeoutError(){const e=new TypeError(z.TIMEOUT_ERROR_CODE);return e.code=z.TIMEOUT_ERROR_CODE,e}}z.CONNECTION_CLOSED_ERROR_CODES=["ECONNRESET","EPIPE"];z.TIMEOUT_ERROR_CODE="ETIMEDOUT";class Ea{constructor(e,r){this._statusCode=e,this._headers=r}getStatusCode(){return this._statusCode}getHeaders(){return this._headers}getRawResponse(){throw new Error("getRawResponse not implemented.")}toStream(e){throw new Error("toStream not implemented.")}toJSON(){throw new Error("toJSON not implemented.")}}class Bt extends z{constructor(e){if(super(),!e){if(!globalThis.fetch)throw new Error("fetch() function not provided and is not defined in the global scope. You must provide a fetch implementation.");e=globalThis.fetch}globalThis.AbortController?this._fetchFn=Bt.makeFetchWithAbortTimeout(e):this._fetchFn=Bt.makeFetchWithRaceTimeout(e)}static makeFetchWithRaceTimeout(e){return(r,n,a)=>{let s;const i=new Promise((c,p)=>{s=setTimeout(()=>{s=null,p(z.makeTimeoutError())},a)}),h=e(r,n);return Promise.race([h,i]).finally(()=>{s&&clearTimeout(s)})}}static makeFetchWithAbortTimeout(e){return async(r,n,a)=>{const s=new AbortController;let i=setTimeout(()=>{i=null,s.abort(z.makeTimeoutError())},a);try{return await e(r,Object.assign(Object.assign({},n),{signal:s.signal}))}catch(h){throw h.name==="AbortError"?z.makeTimeoutError():h}finally{i&&clearTimeout(i)}}}getClientName(){return"fetch"}async makeRequest(e,r,n,a,s,i,h,c){const p=h==="http",d=new URL(n,`${p?"http":"https"}://${e}`);d.port=r;const m=a=="POST"||a=="PUT"||a=="PATCH",u=i||(m?"":void 0),v=await this._fetchFn(d.toString(),{method:a,headers:s,body:u},c);return new Yr(v)}}class Yr extends Ea{constructor(e){super(e.status,Yr._transformHeadersToObject(e.headers)),this._res=e}getRawResponse(){return this._res}toStream(e){return e(),this._res.body}toJSON(){return this._res.json()}static _transformHeadersToObject(e){const r={};for(const n of e){if(!Array.isArray(n)||n.length!=2)throw new Error("Response objects produced by the fetch function given to FetchHttpClient do not have an iterable headers map. Response#headers should be an iterable object.");r[n[0]]=n[1]}return r}}class Oa{computeHMACSignature(e,r){throw new Error("computeHMACSignature not implemented.")}computeHMACSignatureAsync(e,r){throw new Error("computeHMACSignatureAsync not implemented.")}computeSHA256Async(e){throw new Error("computeSHA256 not implemented.")}}class Na extends Error{}class As extends Oa{constructor(e){super(),this.subtleCrypto=e||crypto.subtle}computeHMACSignature(e,r){throw new Na("SubtleCryptoProvider cannot be used in a synchronous context.")}async computeHMACSignatureAsync(e,r){const n=new TextEncoder,a=await this.subtleCrypto.importKey("raw",n.encode(r),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),s=await this.subtleCrypto.sign("hmac",a,n.encode(e)),i=new Uint8Array(s),h=new Array(i.length);for(let c=0;c<i.length;c++)h[c]=qr[i[c]];return h.join("")}async computeSHA256Async(e){return new Uint8Array(await this.subtleCrypto.digest("SHA-256",e))}}const qr=new Array(256);for(let t=0;t<qr.length;t++)qr[t]=t.toString(16).padStart(2,"0");class Cs{constructor(){this._fetchFn=null,this._agent=null}getUname(){throw new Error("getUname not implemented.")}uuid4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const r=Math.random()*16|0;return(e==="x"?r:r&3|8).toString(16)})}secureCompare(e,r){if(e.length!==r.length)return!1;const n=e.length;let a=0;for(let s=0;s<n;++s)a|=e.charCodeAt(s)^r.charCodeAt(s);return a===0}createEmitter(){throw new Error("createEmitter not implemented.")}tryBufferData(e){throw new Error("tryBufferData not implemented.")}createNodeHttpClient(e){throw new Error("createNodeHttpClient not implemented.")}createFetchHttpClient(e){return new Bt(e)}createDefaultHttpClient(){throw new Error("createDefaultHttpClient not implemented.")}createNodeCryptoProvider(){throw new Error("createNodeCryptoProvider not implemented.")}createSubtleCryptoProvider(e){return new As(e)}createDefaultCryptoProvider(){throw new Error("createDefaultCryptoProvider not implemented.")}}class $s extends Event{constructor(e,r){super(e),this.data=r}}class Rs{constructor(){this.eventTarget=new EventTarget,this.listenerMapping=new Map}on(e,r){const n=a=>{r(a.data)};return this.listenerMapping.set(r,n),this.eventTarget.addEventListener(e,n)}removeListener(e,r){const n=this.listenerMapping.get(r);return this.listenerMapping.delete(r),this.eventTarget.removeEventListener(e,n)}once(e,r){const n=a=>{r(a.data)};return this.listenerMapping.set(r,n),this.eventTarget.addEventListener(e,n,{once:!0})}emit(e,r){return this.eventTarget.dispatchEvent(new $s(e,r))}}class Ms extends Cs{getUname(){return Promise.resolve(null)}createEmitter(){return new Rs}tryBufferData(e){if(e.file.data instanceof ReadableStream)throw new Error("Uploading a file as a stream is not supported in non-Node environments. Please open or upvote an issue at github.com/stripe/stripe-node if you use this, detailing your use-case.");return Promise.resolve(e)}createNodeHttpClient(){throw new Error("Stripe: `createNodeHttpClient()` is not available in non-Node environments. Please use `createFetchHttpClient()` instead.")}createDefaultHttpClient(){return super.createFetchHttpClient()}createNodeCryptoProvider(){throw new Error("Stripe: `createNodeCryptoProvider()` is not available in non-Node environments. Please use `createSubtleCryptoProvider()` instead.")}createDefaultCryptoProvider(){return this.createSubtleCryptoProvider()}}const Jt=t=>{switch(t.type){case"card_error":return new Ca(t);case"invalid_request_error":return new Qr(t);case"api_error":return new Xr(t);case"authentication_error":return new Zr(t);case"rate_limit_error":return new en(t);case"idempotency_error":return new Ma(t);case"invalid_grant":return new ja(t);default:return new Ia(t)}},Aa=t=>{switch(t.type){case"temporary_session_expired":return new ka(t)}switch(t.code){case"invalid_fields":return new Qr(t)}return Jt(t)};class B extends Error{constructor(e={},r=null){super(e.message),this.type=r||this.constructor.name,this.raw=e,this.rawType=e.type,this.code=e.code,this.doc_url=e.doc_url,this.param=e.param,this.detail=e.detail,this.headers=e.headers,this.requestId=e.requestId,this.statusCode=e.statusCode,this.message=e.message,this.userMessage=e.user_message,this.charge=e.charge,this.decline_code=e.decline_code,this.payment_intent=e.payment_intent,this.payment_method=e.payment_method,this.payment_method_type=e.payment_method_type,this.setup_intent=e.setup_intent,this.source=e.source}}B.generate=Jt;class Ca extends B{constructor(e={}){super(e,"StripeCardError")}}class Qr extends B{constructor(e={}){super(e,"StripeInvalidRequestError")}}class Xr extends B{constructor(e={}){super(e,"StripeAPIError")}}class Zr extends B{constructor(e={}){super(e,"StripeAuthenticationError")}}class $a extends B{constructor(e={}){super(e,"StripePermissionError")}}class en extends B{constructor(e={}){super(e,"StripeRateLimitError")}}class Ra extends B{constructor(e={}){super(e,"StripeConnectionError")}}class oe extends B{constructor(e,r,n={}){super(n,"StripeSignatureVerificationError"),this.header=e,this.payload=r}}class Ma extends B{constructor(e={}){super(e,"StripeIdempotencyError")}}class ja extends B{constructor(e={}){super(e,"StripeInvalidGrantError")}}class Ia extends B{constructor(e={}){super(e,"StripeUnknownError")}}class ka extends B{constructor(e={}){super(e,"TemporarySessionExpiredError")}}const vn=Object.freeze(Object.defineProperty({__proto__:null,StripeAPIError:Xr,StripeAuthenticationError:Zr,StripeCardError:Ca,StripeConnectionError:Ra,StripeError:B,StripeIdempotencyError:Ma,StripeInvalidGrantError:ja,StripeInvalidRequestError:Qr,StripePermissionError:$a,StripeRateLimitError:en,StripeSignatureVerificationError:oe,StripeUnknownError:Ia,TemporarySessionExpiredError:ka,generateV1Error:Jt,generateV2Error:Aa},Symbol.toStringTag,{value:"Module"}));var Ge=TypeError;const js={},Is=Object.freeze(Object.defineProperty({__proto__:null,default:js},Symbol.toStringTag,{value:"Module"})),ks=ps(Is);var tn=typeof Map=="function"&&Map.prototype,rr=Object.getOwnPropertyDescriptor&&tn?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Ht=tn&&rr&&typeof rr.get=="function"?rr.get:null,gn=tn&&Map.prototype.forEach,rn=typeof Set=="function"&&Set.prototype,nr=Object.getOwnPropertyDescriptor&&rn?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,zt=rn&&nr&&typeof nr.get=="function"?nr.get:null,Pn=rn&&Set.prototype.forEach,Gs=typeof WeakMap=="function"&&WeakMap.prototype,nt=Gs?WeakMap.prototype.has:null,Fs=typeof WeakSet=="function"&&WeakSet.prototype,at=Fs?WeakSet.prototype.has:null,Ds=typeof WeakRef=="function"&&WeakRef.prototype,xn=Ds?WeakRef.prototype.deref:null,qs=Boolean.prototype.valueOf,Ls=Object.prototype.toString,Us=Function.prototype.toString,Bs=String.prototype.match,nn=String.prototype.slice,ie=String.prototype.replace,Hs=String.prototype.toUpperCase,Tn=String.prototype.toLowerCase,Ga=RegExp.prototype.test,bn=Array.prototype.concat,Z=Array.prototype.join,zs=Array.prototype.slice,_n=Math.floor,Lr=typeof BigInt=="function"?BigInt.prototype.valueOf:null,ar=Object.getOwnPropertySymbols,Ur=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Ie=typeof Symbol=="function"&&typeof Symbol.iterator=="object",st=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ie||!0)?Symbol.toStringTag:null,Fa=Object.prototype.propertyIsEnumerable,wn=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function Sn(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||Ga.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-_n(-t):_n(t);if(n!==t){var a=String(n),s=nn.call(e,a.length+1);return ie.call(a,r,"$&_")+"."+ie.call(ie.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return ie.call(e,r,"$&_")}var Br=ks,En=Br.custom,On=La(En)?En:null,Da={__proto__:null,double:'"',single:"'"},Ws={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},Yt=function t(e,r,n,a){var s=r||{};if(ee(s,"quoteStyle")&&!ee(Da,s.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ee(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var i=ee(s,"customInspect")?s.customInspect:!0;if(typeof i!="boolean"&&i!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ee(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ee(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var h=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return Ba(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var c=String(e);return h?Sn(e,c):c}if(typeof e=="bigint"){var p=String(e)+"n";return h?Sn(e,p):p}var d=typeof s.depth>"u"?5:s.depth;if(typeof n>"u"&&(n=0),n>=d&&d>0&&typeof e=="object")return Hr(e)?"[Array]":"[Object]";var m=uo(s,n);if(typeof a>"u")a=[];else if(Ua(a,e)>=0)return"[Circular]";function u(O,S,C){if(S&&(a=zs.call(a),a.push(S)),C){var k={depth:s.depth};return ee(s,"quoteStyle")&&(k.quoteStyle=s.quoteStyle),t(O,k,n+1,a)}return t(O,s,n+1,a)}if(typeof e=="function"&&!Nn(e)){var v=to(e),g=mt(e,u);return"[Function"+(v?": "+v:" (anonymous)")+"]"+(g.length>0?" { "+Z.call(g,", ")+" }":"")}if(La(e)){var T=Ie?ie.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Ur.call(e);return typeof e=="object"&&!Ie?Fe(T):T}if(io(e)){for(var f="<"+Tn.call(String(e.nodeName)),y=e.attributes||[],P=0;P<y.length;P++)f+=" "+y[P].name+"="+qa(Vs(y[P].value),"double",s);return f+=">",e.childNodes&&e.childNodes.length&&(f+="..."),f+="</"+Tn.call(String(e.nodeName))+">",f}if(Hr(e)){if(e.length===0)return"[]";var x=mt(e,u);return m&&!co(x)?"["+zr(x,m)+"]":"[ "+Z.call(x,", ")+" ]"}if(Js(e)){var b=mt(e,u);return!("cause"in Error.prototype)&&"cause"in e&&!Fa.call(e,"cause")?"{ ["+String(e)+"] "+Z.call(bn.call("[cause]: "+u(e.cause),b),", ")+" }":b.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Z.call(b,", ")+" }"}if(typeof e=="object"&&i){if(On&&typeof e[On]=="function"&&Br)return Br(e,{depth:d-n});if(i!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(ro(e)){var w=[];return gn&&gn.call(e,function(O,S){w.push(u(S,e,!0)+" => "+u(O,e))}),An("Map",Ht.call(e),w,m)}if(so(e)){var q=[];return Pn&&Pn.call(e,function(O){q.push(u(O,e))}),An("Set",zt.call(e),q,m)}if(no(e))return sr("WeakMap");if(oo(e))return sr("WeakSet");if(ao(e))return sr("WeakRef");if(Qs(e))return Fe(u(Number(e)));if(Zs(e))return Fe(u(Lr.call(e)));if(Xs(e))return Fe(qs.call(e));if(Ys(e))return Fe(u(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof mn<"u"&&e===mn)return"{ [object globalThis] }";if(!Ks(e)&&!Nn(e)){var R=mt(e,u),L=wn?wn(e)===Object.prototype:e instanceof Object||e.constructor===Object,H=e instanceof Object?"":"null prototype",M=!L&&st&&Object(e)===e&&st in e?nn.call(le(e),8,-1):H?"Object":"",te=L||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",A=te+(M||H?"["+Z.call(bn.call([],M||[],H||[]),": ")+"] ":"");return R.length===0?A+"{}":m?A+"{"+zr(R,m)+"}":A+"{ "+Z.call(R,", ")+" }"}return String(e)};function qa(t,e,r){var n=r.quoteStyle||e,a=Da[n];return a+t+a}function Vs(t){return ie.call(String(t),/"/g,"&quot;")}function xe(t){return!st||!(typeof t=="object"&&(st in t||typeof t[st]<"u"))}function Hr(t){return le(t)==="[object Array]"&&xe(t)}function Ks(t){return le(t)==="[object Date]"&&xe(t)}function Nn(t){return le(t)==="[object RegExp]"&&xe(t)}function Js(t){return le(t)==="[object Error]"&&xe(t)}function Ys(t){return le(t)==="[object String]"&&xe(t)}function Qs(t){return le(t)==="[object Number]"&&xe(t)}function Xs(t){return le(t)==="[object Boolean]"&&xe(t)}function La(t){if(Ie)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!Ur)return!1;try{return Ur.call(t),!0}catch{}return!1}function Zs(t){if(!t||typeof t!="object"||!Lr)return!1;try{return Lr.call(t),!0}catch{}return!1}var eo=Object.prototype.hasOwnProperty||function(t){return t in this};function ee(t,e){return eo.call(t,e)}function le(t){return Ls.call(t)}function to(t){if(t.name)return t.name;var e=Bs.call(Us.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function Ua(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function ro(t){if(!Ht||!t||typeof t!="object")return!1;try{Ht.call(t);try{zt.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function no(t){if(!nt||!t||typeof t!="object")return!1;try{nt.call(t,nt);try{at.call(t,at)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function ao(t){if(!xn||!t||typeof t!="object")return!1;try{return xn.call(t),!0}catch{}return!1}function so(t){if(!zt||!t||typeof t!="object")return!1;try{zt.call(t);try{Ht.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function oo(t){if(!at||!t||typeof t!="object")return!1;try{at.call(t,at);try{nt.call(t,nt)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function io(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function Ba(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return Ba(nn.call(t,0,e.maxStringLength),e)+n}var a=Ws[e.quoteStyle||"single"];a.lastIndex=0;var s=ie.call(ie.call(t,a,"\\$1"),/[\x00-\x1f]/g,lo);return qa(s,"single",e)}function lo(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+Hs.call(e.toString(16))}function Fe(t){return"Object("+t+")"}function sr(t){return t+" { ? }"}function An(t,e,r,n){var a=n?zr(r,n):Z.call(r,", ");return t+" ("+e+") {"+a+"}"}function co(t){for(var e=0;e<t.length;e++)if(Ua(t[e],`
`)>=0)return!1;return!0}function uo(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=Z.call(Array(t.indent+1)," ");else return null;return{base:r,prev:Z.call(Array(e+1),r)}}function zr(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+Z.call(t,","+r)+`
`+e.prev}function mt(t,e){var r=Hr(t),n=[];if(r){n.length=t.length;for(var a=0;a<t.length;a++)n[a]=ee(t,a)?e(t[a],t):""}var s=typeof ar=="function"?ar(t):[],i;if(Ie){i={};for(var h=0;h<s.length;h++)i["$"+s[h]]=s[h]}for(var c in t)ee(t,c)&&(r&&String(Number(c))===c&&c<t.length||Ie&&i["$"+c]instanceof Symbol||(Ga.call(/[^\w$]/,c)?n.push(e(c,t)+": "+e(t[c],t)):n.push(c+": "+e(t[c],t))));if(typeof ar=="function")for(var p=0;p<s.length;p++)Fa.call(t,s[p])&&n.push("["+e(s[p])+"]: "+e(t[s[p]],t));return n}var ho=Yt,mo=Ge,Qt=function(t,e,r){for(var n=t,a;(a=n.next)!=null;n=a)if(a.key===e)return n.next=a.next,r||(a.next=t.next,t.next=a),a},po=function(t,e){if(t){var r=Qt(t,e);return r&&r.value}},fo=function(t,e,r){var n=Qt(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},yo=function(t,e){return t?!!Qt(t,e):!1},vo=function(t,e){if(t)return Qt(t,e,!0)},go=function(){var e,r={assert:function(n){if(!r.has(n))throw new mo("Side channel does not contain "+ho(n))},delete:function(n){var a=e&&e.next,s=vo(e,n);return s&&a&&a===s&&(e=void 0),!!s},get:function(n){return po(e,n)},has:function(n){return yo(e,n)},set:function(n,a){e||(e={next:void 0}),fo(e,n,a)}};return r},Ha=Object,Po=Error,xo=EvalError,To=RangeError,bo=ReferenceError,_o=SyntaxError,wo=URIError,So=Math.abs,Eo=Math.floor,Oo=Math.max,No=Math.min,Ao=Math.pow,Co=Math.round,$o=Number.isNaN||function(e){return e!==e},Ro=$o,Mo=function(e){return Ro(e)||e===0?e:e<0?-1:1},jo=Object.getOwnPropertyDescriptor,qt=jo;if(qt)try{qt([],"length")}catch{qt=null}var za=qt,Lt=Object.defineProperty||!1;if(Lt)try{Lt({},"a",{value:1})}catch{Lt=!1}var Io=Lt,or,Cn;function ko(){return Cn||(Cn=1,or=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var a=42;e[r]=a;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var i=Object.getOwnPropertySymbols(e);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var h=Object.getOwnPropertyDescriptor(e,r);if(h.value!==a||h.enumerable!==!0)return!1}return!0}),or}var ir,$n;function Go(){if($n)return ir;$n=1;var t=typeof Symbol<"u"&&Symbol,e=ko();return ir=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},ir}var lr,Rn;function Wa(){return Rn||(Rn=1,lr=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),lr}var cr,Mn;function Va(){if(Mn)return cr;Mn=1;var t=Ha;return cr=t.getPrototypeOf||null,cr}var Fo="Function.prototype.bind called on incompatible ",Do=Object.prototype.toString,qo=Math.max,Lo="[object Function]",jn=function(e,r){for(var n=[],a=0;a<e.length;a+=1)n[a]=e[a];for(var s=0;s<r.length;s+=1)n[s+e.length]=r[s];return n},Uo=function(e,r){for(var n=[],a=r,s=0;a<e.length;a+=1,s+=1)n[s]=e[a];return n},Bo=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},Ho=function(e){var r=this;if(typeof r!="function"||Do.apply(r)!==Lo)throw new TypeError(Fo+r);for(var n=Uo(arguments,1),a,s=function(){if(this instanceof a){var d=r.apply(this,jn(n,arguments));return Object(d)===d?d:this}return r.apply(e,jn(n,arguments))},i=qo(0,r.length-n.length),h=[],c=0;c<i;c++)h[c]="$"+c;if(a=Function("binder","return function ("+Bo(h,",")+"){ return binder.apply(this,arguments); }")(s),r.prototype){var p=function(){};p.prototype=r.prototype,a.prototype=new p,p.prototype=null}return a},zo=Ho,Xt=Function.prototype.bind||zo,an=Function.prototype.call,dr,In;function Ka(){return In||(In=1,dr=Function.prototype.apply),dr}var Wo=typeof Reflect<"u"&&Reflect&&Reflect.apply,Vo=Xt,Ko=Ka(),Jo=an,Yo=Wo,Qo=Yo||Vo.call(Jo,Ko),Xo=Xt,Zo=Ge,ei=an,ti=Qo,Ja=function(e){if(e.length<1||typeof e[0]!="function")throw new Zo("a function is required");return ti(Xo,ei,e)},ur,kn;function ri(){if(kn)return ur;kn=1;var t=Ja,e=za,r;try{r=[].__proto__===Array.prototype}catch(i){if(!i||typeof i!="object"||!("code"in i)||i.code!=="ERR_PROTO_ACCESS")throw i}var n=!!r&&e&&e(Object.prototype,"__proto__"),a=Object,s=a.getPrototypeOf;return ur=n&&typeof n.get=="function"?t([n.get]):typeof s=="function"?function(h){return s(h==null?h:a(h))}:!1,ur}var hr,Gn;function ni(){if(Gn)return hr;Gn=1;var t=Wa(),e=Va(),r=ri();return hr=t?function(a){return t(a)}:e?function(a){if(!a||typeof a!="object"&&typeof a!="function")throw new TypeError("getProto: not an object");return e(a)}:r?function(a){return r(a)}:null,hr}var mr,Fn;function ai(){if(Fn)return mr;Fn=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,r=Xt;return mr=r.call(t,e),mr}var _,si=Ha,oi=Po,ii=xo,li=To,ci=bo,ke=_o,je=Ge,di=wo,ui=So,hi=Eo,mi=Oo,pi=No,fi=Ao,yi=Co,vi=Mo,Ya=Function,pr=function(t){try{return Ya('"use strict"; return ('+t+").constructor;")()}catch{}},lt=za,gi=Io,fr=function(){throw new je},Pi=lt?function(){try{return arguments.callee,fr}catch{try{return lt(arguments,"callee").get}catch{return fr}}}():fr,Te=Go()(),D=ni(),xi=Va(),Ti=Wa(),Qa=Ka(),ct=an,Re={},bi=typeof Uint8Array>"u"||!D?_:D(Uint8Array),ve={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?_:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?_:ArrayBuffer,"%ArrayIteratorPrototype%":Te&&D?D([][Symbol.iterator]()):_,"%AsyncFromSyncIteratorPrototype%":_,"%AsyncFunction%":Re,"%AsyncGenerator%":Re,"%AsyncGeneratorFunction%":Re,"%AsyncIteratorPrototype%":Re,"%Atomics%":typeof Atomics>"u"?_:Atomics,"%BigInt%":typeof BigInt>"u"?_:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?_:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?_:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?_:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":oi,"%eval%":eval,"%EvalError%":ii,"%Float16Array%":typeof Float16Array>"u"?_:Float16Array,"%Float32Array%":typeof Float32Array>"u"?_:Float32Array,"%Float64Array%":typeof Float64Array>"u"?_:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?_:FinalizationRegistry,"%Function%":Ya,"%GeneratorFunction%":Re,"%Int8Array%":typeof Int8Array>"u"?_:Int8Array,"%Int16Array%":typeof Int16Array>"u"?_:Int16Array,"%Int32Array%":typeof Int32Array>"u"?_:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Te&&D?D(D([][Symbol.iterator]())):_,"%JSON%":typeof JSON=="object"?JSON:_,"%Map%":typeof Map>"u"?_:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Te||!D?_:D(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":si,"%Object.getOwnPropertyDescriptor%":lt,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?_:Promise,"%Proxy%":typeof Proxy>"u"?_:Proxy,"%RangeError%":li,"%ReferenceError%":ci,"%Reflect%":typeof Reflect>"u"?_:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?_:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Te||!D?_:D(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?_:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Te&&D?D(""[Symbol.iterator]()):_,"%Symbol%":Te?Symbol:_,"%SyntaxError%":ke,"%ThrowTypeError%":Pi,"%TypedArray%":bi,"%TypeError%":je,"%Uint8Array%":typeof Uint8Array>"u"?_:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?_:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?_:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?_:Uint32Array,"%URIError%":di,"%WeakMap%":typeof WeakMap>"u"?_:WeakMap,"%WeakRef%":typeof WeakRef>"u"?_:WeakRef,"%WeakSet%":typeof WeakSet>"u"?_:WeakSet,"%Function.prototype.call%":ct,"%Function.prototype.apply%":Qa,"%Object.defineProperty%":gi,"%Object.getPrototypeOf%":xi,"%Math.abs%":ui,"%Math.floor%":hi,"%Math.max%":mi,"%Math.min%":pi,"%Math.pow%":fi,"%Math.round%":yi,"%Math.sign%":vi,"%Reflect.getPrototypeOf%":Ti};if(D)try{null.error}catch(t){var _i=D(D(t));ve["%Error.prototype%"]=_i}var wi=function t(e){var r;if(e==="%AsyncFunction%")r=pr("async function () {}");else if(e==="%GeneratorFunction%")r=pr("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=pr("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var a=t("%AsyncGenerator%");a&&D&&(r=D(a.prototype))}return ve[e]=r,r},Dn={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},dt=Xt,Wt=ai(),Si=dt.call(ct,Array.prototype.concat),Ei=dt.call(Qa,Array.prototype.splice),qn=dt.call(ct,String.prototype.replace),Vt=dt.call(ct,String.prototype.slice),Oi=dt.call(ct,RegExp.prototype.exec),Ni=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ai=/\\(\\)?/g,Ci=function(e){var r=Vt(e,0,1),n=Vt(e,-1);if(r==="%"&&n!=="%")throw new ke("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new ke("invalid intrinsic syntax, expected opening `%`");var a=[];return qn(e,Ni,function(s,i,h,c){a[a.length]=h?qn(c,Ai,"$1"):i||s}),a},$i=function(e,r){var n=e,a;if(Wt(Dn,n)&&(a=Dn[n],n="%"+a[0]+"%"),Wt(ve,n)){var s=ve[n];if(s===Re&&(s=wi(n)),typeof s>"u"&&!r)throw new je("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:a,name:n,value:s}}throw new ke("intrinsic "+e+" does not exist!")},sn=function(e,r){if(typeof e!="string"||e.length===0)throw new je("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new je('"allowMissing" argument must be a boolean');if(Oi(/^%?[^%]*%?$/,e)===null)throw new ke("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Ci(e),a=n.length>0?n[0]:"",s=$i("%"+a+"%",r),i=s.name,h=s.value,c=!1,p=s.alias;p&&(a=p[0],Ei(n,Si([0,1],p)));for(var d=1,m=!0;d<n.length;d+=1){var u=n[d],v=Vt(u,0,1),g=Vt(u,-1);if((v==='"'||v==="'"||v==="`"||g==='"'||g==="'"||g==="`")&&v!==g)throw new ke("property names with quotes must have matching quotes");if((u==="constructor"||!m)&&(c=!0),a+="."+u,i="%"+a+"%",Wt(ve,i))h=ve[i];else if(h!=null){if(!(u in h)){if(!r)throw new je("base intrinsic for "+e+" exists, but the property is not available.");return}if(lt&&d+1>=n.length){var T=lt(h,u);m=!!T,m&&"get"in T&&!("originalValue"in T.get)?h=T.get:h=h[u]}else m=Wt(h,u),h=h[u];m&&!c&&(ve[i]=h)}}return h},Xa=sn,Za=Ja,Ri=Za([Xa("%String.prototype.indexOf%")]),es=function(e,r){var n=Xa(e,!!r);return typeof n=="function"&&Ri(e,".prototype.")>-1?Za([n]):n},Mi=sn,ut=es,ji=Yt,Ii=Ge,Ln=Mi("%Map%",!0),ki=ut("Map.prototype.get",!0),Gi=ut("Map.prototype.set",!0),Fi=ut("Map.prototype.has",!0),Di=ut("Map.prototype.delete",!0),qi=ut("Map.prototype.size",!0),ts=!!Ln&&function(){var e,r={assert:function(n){if(!r.has(n))throw new Ii("Side channel does not contain "+ji(n))},delete:function(n){if(e){var a=Di(e,n);return qi(e)===0&&(e=void 0),a}return!1},get:function(n){if(e)return ki(e,n)},has:function(n){return e?Fi(e,n):!1},set:function(n,a){e||(e=new Ln),Gi(e,n,a)}};return r},Li=sn,Zt=es,Ui=Yt,pt=ts,Bi=Ge,be=Li("%WeakMap%",!0),Hi=Zt("WeakMap.prototype.get",!0),zi=Zt("WeakMap.prototype.set",!0),Wi=Zt("WeakMap.prototype.has",!0),Vi=Zt("WeakMap.prototype.delete",!0),Ki=be?function(){var e,r,n={assert:function(a){if(!n.has(a))throw new Bi("Side channel does not contain "+Ui(a))},delete:function(a){if(be&&a&&(typeof a=="object"||typeof a=="function")){if(e)return Vi(e,a)}else if(pt&&r)return r.delete(a);return!1},get:function(a){return be&&a&&(typeof a=="object"||typeof a=="function")&&e?Hi(e,a):r&&r.get(a)},has:function(a){return be&&a&&(typeof a=="object"||typeof a=="function")&&e?Wi(e,a):!!r&&r.has(a)},set:function(a,s){be&&a&&(typeof a=="object"||typeof a=="function")?(e||(e=new be),zi(e,a,s)):pt&&(r||(r=pt()),r.set(a,s))}};return n}:pt,Ji=Ge,Yi=Yt,Qi=go,Xi=ts,Zi=Ki,el=Zi||Xi||Qi,tl=function(){var e,r={assert:function(n){if(!r.has(n))throw new Ji("Side channel does not contain "+Yi(n))},delete:function(n){return!!e&&e.delete(n)},get:function(n){return e&&e.get(n)},has:function(n){return!!e&&e.has(n)},set:function(n,a){e||(e=el()),e.set(n,a)}};return r},rl=String.prototype.replace,nl=/%20/g,yr={RFC1738:"RFC1738",RFC3986:"RFC3986"},on={default:yr.RFC3986,formatters:{RFC1738:function(t){return rl.call(t,nl,"+")},RFC3986:function(t){return String(t)}},RFC1738:yr.RFC1738,RFC3986:yr.RFC3986},al=on,vr=Object.prototype.hasOwnProperty,ye=Array.isArray,V=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),sl=function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(ye(n)){for(var a=[],s=0;s<n.length;++s)typeof n[s]<"u"&&a.push(n[s]);r.obj[r.prop]=a}}},rs=function(e,r){for(var n=r&&r.plainObjects?{__proto__:null}:{},a=0;a<e.length;++a)typeof e[a]<"u"&&(n[a]=e[a]);return n},ol=function t(e,r,n){if(!r)return e;if(typeof r!="object"&&typeof r!="function"){if(ye(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!vr.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var a=e;return ye(e)&&!ye(r)&&(a=rs(e,n)),ye(e)&&ye(r)?(r.forEach(function(s,i){if(vr.call(e,i)){var h=e[i];h&&typeof h=="object"&&s&&typeof s=="object"?e[i]=t(h,s,n):e.push(s)}else e[i]=s}),e):Object.keys(r).reduce(function(s,i){var h=r[i];return vr.call(s,i)?s[i]=t(s[i],h,n):s[i]=h,s},a)},il=function(e,r){return Object.keys(r).reduce(function(n,a){return n[a]=r[a],n},e)},ll=function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},gr=1024,cl=function(e,r,n,a,s){if(e.length===0)return e;var i=e;if(typeof e=="symbol"?i=Symbol.prototype.toString.call(e):typeof e!="string"&&(i=String(e)),n==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(v){return"%26%23"+parseInt(v.slice(2),16)+"%3B"});for(var h="",c=0;c<i.length;c+=gr){for(var p=i.length>=gr?i.slice(c,c+gr):i,d=[],m=0;m<p.length;++m){var u=p.charCodeAt(m);if(u===45||u===46||u===95||u===126||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||s===al.RFC1738&&(u===40||u===41)){d[d.length]=p.charAt(m);continue}if(u<128){d[d.length]=V[u];continue}if(u<2048){d[d.length]=V[192|u>>6]+V[128|u&63];continue}if(u<55296||u>=57344){d[d.length]=V[224|u>>12]+V[128|u>>6&63]+V[128|u&63];continue}m+=1,u=65536+((u&1023)<<10|p.charCodeAt(m)&1023),d[d.length]=V[240|u>>18]+V[128|u>>12&63]+V[128|u>>6&63]+V[128|u&63]}h+=d.join("")}return h},dl=function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],a=0;a<r.length;++a)for(var s=r[a],i=s.obj[s.prop],h=Object.keys(i),c=0;c<h.length;++c){var p=h[c],d=i[p];typeof d=="object"&&d!==null&&n.indexOf(d)===-1&&(r.push({obj:i,prop:p}),n.push(d))}return sl(r),e},ul=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},hl=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},ml=function(e,r){return[].concat(e,r)},pl=function(e,r){if(ye(e)){for(var n=[],a=0;a<e.length;a+=1)n.push(r(e[a]));return n}return r(e)},ns={arrayToObject:rs,assign:il,combine:ml,compact:dl,decode:ll,encode:cl,isBuffer:hl,isRegExp:ul,maybeMap:pl,merge:ol},as=tl,Ut=ns,ot=on,fl=Object.prototype.hasOwnProperty,ss={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},X=Array.isArray,yl=Array.prototype.push,os=function(t,e){yl.apply(t,X(e)?e:[e])},vl=Date.prototype.toISOString,Un=ot.default,F={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Ut.encode,encodeValuesOnly:!1,filter:void 0,format:Un,formatter:ot.formatters[Un],indices:!1,serializeDate:function(e){return vl.call(e)},skipNulls:!1,strictNullHandling:!1},gl=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},Pr={},Pl=function t(e,r,n,a,s,i,h,c,p,d,m,u,v,g,T,f,y,P){for(var x=e,b=P,w=0,q=!1;(b=b.get(Pr))!==void 0&&!q;){var R=b.get(e);if(w+=1,typeof R<"u"){if(R===w)throw new RangeError("Cyclic object value");q=!0}typeof b.get(Pr)>"u"&&(w=0)}if(typeof d=="function"?x=d(r,x):x instanceof Date?x=v(x):n==="comma"&&X(x)&&(x=Ut.maybeMap(x,function(tr){return tr instanceof Date?v(tr):tr})),x===null){if(i)return p&&!f?p(r,F.encoder,y,"key",g):r;x=""}if(gl(x)||Ut.isBuffer(x)){if(p){var L=f?r:p(r,F.encoder,y,"key",g);return[T(L)+"="+T(p(x,F.encoder,y,"value",g))]}return[T(r)+"="+T(String(x))]}var H=[];if(typeof x>"u")return H;var M;if(n==="comma"&&X(x))f&&p&&(x=Ut.maybeMap(x,p)),M=[{value:x.length>0?x.join(",")||null:void 0}];else if(X(d))M=d;else{var te=Object.keys(x);M=m?te.sort(m):te}var A=c?String(r).replace(/\./g,"%2E"):String(r),O=a&&X(x)&&x.length===1?A+"[]":A;if(s&&X(x)&&x.length===0)return O+"[]";for(var S=0;S<M.length;++S){var C=M[S],k=typeof C=="object"&&C&&typeof C.value<"u"?C.value:x[C];if(!(h&&k===null)){var ce=u&&c?String(C).replace(/\./g,"%2E"):String(C),ms=X(x)?typeof n=="function"?n(O,ce):O:O+(u?"."+ce:"["+ce+"]");P.set(e,w);var hn=as();hn.set(Pr,P),os(H,t(k,ms,n,a,s,i,h,c,n==="comma"&&f&&X(x)?null:p,d,m,u,v,g,T,f,y,hn))}}return H},xl=function(e){if(!e)return F;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||F.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=ot.default;if(typeof e.format<"u"){if(!fl.call(ot.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var a=ot.formatters[n],s=F.filter;(typeof e.filter=="function"||X(e.filter))&&(s=e.filter);var i;if(e.arrayFormat in ss?i=e.arrayFormat:"indices"in e?i=e.indices?"indices":"repeat":i=F.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var h=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:F.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:F.addQueryPrefix,allowDots:h,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:F.allowEmptyArrays,arrayFormat:i,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:F.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?F.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:F.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:F.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:F.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:F.encodeValuesOnly,filter:s,format:n,formatter:a,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:F.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:F.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:F.strictNullHandling}},Tl=function(t,e){var r=t,n=xl(e),a,s;typeof n.filter=="function"?(s=n.filter,r=s("",r)):X(n.filter)&&(s=n.filter,a=s);var i=[];if(typeof r!="object"||r===null)return"";var h=ss[n.arrayFormat],c=h==="comma"&&n.commaRoundTrip;a||(a=Object.keys(r)),n.sort&&a.sort(n.sort);for(var p=as(),d=0;d<a.length;++d){var m=a[d],u=r[m];n.skipNulls&&u===null||os(i,Pl(u,m,h,c,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,p))}var v=i.join(n.delimiter),g=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),v.length>0?g+v:""},ge=ns,Wr=Object.prototype.hasOwnProperty,Bn=Array.isArray,I={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:ge.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},bl=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},is=function(t,e,r){if(t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1)return t.split(",");if(e.throwOnLimitExceeded&&r>=e.arrayLimit)throw new RangeError("Array limit exceeded. Only "+e.arrayLimit+" element"+(e.arrayLimit===1?"":"s")+" allowed in an array.");return t},_l="utf8=%26%2310003%3B",wl="utf8=%E2%9C%93",Sl=function(e,r){var n={__proto__:null},a=r.ignoreQueryPrefix?e.replace(/^\?/,""):e;a=a.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var s=r.parameterLimit===1/0?void 0:r.parameterLimit,i=a.split(r.delimiter,r.throwOnLimitExceeded?s+1:s);if(r.throwOnLimitExceeded&&i.length>s)throw new RangeError("Parameter limit exceeded. Only "+s+" parameter"+(s===1?"":"s")+" allowed.");var h=-1,c,p=r.charset;if(r.charsetSentinel)for(c=0;c<i.length;++c)i[c].indexOf("utf8=")===0&&(i[c]===wl?p="utf-8":i[c]===_l&&(p="iso-8859-1"),h=c,c=i.length);for(c=0;c<i.length;++c)if(c!==h){var d=i[c],m=d.indexOf("]="),u=m===-1?d.indexOf("="):m+1,v,g;u===-1?(v=r.decoder(d,I.decoder,p,"key"),g=r.strictNullHandling?null:""):(v=r.decoder(d.slice(0,u),I.decoder,p,"key"),g=ge.maybeMap(is(d.slice(u+1),r,Bn(n[v])?n[v].length:0),function(f){return r.decoder(f,I.decoder,p,"value")})),g&&r.interpretNumericEntities&&p==="iso-8859-1"&&(g=bl(String(g))),d.indexOf("[]=")>-1&&(g=Bn(g)?[g]:g);var T=Wr.call(n,v);T&&r.duplicates==="combine"?n[v]=ge.combine(n[v],g):(!T||r.duplicates==="last")&&(n[v]=g)}return n},El=function(t,e,r,n){var a=0;if(t.length>0&&t[t.length-1]==="[]"){var s=t.slice(0,-1).join("");a=Array.isArray(e)&&e[s]?e[s].length:0}for(var i=n?e:is(e,r,a),h=t.length-1;h>=0;--h){var c,p=t[h];if(p==="[]"&&r.parseArrays)c=r.allowEmptyArrays&&(i===""||r.strictNullHandling&&i===null)?[]:ge.combine([],i);else{c=r.plainObjects?{__proto__:null}:{};var d=p.charAt(0)==="["&&p.charAt(p.length-1)==="]"?p.slice(1,-1):p,m=r.decodeDotInKeys?d.replace(/%2E/g,"."):d,u=parseInt(m,10);!r.parseArrays&&m===""?c={0:i}:!isNaN(u)&&p!==m&&String(u)===m&&u>=0&&r.parseArrays&&u<=r.arrayLimit?(c=[],c[u]=i):m!=="__proto__"&&(c[m]=i)}i=c}return i},Ol=function(e,r,n,a){if(e){var s=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/,h=/(\[[^[\]]*])/g,c=n.depth>0&&i.exec(s),p=c?s.slice(0,c.index):s,d=[];if(p){if(!n.plainObjects&&Wr.call(Object.prototype,p)&&!n.allowPrototypes)return;d.push(p)}for(var m=0;n.depth>0&&(c=h.exec(s))!==null&&m<n.depth;){if(m+=1,!n.plainObjects&&Wr.call(Object.prototype,c[1].slice(1,-1))&&!n.allowPrototypes)return;d.push(c[1])}if(c){if(n.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+n.depth+" and strictDepth is true");d.push("["+s.slice(c.index)+"]")}return El(d,r,n,a)}},Nl=function(e){if(!e)return I;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof e.throwOnLimitExceeded<"u"&&typeof e.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var r=typeof e.charset>"u"?I.charset:e.charset,n=typeof e.duplicates>"u"?I.duplicates:e.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var a=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:I.allowDots:!!e.allowDots;return{allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:I.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:I.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:I.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:I.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:I.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:I.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:I.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:I.decoder,delimiter:typeof e.delimiter=="string"||ge.isRegExp(e.delimiter)?e.delimiter:I.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:I.depth,duplicates:n,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:I.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:I.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:I.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:I.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:I.strictNullHandling,throwOnLimitExceeded:typeof e.throwOnLimitExceeded=="boolean"?e.throwOnLimitExceeded:!1}},Al=function(t,e){var r=Nl(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?{__proto__:null}:{};for(var n=typeof t=="string"?Sl(t,r):t,a=r.plainObjects?{__proto__:null}:{},s=Object.keys(n),i=0;i<s.length;++i){var h=s[i],c=Ol(h,n[h],r,typeof t=="string");a=ge.merge(a,c,r)}return r.allowSparse===!0?a:ge.compact(a)},Cl=Tl,$l=Al,Rl=on,Ml={formats:Rl,parse:$l,stringify:Cl};const ln=["apiKey","idempotencyKey","stripeAccount","apiVersion","maxNetworkRetries","timeout","host","authenticator","stripeContext","additionalHeaders"];function ls(t){return t&&typeof t=="object"&&ln.some(e=>Object.prototype.hasOwnProperty.call(t,e))}function er(t,e){return Ml.stringify(t,{serializeDate:r=>Math.floor(r.getTime()/1e3).toString(),arrayFormat:e=="v2"?"repeat":"indices"}).replace(/%5B/g,"[").replace(/%5D/g,"]")}const Vr=(()=>{const t={"\n":"\\n",'"':'\\"',"\u2028":"\\u2028","\u2029":"\\u2029"};return e=>{const r=e.replace(/["\n\r\u2028\u2029]/g,n=>t[n]);return n=>r.replace(/\{([\s\S]+?)\}/g,(a,s)=>encodeURIComponent(n[s]||""))}})();function jl(t){const e=t.match(/\{\w+\}/g);return e?e.map(r=>r.replace(/[{}]/g,"")):[]}function cn(t){if(!Array.isArray(t)||!t[0]||typeof t[0]!="object")return{};if(!ls(t[0]))return t.shift();const e=Object.keys(t[0]),r=e.filter(n=>ln.includes(n));return r.length>0&&r.length!==e.length&&Kt(`Options found in arguments (${r.join(", ")}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.`),{}}function cs(t){const e={host:null,headers:{},settings:{}};if(t.length>0){const r=t[t.length-1];if(typeof r=="string")e.authenticator=Kr(t.pop());else if(ls(r)){const n=Object.assign({},t.pop()),a=Object.keys(n).filter(s=>!ln.includes(s));if(a.length&&Kt(`Invalid options found (${a.join(", ")}); ignoring.`),n.apiKey&&(e.authenticator=Kr(n.apiKey)),n.idempotencyKey&&(e.headers["Idempotency-Key"]=n.idempotencyKey),n.stripeAccount&&(e.headers["Stripe-Account"]=n.stripeAccount),n.stripeContext){if(e.headers["Stripe-Account"])throw new Error("Can't specify both stripeAccount and stripeContext.");e.headers["Stripe-Context"]=n.stripeContext}if(n.apiVersion&&(e.headers["Stripe-Version"]=n.apiVersion),Number.isInteger(n.maxNetworkRetries)&&(e.settings.maxNetworkRetries=n.maxNetworkRetries),Number.isInteger(n.timeout)&&(e.settings.timeout=n.timeout),n.host&&(e.host=n.host),n.authenticator){if(n.apiKey)throw new Error("Can't specify both apiKey and authenticator.");if(typeof n.authenticator!="function")throw new Error("The authenticator must be a function receiving a request as the first parameter.");e.authenticator=n.authenticator}n.additionalHeaders&&(e.headers=n.additionalHeaders)}}return e}function Il(t){const e=this,r=Object.prototype.hasOwnProperty.call(t,"constructor")?t.constructor:function(...n){e.apply(this,n)};return Object.assign(r,e),r.prototype=Object.create(e.prototype),Object.assign(r.prototype,t),r}function xr(t){if(typeof t!="object")throw new Error("Argument must be an object");return Object.keys(t).reduce((e,r)=>(t[r]!=null&&(e[r]=t[r]),e),{})}function kl(t){return t&&typeof t=="object"?Object.keys(t).reduce((e,r)=>(e[Gl(r)]=t[r],e),{}):t}function Gl(t){return t.split("-").map(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()).join("-")}function dn(t,e){return e?t.then(r=>{setTimeout(()=>{e(null,r)},0)},r=>{setTimeout(()=>{e(r,null)},0)}):t}function Fl(t){return t==="OAuth"?"oauth":t[0].toLowerCase()+t.substring(1)}function Kt(t){return typeof process.emitWarning!="function"?console.warn(`Stripe: ${t}`):process.emitWarning(t,"Stripe")}function Dl(t){const e=typeof t;return(e==="function"||e==="object")&&!!t}function ql(t){const e={},r=(n,a)=>{Object.entries(n).forEach(([s,i])=>{const h=a?`${a}[${s}]`:s;if(Dl(i)){if(!(i instanceof Uint8Array)&&!Object.prototype.hasOwnProperty.call(i,"data"))return r(i,h);e[h]=i}else e[h]=String(i)})};return r(t,null),e}function Tr(t,e,r){if(!Number.isInteger(e)){if(r!==void 0)return r;throw new Error(`${t} must be an integer`)}return e}function Ll(){return typeof process>"u"?{}:{lang_version:process.version,platform:process.platform}}function Kr(t){const e=r=>(r.headers.Authorization="Bearer "+t,Promise.resolve());return e._apiKey=t,e}function Ul(t,e){return this[t]instanceof Date?Math.floor(this[t].getTime()/1e3).toString():e}function Bl(t){return JSON.stringify(t,Ul)}function un(t){return t&&t.startsWith("/v2")?"v2":"v1"}const Hl=60;class it{constructor(e,r){this._stripe=e,this._maxBufferedRequestMetric=r}_addHeadersDirectlyToObject(e,r){e.requestId=r["request-id"],e.stripeAccount=e.stripeAccount||r["stripe-account"],e.apiVersion=e.apiVersion||r["stripe-version"],e.idempotencyKey=e.idempotencyKey||r["idempotency-key"]}_makeResponseEvent(e,r,n){const a=Date.now(),s=a-e.request_start_time;return xr({api_version:n["stripe-version"],account:n["stripe-account"],idempotency_key:n["idempotency-key"],method:e.method,path:e.path,status:r,request_id:this._getRequestId(n),elapsed:s,request_start_time:e.request_start_time,request_end_time:a})}_getRequestId(e){return e["request-id"]}_streamingResponseHandler(e,r,n){return a=>{const s=a.getHeaders(),i=()=>{const c=this._makeResponseEvent(e,a.getStatusCode(),s);this._stripe._emitter.emit("response",c),this._recordRequestMetrics(this._getRequestId(s),c.elapsed,r)},h=a.toStream(i);return this._addHeadersDirectlyToObject(h,s),n(null,h)}}_jsonResponseHandler(e,r,n,a){return s=>{const i=s.getHeaders(),h=this._getRequestId(i),c=s.getStatusCode(),p=this._makeResponseEvent(e,c,i);this._stripe._emitter.emit("response",p),s.toJSON().then(d=>{if(d.error){let m;throw typeof d.error=="string"&&(d.error={type:d.error,message:d.error_description}),d.error.headers=i,d.error.statusCode=c,d.error.requestId=h,c===401?m=new Zr(d.error):c===403?m=new $a(d.error):c===429?m=new en(d.error):r==="v2"?m=Aa(d.error):m=Jt(d.error),m}return d},d=>{throw new Xr({message:"Invalid JSON received from the Stripe API",exception:d,requestId:i["request-id"]})}).then(d=>{this._recordRequestMetrics(h,p.elapsed,n);const m=s.getRawResponse();this._addHeadersDirectlyToObject(m,i),Object.defineProperty(d,"lastResponse",{enumerable:!1,writable:!1,value:m}),a(null,d)},d=>a(d,null))}}static _generateConnectionErrorMessage(e){return`An error occurred with our connection to Stripe.${e>0?` Request was retried ${e} times.`:""}`}static _shouldRetry(e,r,n,a){return a&&r===0&&z.CONNECTION_CLOSED_ERROR_CODES.includes(a.code)?!0:r>=n?!1:e?e.getHeaders()["stripe-should-retry"]==="false"?!1:e.getHeaders()["stripe-should-retry"]==="true"||e.getStatusCode()===409||e.getStatusCode()>=500:!0}_getSleepTimeInMS(e,r=null){const n=this._stripe.getInitialNetworkRetryDelay(),a=this._stripe.getMaxNetworkRetryDelay();let s=Math.min(n*Math.pow(2,e-1),a);return s*=.5*(1+Math.random()),s=Math.max(n,s),Number.isInteger(r)&&r<=Hl&&(s=Math.max(s,r)),s*1e3}_getMaxNetworkRetries(e={}){return e.maxNetworkRetries!==void 0&&Number.isInteger(e.maxNetworkRetries)?e.maxNetworkRetries:this._stripe.getMaxNetworkRetries()}_defaultIdempotencyKey(e,r,n){const a=this._getMaxNetworkRetries(r),s=()=>`stripe-node-retry-${this._stripe._platformFunctions.uuid4()}`;if(n==="v2"){if(e==="POST"||e==="DELETE")return s()}else if(n==="v1"&&e==="POST"&&a>0)return s();return null}_makeHeaders({contentType:e,contentLength:r,apiVersion:n,clientUserAgent:a,method:s,userSuppliedHeaders:i,userSuppliedSettings:h,stripeAccount:c,stripeContext:p,apiMode:d}){const m={Accept:"application/json","Content-Type":e,"User-Agent":this._getUserAgentString(d),"X-Stripe-Client-User-Agent":a,"X-Stripe-Client-Telemetry":this._getTelemetryHeader(),"Stripe-Version":n,"Stripe-Account":c,"Stripe-Context":p,"Idempotency-Key":this._defaultIdempotencyKey(s,h,d)},u=s=="POST"||s=="PUT"||s=="PATCH";return(u||r)&&(u||Kt(`${s} method had non-zero contentLength but no payload is expected for this verb`),m["Content-Length"]=r),Object.assign(xr(m),kl(i))}_getUserAgentString(e){const r=this._stripe.getConstant("PACKAGE_VERSION"),n=this._stripe._appInfo?this._stripe.getAppInfoAsString():"";return`Stripe/${e} NodeBindings/${r} ${n}`.trim()}_getTelemetryHeader(){if(this._stripe.getTelemetryEnabled()&&this._stripe._prevRequestMetrics.length>0){const e=this._stripe._prevRequestMetrics.shift();return JSON.stringify({last_request_metrics:e})}}_recordRequestMetrics(e,r,n){if(this._stripe.getTelemetryEnabled()&&e)if(this._stripe._prevRequestMetrics.length>this._maxBufferedRequestMetric)Kt("Request metrics buffer is full, dropping telemetry message.");else{const a={request_id:e,request_duration_ms:r};n&&n.length>0&&(a.usage=n),this._stripe._prevRequestMetrics.push(a)}}_rawRequest(e,r,n,a){return new Promise((i,h)=>{let c;try{const v=e.toUpperCase();if(v!=="POST"&&n&&Object.keys(n).length!==0)throw new Error("rawRequest only supports params on POST requests. Please pass null and add your parameters to path.");const g=[].slice.call([n,a]),T=cn(g),f=Object.assign({},T),y=cs(g),P=y.headers,x=y.authenticator;c={requestMethod:v,requestPath:r,bodyData:f,queryData:{},authenticator:x,headers:P,host:null,streaming:!1,settings:{},usage:["raw_request"]}}catch(v){h(v);return}function p(v,g){v?h(v):i(g)}const{headers:d,settings:m}=c,u=c.authenticator;this._request(c.requestMethod,c.host,r,c.bodyData,u,{headers:d,settings:m,streaming:c.streaming},c.usage,p)})}_request(e,r,n,a,s,i,h=[],c,p=null){var d;let m;s=(d=s??this._stripe._authenticator)!==null&&d!==void 0?d:null;const u=un(n),v=(f,y,P,x,b)=>setTimeout(f,this._getSleepTimeInMS(x,b),y,P,x+1),g=(f,y,P)=>{const x=i.settings&&i.settings.timeout&&Number.isInteger(i.settings.timeout)&&i.settings.timeout>=0?i.settings.timeout:this._stripe.getApiField("timeout"),b={host:r||this._stripe.getApiField("host"),port:this._stripe.getApiField("port"),path:n,method:e,headers:Object.assign({},y),body:m,protocol:this._stripe.getApiField("protocol")};s(b).then(()=>{const w=this._stripe.getApiField("httpClient").makeRequest(b.host,b.port,b.path,b.method,b.headers,b.body,b.protocol,x),q=Date.now(),R=xr({api_version:f,account:y["Stripe-Account"],idempotency_key:y["Idempotency-Key"],method:e,path:n,request_start_time:q}),L=P||0,H=this._getMaxNetworkRetries(i.settings||{});this._stripe._emitter.emit("request",R),w.then(M=>it._shouldRetry(M,L,H)?v(g,f,y,L,M.getHeaders()["retry-after"]):i.streaming&&M.getStatusCode()<400?this._streamingResponseHandler(R,h,c)(M):this._jsonResponseHandler(R,u,h,c)(M)).catch(M=>{if(it._shouldRetry(null,L,H,M))return v(g,f,y,L,null);{const te=M.code&&M.code===z.TIMEOUT_ERROR_CODE;return c(new Ra({message:te?`Request aborted due to timeout being reached (${x}ms)`:it._generateConnectionErrorMessage(L),detail:M}))}})}).catch(w=>{throw new B({message:"Unable to authenticate the request",exception:w})})},T=(f,y)=>{if(f)return c(f);m=y,this._stripe.getClientUserAgent(P=>{const x=this._stripe.getApiField("version"),b=this._makeHeaders({contentType:u=="v2"?"application/json":"application/x-www-form-urlencoded",contentLength:m.length,apiVersion:x,clientUserAgent:P,method:e,userSuppliedHeaders:i.headers,userSuppliedSettings:i.settings,stripeAccount:u=="v2"?null:this._stripe.getApiField("stripeAccount"),stripeContext:u=="v2"?this._stripe.getApiField("stripeContext"):null,apiMode:u});g(x,b,0)})};if(p)p(e,a,i.headers,T);else{let f;u=="v2"?f=a?Bl(a):"":f=er(a||{},u),T(null,f)}}}class ds{constructor(e,r,n,a){this.index=0,this.pagePromise=e,this.promiseCache={currentPromise:null},this.requestArgs=r,this.spec=n,this.stripeResource=a}async iterate(e){if(!(e&&e.data&&typeof e.data.length=="number"))throw Error("Unexpected: Stripe API response does not have a well-formed `data` array.");const r=us(this.requestArgs);if(this.index<e.data.length){const n=r?e.data.length-1-this.index:this.index,a=e.data[n];return this.index+=1,{value:a,done:!1}}else if(e.has_more){this.index=0,this.pagePromise=this.getNextPage(e);const n=await this.pagePromise;return this.iterate(n)}return{done:!0,value:void 0}}getNextPage(e){throw new Error("Unimplemented")}async _next(){return this.iterate(await this.pagePromise)}next(){if(this.promiseCache.currentPromise)return this.promiseCache.currentPromise;const e=(async()=>{const r=await this._next();return this.promiseCache.currentPromise=null,r})();return this.promiseCache.currentPromise=e,e}}class zl extends ds{getNextPage(e){const r=us(this.requestArgs),n=Xl(e,r);return this.stripeResource._makeRequest(this.requestArgs,this.spec,{[r?"ending_before":"starting_after"]:n})}}class Wl extends ds{getNextPage(e){if(!e.next_page)throw Error("Unexpected: Stripe API response does not have a well-formed `next_page` field, but `has_more` was true.");return this.stripeResource._makeRequest(this.requestArgs,this.spec,{page:e.next_page})}}class Vl{constructor(e,r,n,a){this.currentPageIterator=(async()=>(await e).data[Symbol.iterator]())(),this.nextPageUrl=(async()=>(await e).next_page_url||null)(),this.requestArgs=r,this.spec=n,this.stripeResource=a}async turnPage(){const e=await this.nextPageUrl;if(!e)return null;this.spec.fullPath=e;const r=await this.stripeResource._makeRequest([],this.spec,{});return this.nextPageUrl=Promise.resolve(r.next_page_url),this.currentPageIterator=Promise.resolve(r.data[Symbol.iterator]()),this.currentPageIterator}async next(){{const n=(await this.currentPageIterator).next();if(!n.done)return{done:!1,value:n.value}}const e=await this.turnPage();if(!e)return{done:!0,value:void 0};const r=e.next();return r.done?{done:!0,value:void 0}:{done:!1,value:r.value}}}const Kl=(t,e,r,n)=>{const a=un(r.fullPath||r.path);return a!=="v2"&&r.methodType==="search"?br(new Wl(n,e,r,t)):a!=="v2"&&r.methodType==="list"?br(new zl(n,e,r,t)):a==="v2"&&r.methodType==="list"?br(new Vl(n,e,r,t)):null},br=t=>{const e=Zl((...a)=>t.next(...a)),r=ec(e),n={autoPagingEach:e,autoPagingToArray:r,next:()=>t.next(),return:()=>({}),[Jl()]:()=>n};return n};function Jl(){return typeof Symbol<"u"&&Symbol.asyncIterator?Symbol.asyncIterator:"@@asyncIterator"}function Yl(t){if(t.length<2)return null;const e=t[1];if(typeof e!="function")throw Error(`The second argument to autoPagingEach, if present, must be a callback function; received ${typeof e}`);return e}function Ql(t){if(t.length===0)return;const e=t[0];if(typeof e!="function")throw Error(`The first argument to autoPagingEach, if present, must be a callback function; received ${typeof e}`);if(e.length===2)return e;if(e.length>2)throw Error(`The \`onItem\` callback function passed to autoPagingEach must accept at most two arguments; got ${e}`);return function(n,a){const s=e(n);a(s)}}function Xl(t,e){const r=e?0:t.data.length-1,n=t.data[r],a=n&&n.id;if(!a)throw Error("Unexpected: No `id` found on the last item while auto-paging a list.");return a}function Zl(t){return function(){const r=[].slice.call(arguments),n=Ql(r),a=Yl(r);if(r.length>2)throw Error(`autoPagingEach takes up to two arguments; received ${r}`);const s=tc(t,n);return dn(s,a)}}function ec(t){return function(r,n){const a=r&&r.limit;if(!a)throw Error("You must pass a `limit` option to autoPagingToArray, e.g., `autoPagingToArray({limit: 1000});`.");if(a>1e4)throw Error("You cannot specify a limit of more than 10,000 items to fetch in `autoPagingToArray`; use `autoPagingEach` to iterate through longer lists.");const s=new Promise((i,h)=>{const c=[];t(p=>{if(c.push(p),c.length>=a)return!1}).then(()=>{i(c)}).catch(h)});return dn(s,n)}}function tc(t,e){return new Promise((r,n)=>{function a(s){if(s.done){r();return}const i=s.value;return new Promise(h=>{e(i,h)}).then(h=>h===!1?a({done:!0,value:void 0}):t().then(a))}t().then(a).catch(n)})}function us(t){const e=[].slice.call(t);return!!cn(e).ending_before}function rc(t){if(t.path!==void 0&&t.fullPath!==void 0)throw new Error(`Method spec specified both a 'path' (${t.path}) and a 'fullPath' (${t.fullPath}).`);return function(...e){const r=typeof e[e.length-1]=="function"&&e.pop();t.urlParams=jl(t.fullPath||this.createResourcePathWithSymbols(t.path||""));const n=dn(this._makeRequest(e,t,{}),r);return Object.assign(n,Kl(this,e,t,n)),n}}o.extend=Il;o.method=rc;o.MAX_BUFFERED_REQUEST_METRICS=100;function o(t,e){if(this._stripe=t,e)throw new Error("Support for curried url params was dropped in stripe-node v7.0.0. Instead, pass two ids.");this.basePath=Vr(this.basePath||t.getApiField("basePath")),this.resourcePath=this.path,this.path=Vr(this.path),this.initialize(...arguments)}o.prototype={_stripe:null,path:"",resourcePath:"",basePath:null,initialize(){},requestDataProcessor:null,validateRequest:null,createFullPath(t,e){const r=[this.basePath(e),this.path(e)];if(typeof t=="function"){const n=t(e);n&&r.push(n)}else r.push(t);return this._joinUrlParts(r)},createResourcePathWithSymbols(t){return t?`/${this._joinUrlParts([this.resourcePath,t])}`:`/${this.resourcePath}`},_joinUrlParts(t){return t.join("/").replace(/\/{2,}/g,"/")},_getRequestOpts(t,e,r){var n;const a=(e.method||"GET").toUpperCase(),s=e.usage||[],i=e.urlParams||[],h=e.encode||(R=>R),c=!!e.fullPath,p=Vr(c?e.fullPath:e.path||""),d=c?e.fullPath:this.createResourcePathWithSymbols(e.path),m=[].slice.call(t),u=i.reduce((R,L)=>{const H=m.shift();if(typeof H!="string")throw new Error(`Stripe: Argument "${L}" must be a string, but got: ${H} (on API request to \`${a} ${d}\`)`);return R[L]=H,R},{}),v=cn(m),g=h(Object.assign({},v,r)),T=cs(m),f=T.host||e.host,y=!!e.streaming;if(m.filter(R=>R!=null).length)throw new Error(`Stripe: Unknown arguments (${m}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options. (on API request to ${a} \`${d}\`)`);const P=c?p(u):this.createFullPath(p,u),x=Object.assign(T.headers,e.headers);e.validator&&e.validator(g,{headers:x});const b=e.method==="GET"||e.method==="DELETE";return{requestMethod:a,requestPath:P,bodyData:b?null:g,queryData:b?g:{},authenticator:(n=T.authenticator)!==null&&n!==void 0?n:null,headers:x,host:f??null,streaming:y,settings:T.settings,usage:s}},_makeRequest(t,e,r){return new Promise((n,a)=>{var s;let i;try{i=this._getRequestOpts(t,e,r)}catch(u){a(u);return}function h(u,v){u?a(u):n(e.transformResponseData?e.transformResponseData(v):v)}const c=Object.keys(i.queryData).length===0,p=[i.requestPath,c?"":"?",er(i.queryData,un(i.requestPath))].join(""),{headers:d,settings:m}=i;this._stripe._requestSender._request(i.requestMethod,i.host,p,i.bodyData,i.authenticator,{headers:d,settings:m,streaming:i.streaming},i.usage,h,(s=this.requestDataProcessor)===null||s===void 0?void 0:s.bind(this))})}};function Hn(t){const e={DEFAULT_TOLERANCE:300,signature:null,constructEvent(d,m,u,v,g,T){try{this.signature.verifyHeader(d,m,u,v||e.DEFAULT_TOLERANCE,g,T)}catch(y){throw y instanceof Na&&(y.message+="\nUse `await constructEventAsync(...)` instead of `constructEvent(...)`"),y}return d instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(d)):JSON.parse(d)},async constructEventAsync(d,m,u,v,g,T){return await this.signature.verifyHeaderAsync(d,m,u,v||e.DEFAULT_TOLERANCE,g,T),d instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(d)):JSON.parse(d)},generateTestHeaderString:function(d){const m=p(d),u=m.signature||m.cryptoProvider.computeHMACSignature(m.payloadString,m.secret);return m.generateHeaderString(u)},generateTestHeaderStringAsync:async function(d){const m=p(d),u=m.signature||await m.cryptoProvider.computeHMACSignatureAsync(m.payloadString,m.secret);return m.generateHeaderString(u)}},r={EXPECTED_SCHEME:"v1",verifyHeader(d,m,u,v,g,T){const{decodedHeader:f,decodedPayload:y,details:P,suspectPayloadType:x}=a(d,m,this.EXPECTED_SCHEME),b=/\s/.test(u);g=g||c();const w=g.computeHMACSignature(n(y,P),u);return s(y,f,P,w,v,x,b,T),!0},async verifyHeaderAsync(d,m,u,v,g,T){const{decodedHeader:f,decodedPayload:y,details:P,suspectPayloadType:x}=a(d,m,this.EXPECTED_SCHEME),b=/\s/.test(u);g=g||c();const w=await g.computeHMACSignatureAsync(n(y,P),u);return s(y,f,P,w,v,x,b,T)}};function n(d,m){return`${m.timestamp}.${d}`}function a(d,m,u){if(!d)throw new oe(m,d,{message:"No webhook payload was provided."});const v=typeof d!="string"&&!(d instanceof Uint8Array),g=new TextDecoder("utf8"),T=d instanceof Uint8Array?g.decode(d):d;if(Array.isArray(m))throw new Error("Unexpected: An array was passed as a header, which should not be possible for the stripe-signature header.");if(m==null||m=="")throw new oe(m,d,{message:"No stripe-signature header value was provided."});const f=m instanceof Uint8Array?g.decode(m):m,y=i(f,u);if(!y||y.timestamp===-1)throw new oe(f,T,{message:"Unable to extract timestamp and signatures from header"});if(!y.signatures.length)throw new oe(f,T,{message:"No signatures found with expected scheme"});return{decodedPayload:T,decodedHeader:f,details:y,suspectPayloadType:v}}function s(d,m,u,v,g,T,f,y){const P=!!u.signatures.filter(t.secureCompare.bind(t,v)).length,x=`
Learn more about webhook signing and explore webhook integration examples for various frameworks at https://docs.stripe.com/webhooks/signature`,b=f?`

Note: The provided signing secret contains whitespace. This often indicates an extra newline or space is in the value`:"";if(!P)throw T?new oe(m,d,{message:`Webhook payload must be provided as a string or a Buffer (https://nodejs.org/api/buffer.html) instance representing the _raw_ request body.Payload was provided as a parsed JavaScript object instead. 
Signature verification is impossible without access to the original signed material. 
`+x+`
`+b}):new oe(m,d,{message:`No signatures found matching the expected signature for payload. Are you passing the raw request body you received from Stripe? 
 If a webhook request is being forwarded by a third-party tool, ensure that the exact request body, including JSON formatting and new line style, is preserved.
`+x+`
`+b});const w=Math.floor((typeof y=="number"?y:Date.now())/1e3)-u.timestamp;if(g>0&&w>g)throw new oe(m,d,{message:"Timestamp outside the tolerance zone"});return!0}function i(d,m){return typeof d!="string"?null:d.split(",").reduce((u,v)=>{const g=v.split("=");return g[0]==="t"&&(u.timestamp=parseInt(g[1],10)),g[0]===m&&u.signatures.push(g[1]),u},{timestamp:-1,signatures:[]})}let h=null;function c(){return h||(h=t.createDefaultCryptoProvider()),h}function p(d){if(!d)throw new B({message:"Options are required"});const m=Math.floor(d.timestamp)||Math.floor(Date.now()/1e3),u=d.scheme||r.EXPECTED_SCHEME,v=d.cryptoProvider||c(),g=`${m}.${d.payload}`,T=f=>`t=${m},${u}=${f}`;return Object.assign(Object.assign({},d),{timestamp:m,scheme:u,cryptoProvider:v,payloadString:g,generateHeaderString:T})}return e.signature=r,e}const nc="2025-02-24.acacia";function ac(t,e){for(const r in e){if(!Object.prototype.hasOwnProperty.call(e,r))continue;const n=r[0].toLowerCase()+r.substring(1),a=new e[r](t);this[n]=a}}function $(t,e){return function(r){return new ac(r,e)}}const de=o.method,sc=o.extend({retrieve:de({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}"}),list:de({method:"GET",fullPath:"/v1/financial_connections/accounts",methodType:"list"}),disconnect:de({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/disconnect"}),listOwners:de({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}/owners",methodType:"list"}),refresh:de({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/refresh"}),subscribe:de({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/subscribe"}),unsubscribe:de({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/unsubscribe"})}),zn=o.method,oc=o.extend({retrieve:zn({method:"GET",fullPath:"/v1/entitlements/active_entitlements/{id}"}),list:zn({method:"GET",fullPath:"/v1/entitlements/active_entitlements",methodType:"list"})}),_e=o.method,ic=o.extend({create:_e({method:"POST",fullPath:"/v1/billing/alerts"}),retrieve:_e({method:"GET",fullPath:"/v1/billing/alerts/{id}"}),list:_e({method:"GET",fullPath:"/v1/billing/alerts",methodType:"list"}),activate:_e({method:"POST",fullPath:"/v1/billing/alerts/{id}/activate"}),archive:_e({method:"POST",fullPath:"/v1/billing/alerts/{id}/archive"}),deactivate:_e({method:"POST",fullPath:"/v1/billing/alerts/{id}/deactivate"})}),ue=o.method,lc=o.extend({create:ue({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations"}),capture:ue({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/capture"}),expire:ue({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/expire"}),finalizeAmount:ue({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/finalize_amount"}),increment:ue({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/increment"}),respond:ue({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/fraud_challenges/respond"}),reverse:ue({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/reverse"})}),De=o.method,cc=o.extend({retrieve:De({method:"GET",fullPath:"/v1/issuing/authorizations/{authorization}"}),update:De({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}"}),list:De({method:"GET",fullPath:"/v1/issuing/authorizations",methodType:"list"}),approve:De({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/approve"}),decline:De({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/decline"})}),_r=o.method,dc=o.extend({create:_r({method:"POST",fullPath:"/v1/tax/calculations"}),retrieve:_r({method:"GET",fullPath:"/v1/tax/calculations/{calculation}"}),listLineItems:_r({method:"GET",fullPath:"/v1/tax/calculations/{calculation}/line_items",methodType:"list"})}),ft=o.method,uc=o.extend({create:ft({method:"POST",fullPath:"/v1/issuing/cardholders"}),retrieve:ft({method:"GET",fullPath:"/v1/issuing/cardholders/{cardholder}"}),update:ft({method:"POST",fullPath:"/v1/issuing/cardholders/{cardholder}"}),list:ft({method:"GET",fullPath:"/v1/issuing/cardholders",methodType:"list"})}),qe=o.method,hc=o.extend({deliverCard:qe({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/deliver"}),failCard:qe({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/fail"}),returnCard:qe({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/return"}),shipCard:qe({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/ship"}),submitCard:qe({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/submit"})}),yt=o.method,mc=o.extend({create:yt({method:"POST",fullPath:"/v1/issuing/cards"}),retrieve:yt({method:"GET",fullPath:"/v1/issuing/cards/{card}"}),update:yt({method:"POST",fullPath:"/v1/issuing/cards/{card}"}),list:yt({method:"GET",fullPath:"/v1/issuing/cards",methodType:"list"})}),vt=o.method,pc=o.extend({create:vt({method:"POST",fullPath:"/v1/billing_portal/configurations"}),retrieve:vt({method:"GET",fullPath:"/v1/billing_portal/configurations/{configuration}"}),update:vt({method:"POST",fullPath:"/v1/billing_portal/configurations/{configuration}"}),list:vt({method:"GET",fullPath:"/v1/billing_portal/configurations",methodType:"list"})}),Le=o.method,fc=o.extend({create:Le({method:"POST",fullPath:"/v1/terminal/configurations"}),retrieve:Le({method:"GET",fullPath:"/v1/terminal/configurations/{configuration}"}),update:Le({method:"POST",fullPath:"/v1/terminal/configurations/{configuration}"}),list:Le({method:"GET",fullPath:"/v1/terminal/configurations",methodType:"list"}),del:Le({method:"DELETE",fullPath:"/v1/terminal/configurations/{configuration}"})}),yc=o.method,vc=o.extend({create:yc({method:"POST",fullPath:"/v1/test_helpers/confirmation_tokens"})}),gc=o.method,Pc=o.extend({create:gc({method:"POST",fullPath:"/v1/terminal/connection_tokens"})}),xc=o.method,Tc=o.extend({retrieve:xc({method:"GET",fullPath:"/v1/billing/credit_balance_summary"})}),Wn=o.method,bc=o.extend({retrieve:Wn({method:"GET",fullPath:"/v1/billing/credit_balance_transactions/{id}"}),list:Wn({method:"GET",fullPath:"/v1/billing/credit_balance_transactions",methodType:"list"})}),we=o.method,_c=o.extend({create:we({method:"POST",fullPath:"/v1/billing/credit_grants"}),retrieve:we({method:"GET",fullPath:"/v1/billing/credit_grants/{id}"}),update:we({method:"POST",fullPath:"/v1/billing/credit_grants/{id}"}),list:we({method:"GET",fullPath:"/v1/billing/credit_grants",methodType:"list"}),expire:we({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/expire"}),voidGrant:we({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/void"})}),wr=o.method,wc=o.extend({create:wr({method:"POST",fullPath:"/v1/treasury/credit_reversals"}),retrieve:wr({method:"GET",fullPath:"/v1/treasury/credit_reversals/{credit_reversal}"}),list:wr({method:"GET",fullPath:"/v1/treasury/credit_reversals",methodType:"list"})}),Sc=o.method,Ec=o.extend({fundCashBalance:Sc({method:"POST",fullPath:"/v1/test_helpers/customers/{customer}/fund_cash_balance"})}),Sr=o.method,Oc=o.extend({create:Sr({method:"POST",fullPath:"/v1/treasury/debit_reversals"}),retrieve:Sr({method:"GET",fullPath:"/v1/treasury/debit_reversals/{debit_reversal}"}),list:Sr({method:"GET",fullPath:"/v1/treasury/debit_reversals",methodType:"list"})}),Ue=o.method,Nc=o.extend({create:Ue({method:"POST",fullPath:"/v1/issuing/disputes"}),retrieve:Ue({method:"GET",fullPath:"/v1/issuing/disputes/{dispute}"}),update:Ue({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}"}),list:Ue({method:"GET",fullPath:"/v1/issuing/disputes",methodType:"list"}),submit:Ue({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}/submit"})}),Vn=o.method,Ac=o.extend({retrieve:Vn({method:"GET",fullPath:"/v1/radar/early_fraud_warnings/{early_fraud_warning}"}),list:Vn({method:"GET",fullPath:"/v1/radar/early_fraud_warnings",methodType:"list"})}),re=o.method,Cc=o.extend({create:re({method:"POST",fullPath:"/v2/core/event_destinations"}),retrieve:re({method:"GET",fullPath:"/v2/core/event_destinations/{id}"}),update:re({method:"POST",fullPath:"/v2/core/event_destinations/{id}"}),list:re({method:"GET",fullPath:"/v2/core/event_destinations",methodType:"list"}),del:re({method:"DELETE",fullPath:"/v2/core/event_destinations/{id}"}),disable:re({method:"POST",fullPath:"/v2/core/event_destinations/{id}/disable"}),enable:re({method:"POST",fullPath:"/v2/core/event_destinations/{id}/enable"}),ping:re({method:"POST",fullPath:"/v2/core/event_destinations/{id}/ping"})}),Er=o.method,$c=o.extend({retrieve(...t){return Er({method:"GET",fullPath:"/v2/core/events/{id}",transformResponseData:r=>this.addFetchRelatedObjectIfNeeded(r)}).apply(this,t)},list(...t){return Er({method:"GET",fullPath:"/v2/core/events",methodType:"list",transformResponseData:r=>Object.assign(Object.assign({},r),{data:r.data.map(this.addFetchRelatedObjectIfNeeded.bind(this))})}).apply(this,t)},addFetchRelatedObjectIfNeeded(t){return!t.related_object||!t.related_object.url?t:Object.assign(Object.assign({},t),{fetchRelatedObject:()=>Er({method:"GET",fullPath:t.related_object.url}).apply(this,[{stripeAccount:t.context}])})}}),gt=o.method,Rc=o.extend({create:gt({method:"POST",fullPath:"/v1/entitlements/features"}),retrieve:gt({method:"GET",fullPath:"/v1/entitlements/features/{id}"}),update:gt({method:"POST",fullPath:"/v1/entitlements/features/{id}"}),list:gt({method:"GET",fullPath:"/v1/entitlements/features",methodType:"list"})}),he=o.method,Mc=o.extend({create:he({method:"POST",fullPath:"/v1/treasury/financial_accounts"}),retrieve:he({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),update:he({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),list:he({method:"GET",fullPath:"/v1/treasury/financial_accounts",methodType:"list"}),close:he({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/close"}),retrieveFeatures:he({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"}),updateFeatures:he({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"})}),Or=o.method,jc=o.extend({fail:Or({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/fail"}),returnInboundTransfer:Or({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/return"}),succeed:Or({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/succeed"})}),Pt=o.method,Ic=o.extend({create:Pt({method:"POST",fullPath:"/v1/treasury/inbound_transfers"}),retrieve:Pt({method:"GET",fullPath:"/v1/treasury/inbound_transfers/{id}"}),list:Pt({method:"GET",fullPath:"/v1/treasury/inbound_transfers",methodType:"list"}),cancel:Pt({method:"POST",fullPath:"/v1/treasury/inbound_transfers/{inbound_transfer}/cancel"})}),Be=o.method,kc=o.extend({create:Be({method:"POST",fullPath:"/v1/terminal/locations"}),retrieve:Be({method:"GET",fullPath:"/v1/terminal/locations/{location}"}),update:Be({method:"POST",fullPath:"/v1/terminal/locations/{location}"}),list:Be({method:"GET",fullPath:"/v1/terminal/locations",methodType:"list"}),del:Be({method:"DELETE",fullPath:"/v1/terminal/locations/{location}"})}),Gc=o.method,Fc=o.extend({create:Gc({method:"POST",fullPath:"/v1/billing/meter_event_adjustments"})}),Dc=o.method,qc=o.extend({create:Dc({method:"POST",fullPath:"/v2/billing/meter_event_adjustments"})}),Lc=o.method,Uc=o.extend({create:Lc({method:"POST",fullPath:"/v2/billing/meter_event_session"})}),Bc=o.method,Hc=o.extend({create:Bc({method:"POST",fullPath:"/v2/billing/meter_event_stream",host:"meter-events.stripe.com"})}),zc=o.method,Wc=o.extend({create:zc({method:"POST",fullPath:"/v1/billing/meter_events"})}),Vc=o.method,Kc=o.extend({create:Vc({method:"POST",fullPath:"/v2/billing/meter_events"})}),me=o.method,Jc=o.extend({create:me({method:"POST",fullPath:"/v1/billing/meters"}),retrieve:me({method:"GET",fullPath:"/v1/billing/meters/{id}"}),update:me({method:"POST",fullPath:"/v1/billing/meters/{id}"}),list:me({method:"GET",fullPath:"/v1/billing/meters",methodType:"list"}),deactivate:me({method:"POST",fullPath:"/v1/billing/meters/{id}/deactivate"}),listEventSummaries:me({method:"GET",fullPath:"/v1/billing/meters/{id}/event_summaries",methodType:"list"}),reactivate:me({method:"POST",fullPath:"/v1/billing/meters/{id}/reactivate"})}),He=o.method,Yc=o.extend({create:He({method:"POST",fullPath:"/v1/climate/orders"}),retrieve:He({method:"GET",fullPath:"/v1/climate/orders/{order}"}),update:He({method:"POST",fullPath:"/v1/climate/orders/{order}"}),list:He({method:"GET",fullPath:"/v1/climate/orders",methodType:"list"}),cancel:He({method:"POST",fullPath:"/v1/climate/orders/{order}/cancel"})}),xt=o.method,Qc=o.extend({update:xt({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}"}),fail:xt({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/fail"}),post:xt({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/post"}),returnOutboundPayment:xt({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/return"})}),Tt=o.method,Xc=o.extend({create:Tt({method:"POST",fullPath:"/v1/treasury/outbound_payments"}),retrieve:Tt({method:"GET",fullPath:"/v1/treasury/outbound_payments/{id}"}),list:Tt({method:"GET",fullPath:"/v1/treasury/outbound_payments",methodType:"list"}),cancel:Tt({method:"POST",fullPath:"/v1/treasury/outbound_payments/{id}/cancel"})}),bt=o.method,Zc=o.extend({update:bt({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}"}),fail:bt({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/fail"}),post:bt({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/post"}),returnOutboundTransfer:bt({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/return"})}),_t=o.method,ed=o.extend({create:_t({method:"POST",fullPath:"/v1/treasury/outbound_transfers"}),retrieve:_t({method:"GET",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}"}),list:_t({method:"GET",fullPath:"/v1/treasury/outbound_transfers",methodType:"list"}),cancel:_t({method:"POST",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}/cancel"})}),Nr=o.method,td=o.extend({activate:Nr({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/activate"}),deactivate:Nr({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/deactivate"}),reject:Nr({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/reject"})}),wt=o.method,rd=o.extend({create:wt({method:"POST",fullPath:"/v1/issuing/personalization_designs"}),retrieve:wt({method:"GET",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),update:wt({method:"POST",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),list:wt({method:"GET",fullPath:"/v1/issuing/personalization_designs",methodType:"list"})}),Kn=o.method,nd=o.extend({retrieve:Kn({method:"GET",fullPath:"/v1/issuing/physical_bundles/{physical_bundle}"}),list:Kn({method:"GET",fullPath:"/v1/issuing/physical_bundles",methodType:"list"})}),Jn=o.method,ad=o.extend({retrieve:Jn({method:"GET",fullPath:"/v1/climate/products/{product}"}),list:Jn({method:"GET",fullPath:"/v1/climate/products",methodType:"list"})}),sd=o.method,od=o.extend({presentPaymentMethod:sd({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/present_payment_method"})}),K=o.method,id=o.extend({create:K({method:"POST",fullPath:"/v1/terminal/readers"}),retrieve:K({method:"GET",fullPath:"/v1/terminal/readers/{reader}"}),update:K({method:"POST",fullPath:"/v1/terminal/readers/{reader}"}),list:K({method:"GET",fullPath:"/v1/terminal/readers",methodType:"list"}),del:K({method:"DELETE",fullPath:"/v1/terminal/readers/{reader}"}),cancelAction:K({method:"POST",fullPath:"/v1/terminal/readers/{reader}/cancel_action"}),processPaymentIntent:K({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_payment_intent"}),processSetupIntent:K({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_setup_intent"}),refundPayment:K({method:"POST",fullPath:"/v1/terminal/readers/{reader}/refund_payment"}),setReaderDisplay:K({method:"POST",fullPath:"/v1/terminal/readers/{reader}/set_reader_display"})}),ld=o.method,cd=o.extend({create:ld({method:"POST",fullPath:"/v1/test_helpers/treasury/received_credits"})}),Yn=o.method,dd=o.extend({retrieve:Yn({method:"GET",fullPath:"/v1/treasury/received_credits/{id}"}),list:Yn({method:"GET",fullPath:"/v1/treasury/received_credits",methodType:"list"})}),ud=o.method,hd=o.extend({create:ud({method:"POST",fullPath:"/v1/test_helpers/treasury/received_debits"})}),Qn=o.method,md=o.extend({retrieve:Qn({method:"GET",fullPath:"/v1/treasury/received_debits/{id}"}),list:Qn({method:"GET",fullPath:"/v1/treasury/received_debits",methodType:"list"})}),pd=o.method,fd=o.extend({expire:pd({method:"POST",fullPath:"/v1/test_helpers/refunds/{refund}/expire"})}),St=o.method,yd=o.extend({create:St({method:"POST",fullPath:"/v1/tax/registrations"}),retrieve:St({method:"GET",fullPath:"/v1/tax/registrations/{id}"}),update:St({method:"POST",fullPath:"/v1/tax/registrations/{id}"}),list:St({method:"GET",fullPath:"/v1/tax/registrations",methodType:"list"})}),Ar=o.method,vd=o.extend({create:Ar({method:"POST",fullPath:"/v1/reporting/report_runs"}),retrieve:Ar({method:"GET",fullPath:"/v1/reporting/report_runs/{report_run}"}),list:Ar({method:"GET",fullPath:"/v1/reporting/report_runs",methodType:"list"})}),Xn=o.method,gd=o.extend({retrieve:Xn({method:"GET",fullPath:"/v1/reporting/report_types/{report_type}"}),list:Xn({method:"GET",fullPath:"/v1/reporting/report_types",methodType:"list"})}),Cr=o.method,Pd=o.extend({create:Cr({method:"POST",fullPath:"/v1/forwarding/requests"}),retrieve:Cr({method:"GET",fullPath:"/v1/forwarding/requests/{id}"}),list:Cr({method:"GET",fullPath:"/v1/forwarding/requests",methodType:"list"})}),Zn=o.method,xd=o.extend({retrieve:Zn({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs/{scheduled_query_run}"}),list:Zn({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs",methodType:"list"})}),Et=o.method,Td=o.extend({create:Et({method:"POST",fullPath:"/v1/apps/secrets"}),list:Et({method:"GET",fullPath:"/v1/apps/secrets",methodType:"list"}),deleteWhere:Et({method:"POST",fullPath:"/v1/apps/secrets/delete"}),find:Et({method:"GET",fullPath:"/v1/apps/secrets/find"})}),bd=o.method,_d=o.extend({create:bd({method:"POST",fullPath:"/v1/billing_portal/sessions"})}),Se=o.method,wd=o.extend({create:Se({method:"POST",fullPath:"/v1/checkout/sessions"}),retrieve:Se({method:"GET",fullPath:"/v1/checkout/sessions/{session}"}),update:Se({method:"POST",fullPath:"/v1/checkout/sessions/{session}"}),list:Se({method:"GET",fullPath:"/v1/checkout/sessions",methodType:"list"}),expire:Se({method:"POST",fullPath:"/v1/checkout/sessions/{session}/expire"}),listLineItems:Se({method:"GET",fullPath:"/v1/checkout/sessions/{session}/line_items",methodType:"list"})}),ea=o.method,Sd=o.extend({create:ea({method:"POST",fullPath:"/v1/financial_connections/sessions"}),retrieve:ea({method:"GET",fullPath:"/v1/financial_connections/sessions/{session}"})}),ta=o.method,Ed=o.extend({retrieve:ta({method:"GET",fullPath:"/v1/tax/settings"}),update:ta({method:"POST",fullPath:"/v1/tax/settings"})}),ra=o.method,Od=o.extend({retrieve:ra({method:"GET",fullPath:"/v1/climate/suppliers/{supplier}"}),list:ra({method:"GET",fullPath:"/v1/climate/suppliers",methodType:"list"})}),ze=o.method,Nd=o.extend({create:ze({method:"POST",fullPath:"/v1/test_helpers/test_clocks"}),retrieve:ze({method:"GET",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),list:ze({method:"GET",fullPath:"/v1/test_helpers/test_clocks",methodType:"list"}),del:ze({method:"DELETE",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),advance:ze({method:"POST",fullPath:"/v1/test_helpers/test_clocks/{test_clock}/advance"})}),$r=o.method,Ad=o.extend({retrieve:$r({method:"GET",fullPath:"/v1/issuing/tokens/{token}"}),update:$r({method:"POST",fullPath:"/v1/issuing/tokens/{token}"}),list:$r({method:"GET",fullPath:"/v1/issuing/tokens",methodType:"list"})}),na=o.method,Cd=o.extend({retrieve:na({method:"GET",fullPath:"/v1/treasury/transaction_entries/{id}"}),list:na({method:"GET",fullPath:"/v1/treasury/transaction_entries",methodType:"list"})}),Rr=o.method,$d=o.extend({createForceCapture:Rr({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_force_capture"}),createUnlinkedRefund:Rr({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_unlinked_refund"}),refund:Rr({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/{transaction}/refund"})}),aa=o.method,Rd=o.extend({retrieve:aa({method:"GET",fullPath:"/v1/financial_connections/transactions/{transaction}"}),list:aa({method:"GET",fullPath:"/v1/financial_connections/transactions",methodType:"list"})}),Mr=o.method,Md=o.extend({retrieve:Mr({method:"GET",fullPath:"/v1/issuing/transactions/{transaction}"}),update:Mr({method:"POST",fullPath:"/v1/issuing/transactions/{transaction}"}),list:Mr({method:"GET",fullPath:"/v1/issuing/transactions",methodType:"list"})}),Ot=o.method,jd=o.extend({retrieve:Ot({method:"GET",fullPath:"/v1/tax/transactions/{transaction}"}),createFromCalculation:Ot({method:"POST",fullPath:"/v1/tax/transactions/create_from_calculation"}),createReversal:Ot({method:"POST",fullPath:"/v1/tax/transactions/create_reversal"}),listLineItems:Ot({method:"GET",fullPath:"/v1/tax/transactions/{transaction}/line_items",methodType:"list"})}),sa=o.method,Id=o.extend({retrieve:sa({method:"GET",fullPath:"/v1/treasury/transactions/{id}"}),list:sa({method:"GET",fullPath:"/v1/treasury/transactions",methodType:"list"})}),Nt=o.method,kd=o.extend({create:Nt({method:"POST",fullPath:"/v1/radar/value_list_items"}),retrieve:Nt({method:"GET",fullPath:"/v1/radar/value_list_items/{item}"}),list:Nt({method:"GET",fullPath:"/v1/radar/value_list_items",methodType:"list"}),del:Nt({method:"DELETE",fullPath:"/v1/radar/value_list_items/{item}"})}),We=o.method,Gd=o.extend({create:We({method:"POST",fullPath:"/v1/radar/value_lists"}),retrieve:We({method:"GET",fullPath:"/v1/radar/value_lists/{value_list}"}),update:We({method:"POST",fullPath:"/v1/radar/value_lists/{value_list}"}),list:We({method:"GET",fullPath:"/v1/radar/value_lists",methodType:"list"}),del:We({method:"DELETE",fullPath:"/v1/radar/value_lists/{value_list}"})}),oa=o.method,Fd=o.extend({retrieve:oa({method:"GET",fullPath:"/v1/identity/verification_reports/{report}"}),list:oa({method:"GET",fullPath:"/v1/identity/verification_reports",methodType:"list"})}),Ee=o.method,Dd=o.extend({create:Ee({method:"POST",fullPath:"/v1/identity/verification_sessions"}),retrieve:Ee({method:"GET",fullPath:"/v1/identity/verification_sessions/{session}"}),update:Ee({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}"}),list:Ee({method:"GET",fullPath:"/v1/identity/verification_sessions",methodType:"list"}),cancel:Ee({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/cancel"}),redact:Ee({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/redact"})}),j=o.method,ia=o.extend({create:j({method:"POST",fullPath:"/v1/accounts"}),retrieve(t,...e){return typeof t=="string"?j({method:"GET",fullPath:"/v1/accounts/{id}"}).apply(this,[t,...e]):(t==null&&[].shift.apply([t,...e]),j({method:"GET",fullPath:"/v1/account"}).apply(this,[t,...e]))},update:j({method:"POST",fullPath:"/v1/accounts/{account}"}),list:j({method:"GET",fullPath:"/v1/accounts",methodType:"list"}),del:j({method:"DELETE",fullPath:"/v1/accounts/{account}"}),createExternalAccount:j({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts"}),createLoginLink:j({method:"POST",fullPath:"/v1/accounts/{account}/login_links"}),createPerson:j({method:"POST",fullPath:"/v1/accounts/{account}/persons"}),deleteExternalAccount:j({method:"DELETE",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),deletePerson:j({method:"DELETE",fullPath:"/v1/accounts/{account}/persons/{person}"}),listCapabilities:j({method:"GET",fullPath:"/v1/accounts/{account}/capabilities",methodType:"list"}),listExternalAccounts:j({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts",methodType:"list"}),listPersons:j({method:"GET",fullPath:"/v1/accounts/{account}/persons",methodType:"list"}),reject:j({method:"POST",fullPath:"/v1/accounts/{account}/reject"}),retrieveCurrent:j({method:"GET",fullPath:"/v1/account"}),retrieveCapability:j({method:"GET",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),retrieveExternalAccount:j({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),retrievePerson:j({method:"GET",fullPath:"/v1/accounts/{account}/persons/{person}"}),updateCapability:j({method:"POST",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),updateExternalAccount:j({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),updatePerson:j({method:"POST",fullPath:"/v1/accounts/{account}/persons/{person}"})}),qd=o.method,Ld=o.extend({create:qd({method:"POST",fullPath:"/v1/account_links"})}),Ud=o.method,Bd=o.extend({create:Ud({method:"POST",fullPath:"/v1/account_sessions"})}),At=o.method,Hd=o.extend({create:At({method:"POST",fullPath:"/v1/apple_pay/domains"}),retrieve:At({method:"GET",fullPath:"/v1/apple_pay/domains/{domain}"}),list:At({method:"GET",fullPath:"/v1/apple_pay/domains",methodType:"list"}),del:At({method:"DELETE",fullPath:"/v1/apple_pay/domains/{domain}"})}),Oe=o.method,zd=o.extend({retrieve:Oe({method:"GET",fullPath:"/v1/application_fees/{id}"}),list:Oe({method:"GET",fullPath:"/v1/application_fees",methodType:"list"}),createRefund:Oe({method:"POST",fullPath:"/v1/application_fees/{id}/refunds"}),listRefunds:Oe({method:"GET",fullPath:"/v1/application_fees/{id}/refunds",methodType:"list"}),retrieveRefund:Oe({method:"GET",fullPath:"/v1/application_fees/{fee}/refunds/{id}"}),updateRefund:Oe({method:"POST",fullPath:"/v1/application_fees/{fee}/refunds/{id}"})}),Wd=o.method,Vd=o.extend({retrieve:Wd({method:"GET",fullPath:"/v1/balance"})}),la=o.method,Kd=o.extend({retrieve:la({method:"GET",fullPath:"/v1/balance_transactions/{id}"}),list:la({method:"GET",fullPath:"/v1/balance_transactions",methodType:"list"})}),Ne=o.method,Jd=o.extend({create:Ne({method:"POST",fullPath:"/v1/charges"}),retrieve:Ne({method:"GET",fullPath:"/v1/charges/{charge}"}),update:Ne({method:"POST",fullPath:"/v1/charges/{charge}"}),list:Ne({method:"GET",fullPath:"/v1/charges",methodType:"list"}),capture:Ne({method:"POST",fullPath:"/v1/charges/{charge}/capture"}),search:Ne({method:"GET",fullPath:"/v1/charges/search",methodType:"search"})}),Yd=o.method,Qd=o.extend({retrieve:Yd({method:"GET",fullPath:"/v1/confirmation_tokens/{confirmation_token}"})}),ca=o.method,Xd=o.extend({retrieve:ca({method:"GET",fullPath:"/v1/country_specs/{country}"}),list:ca({method:"GET",fullPath:"/v1/country_specs",methodType:"list"})}),Ve=o.method,Zd=o.extend({create:Ve({method:"POST",fullPath:"/v1/coupons"}),retrieve:Ve({method:"GET",fullPath:"/v1/coupons/{coupon}"}),update:Ve({method:"POST",fullPath:"/v1/coupons/{coupon}"}),list:Ve({method:"GET",fullPath:"/v1/coupons",methodType:"list"}),del:Ve({method:"DELETE",fullPath:"/v1/coupons/{coupon}"})}),ne=o.method,eu=o.extend({create:ne({method:"POST",fullPath:"/v1/credit_notes"}),retrieve:ne({method:"GET",fullPath:"/v1/credit_notes/{id}"}),update:ne({method:"POST",fullPath:"/v1/credit_notes/{id}"}),list:ne({method:"GET",fullPath:"/v1/credit_notes",methodType:"list"}),listLineItems:ne({method:"GET",fullPath:"/v1/credit_notes/{credit_note}/lines",methodType:"list"}),listPreviewLineItems:ne({method:"GET",fullPath:"/v1/credit_notes/preview/lines",methodType:"list"}),preview:ne({method:"GET",fullPath:"/v1/credit_notes/preview"}),voidCreditNote:ne({method:"POST",fullPath:"/v1/credit_notes/{id}/void"})}),tu=o.method,ru=o.extend({create:tu({method:"POST",fullPath:"/v1/customer_sessions"})}),E=o.method,nu=o.extend({create:E({method:"POST",fullPath:"/v1/customers"}),retrieve:E({method:"GET",fullPath:"/v1/customers/{customer}"}),update:E({method:"POST",fullPath:"/v1/customers/{customer}"}),list:E({method:"GET",fullPath:"/v1/customers",methodType:"list"}),del:E({method:"DELETE",fullPath:"/v1/customers/{customer}"}),createBalanceTransaction:E({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions"}),createFundingInstructions:E({method:"POST",fullPath:"/v1/customers/{customer}/funding_instructions"}),createSource:E({method:"POST",fullPath:"/v1/customers/{customer}/sources"}),createTaxId:E({method:"POST",fullPath:"/v1/customers/{customer}/tax_ids"}),deleteDiscount:E({method:"DELETE",fullPath:"/v1/customers/{customer}/discount"}),deleteSource:E({method:"DELETE",fullPath:"/v1/customers/{customer}/sources/{id}"}),deleteTaxId:E({method:"DELETE",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),listBalanceTransactions:E({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions",methodType:"list"}),listCashBalanceTransactions:E({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions",methodType:"list"}),listPaymentMethods:E({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods",methodType:"list"}),listSources:E({method:"GET",fullPath:"/v1/customers/{customer}/sources",methodType:"list"}),listTaxIds:E({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids",methodType:"list"}),retrieveBalanceTransaction:E({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),retrieveCashBalance:E({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance"}),retrieveCashBalanceTransaction:E({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions/{transaction}"}),retrievePaymentMethod:E({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods/{payment_method}"}),retrieveSource:E({method:"GET",fullPath:"/v1/customers/{customer}/sources/{id}"}),retrieveTaxId:E({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),search:E({method:"GET",fullPath:"/v1/customers/search",methodType:"search"}),updateBalanceTransaction:E({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),updateCashBalance:E({method:"POST",fullPath:"/v1/customers/{customer}/cash_balance"}),updateSource:E({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}"}),verifySource:E({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}/verify"})}),Ct=o.method,au=o.extend({retrieve:Ct({method:"GET",fullPath:"/v1/disputes/{dispute}"}),update:Ct({method:"POST",fullPath:"/v1/disputes/{dispute}"}),list:Ct({method:"GET",fullPath:"/v1/disputes",methodType:"list"}),close:Ct({method:"POST",fullPath:"/v1/disputes/{dispute}/close"})}),da=o.method,su=o.extend({create:da({method:"POST",fullPath:"/v1/ephemeral_keys",validator:(t,e)=>{if(!e.headers||!e.headers["Stripe-Version"])throw new Error("Passing apiVersion in a separate options hash is required to create an ephemeral key. See https://stripe.com/docs/api/versioning?lang=node")}}),del:da({method:"DELETE",fullPath:"/v1/ephemeral_keys/{key}"})}),ua=o.method,ou=o.extend({retrieve:ua({method:"GET",fullPath:"/v1/events/{id}"}),list:ua({method:"GET",fullPath:"/v1/events",methodType:"list"})}),ha=o.method,iu=o.extend({retrieve:ha({method:"GET",fullPath:"/v1/exchange_rates/{rate_id}"}),list:ha({method:"GET",fullPath:"/v1/exchange_rates",methodType:"list"})}),$t=o.method,lu=o.extend({create:$t({method:"POST",fullPath:"/v1/file_links"}),retrieve:$t({method:"GET",fullPath:"/v1/file_links/{link}"}),update:$t({method:"POST",fullPath:"/v1/file_links/{link}"}),list:$t({method:"GET",fullPath:"/v1/file_links",methodType:"list"})}),cu=(t,e,r)=>{const n=(Math.round(Math.random()*1e16)+Math.round(Math.random()*1e16)).toString();r["Content-Type"]=`multipart/form-data; boundary=${n}`;const a=new TextEncoder;let s=new Uint8Array(0);const i=a.encode(`\r
`);function h(d){const m=s,u=d instanceof Uint8Array?d:new Uint8Array(a.encode(d));s=new Uint8Array(m.length+u.length+2),s.set(m),s.set(u,m.length),s.set(i,s.length-2)}function c(d){return`"${d.replace(/"|"/g,"%22").replace(/\r\n|\r|\n/g," ")}"`}const p=ql(e);for(const d in p){if(!Object.prototype.hasOwnProperty.call(p,d))continue;const m=p[d];if(h(`--${n}`),Object.prototype.hasOwnProperty.call(m,"data")){const u=m;h(`Content-Disposition: form-data; name=${c(d)}; filename=${c(u.name||"blob")}`),h(`Content-Type: ${u.type||"application/octet-stream"}`),h(""),h(u.data)}else h(`Content-Disposition: form-data; name=${c(d)}`),h(""),h(m)}return h(`--${n}--`),s};function du(t,e,r,n){if(e=e||{},t!=="POST")return n(null,er(e));this._stripe._platformFunctions.tryBufferData(e).then(a=>{const s=cu(t,a,r);return n(null,s)}).catch(a=>n(a,null))}const jr=o.method,uu=o.extend({create:jr({method:"POST",fullPath:"/v1/files",headers:{"Content-Type":"multipart/form-data"},host:"files.stripe.com"}),retrieve:jr({method:"GET",fullPath:"/v1/files/{file}"}),list:jr({method:"GET",fullPath:"/v1/files",methodType:"list"}),requestDataProcessor:du}),Ke=o.method,hu=o.extend({create:Ke({method:"POST",fullPath:"/v1/invoiceitems"}),retrieve:Ke({method:"GET",fullPath:"/v1/invoiceitems/{invoiceitem}"}),update:Ke({method:"POST",fullPath:"/v1/invoiceitems/{invoiceitem}"}),list:Ke({method:"GET",fullPath:"/v1/invoiceitems",methodType:"list"}),del:Ke({method:"DELETE",fullPath:"/v1/invoiceitems/{invoiceitem}"})}),Rt=o.method,mu=o.extend({retrieve:Rt({method:"GET",fullPath:"/v1/invoice_rendering_templates/{template}"}),list:Rt({method:"GET",fullPath:"/v1/invoice_rendering_templates",methodType:"list"}),archive:Rt({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/archive"}),unarchive:Rt({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/unarchive"})}),G=o.method,pu=o.extend({create:G({method:"POST",fullPath:"/v1/invoices"}),retrieve:G({method:"GET",fullPath:"/v1/invoices/{invoice}"}),update:G({method:"POST",fullPath:"/v1/invoices/{invoice}"}),list:G({method:"GET",fullPath:"/v1/invoices",methodType:"list"}),del:G({method:"DELETE",fullPath:"/v1/invoices/{invoice}"}),addLines:G({method:"POST",fullPath:"/v1/invoices/{invoice}/add_lines"}),createPreview:G({method:"POST",fullPath:"/v1/invoices/create_preview"}),finalizeInvoice:G({method:"POST",fullPath:"/v1/invoices/{invoice}/finalize"}),listLineItems:G({method:"GET",fullPath:"/v1/invoices/{invoice}/lines",methodType:"list"}),listUpcomingLines:G({method:"GET",fullPath:"/v1/invoices/upcoming/lines",methodType:"list"}),markUncollectible:G({method:"POST",fullPath:"/v1/invoices/{invoice}/mark_uncollectible"}),pay:G({method:"POST",fullPath:"/v1/invoices/{invoice}/pay"}),removeLines:G({method:"POST",fullPath:"/v1/invoices/{invoice}/remove_lines"}),retrieveUpcoming:G({method:"GET",fullPath:"/v1/invoices/upcoming"}),search:G({method:"GET",fullPath:"/v1/invoices/search",methodType:"search"}),sendInvoice:G({method:"POST",fullPath:"/v1/invoices/{invoice}/send"}),updateLines:G({method:"POST",fullPath:"/v1/invoices/{invoice}/update_lines"}),updateLineItem:G({method:"POST",fullPath:"/v1/invoices/{invoice}/lines/{line_item_id}"}),voidInvoice:G({method:"POST",fullPath:"/v1/invoices/{invoice}/void"})}),fu=o.method,yu=o.extend({retrieve:fu({method:"GET",fullPath:"/v1/mandates/{mandate}"})}),ma=o.method,Ir="connect.stripe.com",vu=o.extend({basePath:"/",authorizeUrl(t,e){t=t||{},e=e||{};let r="oauth/authorize";return e.express&&(r=`express/${r}`),t.response_type||(t.response_type="code"),t.client_id||(t.client_id=this._stripe.getClientId()),t.scope||(t.scope="read_write"),`https://${Ir}/${r}?${er(t)}`},token:ma({method:"POST",path:"oauth/token",host:Ir}),deauthorize(t,...e){return t.client_id||(t.client_id=this._stripe.getClientId()),ma({method:"POST",path:"oauth/deauthorize",host:Ir}).apply(this,[t,...e])}}),W=o.method,gu=o.extend({create:W({method:"POST",fullPath:"/v1/payment_intents"}),retrieve:W({method:"GET",fullPath:"/v1/payment_intents/{intent}"}),update:W({method:"POST",fullPath:"/v1/payment_intents/{intent}"}),list:W({method:"GET",fullPath:"/v1/payment_intents",methodType:"list"}),applyCustomerBalance:W({method:"POST",fullPath:"/v1/payment_intents/{intent}/apply_customer_balance"}),cancel:W({method:"POST",fullPath:"/v1/payment_intents/{intent}/cancel"}),capture:W({method:"POST",fullPath:"/v1/payment_intents/{intent}/capture"}),confirm:W({method:"POST",fullPath:"/v1/payment_intents/{intent}/confirm"}),incrementAuthorization:W({method:"POST",fullPath:"/v1/payment_intents/{intent}/increment_authorization"}),search:W({method:"GET",fullPath:"/v1/payment_intents/search",methodType:"search"}),verifyMicrodeposits:W({method:"POST",fullPath:"/v1/payment_intents/{intent}/verify_microdeposits"})}),Je=o.method,Pu=o.extend({create:Je({method:"POST",fullPath:"/v1/payment_links"}),retrieve:Je({method:"GET",fullPath:"/v1/payment_links/{payment_link}"}),update:Je({method:"POST",fullPath:"/v1/payment_links/{payment_link}"}),list:Je({method:"GET",fullPath:"/v1/payment_links",methodType:"list"}),listLineItems:Je({method:"GET",fullPath:"/v1/payment_links/{payment_link}/line_items",methodType:"list"})}),Mt=o.method,xu=o.extend({create:Mt({method:"POST",fullPath:"/v1/payment_method_configurations"}),retrieve:Mt({method:"GET",fullPath:"/v1/payment_method_configurations/{configuration}"}),update:Mt({method:"POST",fullPath:"/v1/payment_method_configurations/{configuration}"}),list:Mt({method:"GET",fullPath:"/v1/payment_method_configurations",methodType:"list"})}),Ye=o.method,Tu=o.extend({create:Ye({method:"POST",fullPath:"/v1/payment_method_domains"}),retrieve:Ye({method:"GET",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),update:Ye({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),list:Ye({method:"GET",fullPath:"/v1/payment_method_domains",methodType:"list"}),validate:Ye({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}/validate"})}),Ae=o.method,bu=o.extend({create:Ae({method:"POST",fullPath:"/v1/payment_methods"}),retrieve:Ae({method:"GET",fullPath:"/v1/payment_methods/{payment_method}"}),update:Ae({method:"POST",fullPath:"/v1/payment_methods/{payment_method}"}),list:Ae({method:"GET",fullPath:"/v1/payment_methods",methodType:"list"}),attach:Ae({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/attach"}),detach:Ae({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/detach"})}),Ce=o.method,_u=o.extend({create:Ce({method:"POST",fullPath:"/v1/payouts"}),retrieve:Ce({method:"GET",fullPath:"/v1/payouts/{payout}"}),update:Ce({method:"POST",fullPath:"/v1/payouts/{payout}"}),list:Ce({method:"GET",fullPath:"/v1/payouts",methodType:"list"}),cancel:Ce({method:"POST",fullPath:"/v1/payouts/{payout}/cancel"}),reverse:Ce({method:"POST",fullPath:"/v1/payouts/{payout}/reverse"})}),Qe=o.method,wu=o.extend({create:Qe({method:"POST",fullPath:"/v1/plans"}),retrieve:Qe({method:"GET",fullPath:"/v1/plans/{plan}"}),update:Qe({method:"POST",fullPath:"/v1/plans/{plan}"}),list:Qe({method:"GET",fullPath:"/v1/plans",methodType:"list"}),del:Qe({method:"DELETE",fullPath:"/v1/plans/{plan}"})}),Xe=o.method,Su=o.extend({create:Xe({method:"POST",fullPath:"/v1/prices"}),retrieve:Xe({method:"GET",fullPath:"/v1/prices/{price}"}),update:Xe({method:"POST",fullPath:"/v1/prices/{price}"}),list:Xe({method:"GET",fullPath:"/v1/prices",methodType:"list"}),search:Xe({method:"GET",fullPath:"/v1/prices/search",methodType:"search"})}),J=o.method,Eu=o.extend({create:J({method:"POST",fullPath:"/v1/products"}),retrieve:J({method:"GET",fullPath:"/v1/products/{id}"}),update:J({method:"POST",fullPath:"/v1/products/{id}"}),list:J({method:"GET",fullPath:"/v1/products",methodType:"list"}),del:J({method:"DELETE",fullPath:"/v1/products/{id}"}),createFeature:J({method:"POST",fullPath:"/v1/products/{product}/features"}),deleteFeature:J({method:"DELETE",fullPath:"/v1/products/{product}/features/{id}"}),listFeatures:J({method:"GET",fullPath:"/v1/products/{product}/features",methodType:"list"}),retrieveFeature:J({method:"GET",fullPath:"/v1/products/{product}/features/{id}"}),search:J({method:"GET",fullPath:"/v1/products/search",methodType:"search"})}),jt=o.method,Ou=o.extend({create:jt({method:"POST",fullPath:"/v1/promotion_codes"}),retrieve:jt({method:"GET",fullPath:"/v1/promotion_codes/{promotion_code}"}),update:jt({method:"POST",fullPath:"/v1/promotion_codes/{promotion_code}"}),list:jt({method:"GET",fullPath:"/v1/promotion_codes",methodType:"list"})}),Y=o.method,Nu=o.extend({create:Y({method:"POST",fullPath:"/v1/quotes"}),retrieve:Y({method:"GET",fullPath:"/v1/quotes/{quote}"}),update:Y({method:"POST",fullPath:"/v1/quotes/{quote}"}),list:Y({method:"GET",fullPath:"/v1/quotes",methodType:"list"}),accept:Y({method:"POST",fullPath:"/v1/quotes/{quote}/accept"}),cancel:Y({method:"POST",fullPath:"/v1/quotes/{quote}/cancel"}),finalizeQuote:Y({method:"POST",fullPath:"/v1/quotes/{quote}/finalize"}),listComputedUpfrontLineItems:Y({method:"GET",fullPath:"/v1/quotes/{quote}/computed_upfront_line_items",methodType:"list"}),listLineItems:Y({method:"GET",fullPath:"/v1/quotes/{quote}/line_items",methodType:"list"}),pdf:Y({method:"GET",fullPath:"/v1/quotes/{quote}/pdf",host:"files.stripe.com",streaming:!0})}),Ze=o.method,Au=o.extend({create:Ze({method:"POST",fullPath:"/v1/refunds"}),retrieve:Ze({method:"GET",fullPath:"/v1/refunds/{refund}"}),update:Ze({method:"POST",fullPath:"/v1/refunds/{refund}"}),list:Ze({method:"GET",fullPath:"/v1/refunds",methodType:"list"}),cancel:Ze({method:"POST",fullPath:"/v1/refunds/{refund}/cancel"})}),kr=o.method,Cu=o.extend({retrieve:kr({method:"GET",fullPath:"/v1/reviews/{review}"}),list:kr({method:"GET",fullPath:"/v1/reviews",methodType:"list"}),approve:kr({method:"POST",fullPath:"/v1/reviews/{review}/approve"})}),$u=o.method,Ru=o.extend({list:$u({method:"GET",fullPath:"/v1/setup_attempts",methodType:"list"})}),pe=o.method,Mu=o.extend({create:pe({method:"POST",fullPath:"/v1/setup_intents"}),retrieve:pe({method:"GET",fullPath:"/v1/setup_intents/{intent}"}),update:pe({method:"POST",fullPath:"/v1/setup_intents/{intent}"}),list:pe({method:"GET",fullPath:"/v1/setup_intents",methodType:"list"}),cancel:pe({method:"POST",fullPath:"/v1/setup_intents/{intent}/cancel"}),confirm:pe({method:"POST",fullPath:"/v1/setup_intents/{intent}/confirm"}),verifyMicrodeposits:pe({method:"POST",fullPath:"/v1/setup_intents/{intent}/verify_microdeposits"})}),It=o.method,ju=o.extend({create:It({method:"POST",fullPath:"/v1/shipping_rates"}),retrieve:It({method:"GET",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),update:It({method:"POST",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),list:It({method:"GET",fullPath:"/v1/shipping_rates",methodType:"list"})}),et=o.method,Iu=o.extend({create:et({method:"POST",fullPath:"/v1/sources"}),retrieve:et({method:"GET",fullPath:"/v1/sources/{source}"}),update:et({method:"POST",fullPath:"/v1/sources/{source}"}),listSourceTransactions:et({method:"GET",fullPath:"/v1/sources/{source}/source_transactions",methodType:"list"}),verify:et({method:"POST",fullPath:"/v1/sources/{source}/verify"})}),fe=o.method,ku=o.extend({create:fe({method:"POST",fullPath:"/v1/subscription_items"}),retrieve:fe({method:"GET",fullPath:"/v1/subscription_items/{item}"}),update:fe({method:"POST",fullPath:"/v1/subscription_items/{item}"}),list:fe({method:"GET",fullPath:"/v1/subscription_items",methodType:"list"}),del:fe({method:"DELETE",fullPath:"/v1/subscription_items/{item}"}),createUsageRecord:fe({method:"POST",fullPath:"/v1/subscription_items/{subscription_item}/usage_records"}),listUsageRecordSummaries:fe({method:"GET",fullPath:"/v1/subscription_items/{subscription_item}/usage_record_summaries",methodType:"list"})}),$e=o.method,Gu=o.extend({create:$e({method:"POST",fullPath:"/v1/subscription_schedules"}),retrieve:$e({method:"GET",fullPath:"/v1/subscription_schedules/{schedule}"}),update:$e({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}"}),list:$e({method:"GET",fullPath:"/v1/subscription_schedules",methodType:"list"}),cancel:$e({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/cancel"}),release:$e({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/release"})}),ae=o.method,Fu=o.extend({create:ae({method:"POST",fullPath:"/v1/subscriptions"}),retrieve:ae({method:"GET",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),update:ae({method:"POST",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),list:ae({method:"GET",fullPath:"/v1/subscriptions",methodType:"list"}),cancel:ae({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),deleteDiscount:ae({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}/discount"}),resume:ae({method:"POST",fullPath:"/v1/subscriptions/{subscription}/resume"}),search:ae({method:"GET",fullPath:"/v1/subscriptions/search",methodType:"search"})}),pa=o.method,Du=o.extend({retrieve:pa({method:"GET",fullPath:"/v1/tax_codes/{id}"}),list:pa({method:"GET",fullPath:"/v1/tax_codes",methodType:"list"})}),kt=o.method,qu=o.extend({create:kt({method:"POST",fullPath:"/v1/tax_ids"}),retrieve:kt({method:"GET",fullPath:"/v1/tax_ids/{id}"}),list:kt({method:"GET",fullPath:"/v1/tax_ids",methodType:"list"}),del:kt({method:"DELETE",fullPath:"/v1/tax_ids/{id}"})}),Gt=o.method,Lu=o.extend({create:Gt({method:"POST",fullPath:"/v1/tax_rates"}),retrieve:Gt({method:"GET",fullPath:"/v1/tax_rates/{tax_rate}"}),update:Gt({method:"POST",fullPath:"/v1/tax_rates/{tax_rate}"}),list:Gt({method:"GET",fullPath:"/v1/tax_rates",methodType:"list"})}),fa=o.method,Uu=o.extend({create:fa({method:"POST",fullPath:"/v1/tokens"}),retrieve:fa({method:"GET",fullPath:"/v1/tokens/{token}"})}),tt=o.method,Bu=o.extend({create:tt({method:"POST",fullPath:"/v1/topups"}),retrieve:tt({method:"GET",fullPath:"/v1/topups/{topup}"}),update:tt({method:"POST",fullPath:"/v1/topups/{topup}"}),list:tt({method:"GET",fullPath:"/v1/topups",methodType:"list"}),cancel:tt({method:"POST",fullPath:"/v1/topups/{topup}/cancel"})}),se=o.method,Hu=o.extend({create:se({method:"POST",fullPath:"/v1/transfers"}),retrieve:se({method:"GET",fullPath:"/v1/transfers/{transfer}"}),update:se({method:"POST",fullPath:"/v1/transfers/{transfer}"}),list:se({method:"GET",fullPath:"/v1/transfers",methodType:"list"}),createReversal:se({method:"POST",fullPath:"/v1/transfers/{id}/reversals"}),listReversals:se({method:"GET",fullPath:"/v1/transfers/{id}/reversals",methodType:"list"}),retrieveReversal:se({method:"GET",fullPath:"/v1/transfers/{transfer}/reversals/{id}"}),updateReversal:se({method:"POST",fullPath:"/v1/transfers/{transfer}/reversals/{id}"})}),rt=o.method,zu=o.extend({create:rt({method:"POST",fullPath:"/v1/webhook_endpoints"}),retrieve:rt({method:"GET",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),update:rt({method:"POST",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),list:rt({method:"GET",fullPath:"/v1/webhook_endpoints",methodType:"list"}),del:rt({method:"DELETE",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"})}),Wu=$("apps",{Secrets:Td}),Vu=$("billing",{Alerts:ic,CreditBalanceSummary:Tc,CreditBalanceTransactions:bc,CreditGrants:_c,MeterEventAdjustments:Fc,MeterEvents:Wc,Meters:Jc}),Ku=$("billingPortal",{Configurations:pc,Sessions:_d}),Ju=$("checkout",{Sessions:wd}),Yu=$("climate",{Orders:Yc,Products:ad,Suppliers:Od}),Qu=$("entitlements",{ActiveEntitlements:oc,Features:Rc}),Xu=$("financialConnections",{Accounts:sc,Sessions:Sd,Transactions:Rd}),Zu=$("forwarding",{Requests:Pd}),eh=$("identity",{VerificationReports:Fd,VerificationSessions:Dd}),th=$("issuing",{Authorizations:cc,Cardholders:uc,Cards:mc,Disputes:Nc,PersonalizationDesigns:rd,PhysicalBundles:nd,Tokens:Ad,Transactions:Md}),rh=$("radar",{EarlyFraudWarnings:Ac,ValueListItems:kd,ValueLists:Gd}),nh=$("reporting",{ReportRuns:vd,ReportTypes:gd}),ah=$("sigma",{ScheduledQueryRuns:xd}),sh=$("tax",{Calculations:dc,Registrations:yd,Settings:Ed,Transactions:jd}),oh=$("terminal",{Configurations:fc,ConnectionTokens:Pc,Locations:kc,Readers:id}),ih=$("testHelpers",{ConfirmationTokens:vc,Customers:Ec,Refunds:fd,TestClocks:Nd,Issuing:$("issuing",{Authorizations:lc,Cards:hc,PersonalizationDesigns:td,Transactions:$d}),Terminal:$("terminal",{Readers:od}),Treasury:$("treasury",{InboundTransfers:jc,OutboundPayments:Qc,OutboundTransfers:Zc,ReceivedCredits:cd,ReceivedDebits:hd})}),lh=$("treasury",{CreditReversals:wc,DebitReversals:Oc,FinancialAccounts:Mc,InboundTransfers:Ic,OutboundPayments:Xc,OutboundTransfers:ed,ReceivedCredits:dd,ReceivedDebits:md,TransactionEntries:Cd,Transactions:Id}),ch=$("v2",{Billing:$("billing",{MeterEventAdjustments:qc,MeterEventSession:Uc,MeterEventStream:Hc,MeterEvents:Kc}),Core:$("core",{EventDestinations:Cc,Events:$c})}),Ft=Object.freeze(Object.defineProperty({__proto__:null,Account:ia,AccountLinks:Ld,AccountSessions:Bd,Accounts:ia,ApplePayDomains:Hd,ApplicationFees:zd,Apps:Wu,Balance:Vd,BalanceTransactions:Kd,Billing:Vu,BillingPortal:Ku,Charges:Jd,Checkout:Ju,Climate:Yu,ConfirmationTokens:Qd,CountrySpecs:Xd,Coupons:Zd,CreditNotes:eu,CustomerSessions:ru,Customers:nu,Disputes:au,Entitlements:Qu,EphemeralKeys:su,Events:ou,ExchangeRates:iu,FileLinks:lu,Files:uu,FinancialConnections:Xu,Forwarding:Zu,Identity:eh,InvoiceItems:hu,InvoiceRenderingTemplates:mu,Invoices:pu,Issuing:th,Mandates:yu,OAuth:vu,PaymentIntents:gu,PaymentLinks:Pu,PaymentMethodConfigurations:xu,PaymentMethodDomains:Tu,PaymentMethods:bu,Payouts:_u,Plans:wu,Prices:Su,Products:Eu,PromotionCodes:Ou,Quotes:Nu,Radar:rh,Refunds:Au,Reporting:nh,Reviews:Cu,SetupAttempts:Ru,SetupIntents:Mu,ShippingRates:ju,Sigma:ah,Sources:Iu,SubscriptionItems:ku,SubscriptionSchedules:Gu,Subscriptions:Fu,Tax:sh,TaxCodes:Du,TaxIds:qu,TaxRates:Lu,Terminal:oh,TestHelpers:ih,Tokens:Uu,Topups:Bu,Transfers:Hu,Treasury:lh,V2:ch,WebhookEndpoints:zu},Symbol.toStringTag,{value:"Module"})),ya="api.stripe.com",va="443",ga="/v1/",Pa=nc,xa=8e4,Ta=5,ba=.5,dh=["name","version","url","partner_id"],_a=["authenticator","apiVersion","typescript","maxNetworkRetries","httpAgent","httpClient","timeout","host","port","protocol","telemetry","appInfo","stripeAccount","stripeContext"],uh=t=>new it(t,o.MAX_BUFFERED_REQUEST_METRICS);function hh(t,e=uh){n.PACKAGE_VERSION="17.7.0",n.USER_AGENT=Object.assign({bindings_version:n.PACKAGE_VERSION,lang:"node",publisher:"stripe",uname:null,typescript:!1},Ll()),n.StripeResource=o,n.resources=Ft,n.HttpClient=z,n.HttpClientResponse=Ea,n.CryptoProvider=Oa;function r(a=t){return Hn(a)}n.webhooks=Object.assign(r,Hn(t));function n(a,s={}){if(!(this instanceof n))return new n(a,s);const i=this._getPropsFromConfig(s);this._platformFunctions=t,Object.defineProperty(this,"_emitter",{value:this._platformFunctions.createEmitter(),enumerable:!1,configurable:!1,writable:!1}),this.VERSION=n.PACKAGE_VERSION,this.on=this._emitter.on.bind(this._emitter),this.once=this._emitter.once.bind(this._emitter),this.off=this._emitter.removeListener.bind(this._emitter);const h=i.httpAgent||null;this._api={host:i.host||ya,port:i.port||va,protocol:i.protocol||"https",basePath:ga,version:i.apiVersion||Pa,timeout:Tr("timeout",i.timeout,xa),maxNetworkRetries:Tr("maxNetworkRetries",i.maxNetworkRetries,2),agent:h,httpClient:i.httpClient||(h?this._platformFunctions.createNodeHttpClient(h):this._platformFunctions.createDefaultHttpClient()),dev:!1,stripeAccount:i.stripeAccount||null,stripeContext:i.stripeContext||null};const c=i.typescript||!1;c!==n.USER_AGENT.typescript&&(n.USER_AGENT.typescript=c),i.appInfo&&this._setAppInfo(i.appInfo),this._prepResources(),this._setAuthenticator(a,i.authenticator),this.errors=vn,this.webhooks=r(),this._prevRequestMetrics=[],this._enableTelemetry=i.telemetry!==!1,this._requestSender=e(this),this.StripeResource=n.StripeResource}return n.errors=vn,n.createNodeHttpClient=t.createNodeHttpClient,n.createFetchHttpClient=t.createFetchHttpClient,n.createNodeCryptoProvider=t.createNodeCryptoProvider,n.createSubtleCryptoProvider=t.createSubtleCryptoProvider,n.prototype={_appInfo:void 0,on:null,off:null,once:null,VERSION:null,StripeResource:null,webhooks:null,errors:null,_api:null,_prevRequestMetrics:null,_emitter:null,_enableTelemetry:null,_requestSender:null,_platformFunctions:null,rawRequest(a,s,i,h){return this._requestSender._rawRequest(a,s,i,h)},_setAuthenticator(a,s){if(a&&s)throw new Error("Can't specify both apiKey and authenticator");if(!a&&!s)throw new Error("Neither apiKey nor config.authenticator provided");this._authenticator=a?Kr(a):s},_setAppInfo(a){if(a&&typeof a!="object")throw new Error("AppInfo must be an object.");if(a&&!a.name)throw new Error("AppInfo.name is required");a=a||{},this._appInfo=dh.reduce((s,i)=>(typeof a[i]=="string"&&(s=s||{},s[i]=a[i]),s),void 0)},_setApiField(a,s){this._api[a]=s},getApiField(a){return this._api[a]},setClientId(a){this._clientId=a},getClientId(){return this._clientId},getConstant:a=>{switch(a){case"DEFAULT_HOST":return ya;case"DEFAULT_PORT":return va;case"DEFAULT_BASE_PATH":return ga;case"DEFAULT_API_VERSION":return Pa;case"DEFAULT_TIMEOUT":return xa;case"MAX_NETWORK_RETRY_DELAY_SEC":return Ta;case"INITIAL_NETWORK_RETRY_DELAY_SEC":return ba}return n[a]},getMaxNetworkRetries(){return this.getApiField("maxNetworkRetries")},_setApiNumberField(a,s,i){const h=Tr(a,s,i);this._setApiField(a,h)},getMaxNetworkRetryDelay(){return Ta},getInitialNetworkRetryDelay(){return ba},getClientUserAgent(a){return this.getClientUserAgentSeeded(n.USER_AGENT,a)},getClientUserAgentSeeded(a,s){this._platformFunctions.getUname().then(i=>{var h;const c={};for(const d in a)Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=encodeURIComponent((h=a[d])!==null&&h!==void 0?h:"null"));c.uname=encodeURIComponent(i||"UNKNOWN");const p=this.getApiField("httpClient");p&&(c.httplib=encodeURIComponent(p.getClientName())),this._appInfo&&(c.application=this._appInfo),s(JSON.stringify(c))})},getAppInfoAsString(){if(!this._appInfo)return"";let a=this._appInfo.name;return this._appInfo.version&&(a+=`/${this._appInfo.version}`),this._appInfo.url&&(a+=` (${this._appInfo.url})`),a},getTelemetryEnabled(){return this._enableTelemetry},_prepResources(){for(const a in Ft)Object.prototype.hasOwnProperty.call(Ft,a)&&(this[Fl(a)]=new Ft[a](this))},_getPropsFromConfig(a){if(!a)return{};const s=typeof a=="string";if(!(a===Object(a)&&!Array.isArray(a))&&!s)throw new Error("Config must either be an object or a string");if(s)return{apiVersion:a};if(Object.keys(a).filter(c=>!_a.includes(c)).length>0)throw new Error(`Config object may only contain the following: ${_a.join(", ")}`);return a},parseThinEvent(a,s,i,h,c,p){return this.webhooks.constructEvent(a,s,i,h,c,p)}},n}const mh=hh(new Ms);var Jr={};const Q=fs(Jr.SUPABASE_URL,Jr.SUPABASE_SERVICE_ROLE_KEY,{auth:{autoRefreshToken:!1,persistSession:!1}}),Dt=new mh(Jr.STRIPE_SECRET_KEY,{maxNetworkRetries:3}),Gr={async validateInvitationToken(t){try{const{data:e,error:r}=await Q.from("restaurant_invitations").select("*").eq("token",t).single();if(r)return console.error("Error validating invitation token:",r),null;if(!e||e.status!=="pending")return null;const n=new Date,a=new Date(e.expires_at);return n>a?(await Q.from("restaurant_invitations").update({status:"expired",updated_at:new Date().toISOString()}).eq("token",t),null):e}catch(e){return console.error("Error in validateInvitationToken:",e),null}},async completeOnboarding(t,e,r,n){let a,s=[],i=!1;try{if(!await this.validateInvitationToken(t))return{success:!1,error:"Invalid or expired invitation token"};const{data:c,error:p}=await Q.from("restaurants").insert([{name:e.name,website:e.website||"",admin_email:e.admin_email,logo_url:e.logo_url||null,subscription_tier:n,created_at:new Date().toISOString(),registration_complete:!1}]).select().single();if(p||!c)return{success:!1,error:`Failed to create restaurant: ${p?.message||"Unknown error"}`};a=c.id,i=!0,s=await Promise.all(r.map(async u=>{const v=await Dt.products.create({name:`${c.name} - ${u.name} Membership`,description:u.description,metadata:{restaurant_id:a,restaurant_name:c.name,tier_type:u.name.toLowerCase().replace(/\s+/g,"_")}}),g=await Dt.prices.create({product:v.id,unit_amount:Math.round(parseFloat(u.price)*100),currency:"usd",recurring:{interval:"month"},metadata:{restaurant_id:a,tier_name:u.name}});return{productId:v.id,priceId:g.id,tier:u.name}}));const d=r.map((u,v)=>({name:u.name,price:u.price,description:u.description,restaurant_id:a,stripe_product_id:s[v].productId,stripe_price_id:s[v].priceId,created_at:new Date().toISOString()})),{error:m}=await Q.from("membership_tiers").insert(d);if(m)throw new Error(`Failed to store membership tiers: ${m.message}`);return await Q.from("restaurant_invitations").update({status:"completed",restaurant_id:a,updated_at:new Date().toISOString()}).eq("token",t),await Q.from("restaurants").update({registration_complete:!0,updated_at:new Date().toISOString()}).eq("id",a),{success:!0,restaurantId:a,stripeProductIds:s}}catch(h){return console.error("Error in completeOnboarding:",h),i&&await this.rollbackOnboarding(a,s),{success:!1,error:h.message||"An error occurred during onboarding"}}},async rollbackOnboarding(t,e){try{console.log("Rolling back onboarding due to error..."),await Q.from("membership_tiers").delete().eq("restaurant_id",t);for(const{priceId:r,productId:n}of e)try{await Dt.prices.update(r,{active:!1}),await Dt.products.update(n,{active:!1})}catch(a){console.error("Error deactivating Stripe resource:",a)}await Q.from("restaurants").delete().eq("id",t),console.log("Rollback completed successfully")}catch(r){console.error("Error during rollback:",r)}},async getBusinessPricingTiers(){return["NeighborhoodCellar","EstablishedShop","PremiumCollection","LuxuryVintage"]},validatePricingTier(t){return["NeighborhoodCellar","EstablishedShop","PremiumCollection","LuxuryVintage"].includes(t)},async getRestaurantById(t){const{data:e,error:r}=await Q.from("restaurants").select("*").eq("id",t).single();return r||!e?(console.error("Error fetching restaurant:",r),null):e},async getRestaurantMembershipTiers(t){const{data:e,error:r}=await Q.from("membership_tiers").select("*").eq("restaurant_id",t);return r?(console.error("Error fetching membership tiers:",r),[]):e||[]},getBusinessPricingTierInfo(t){const e={NeighborhoodCellar:{name:"Neighborhood Cellar",monthlyPrice:"199.00",description:"Perfect for smaller wine bars with limited selections"},EstablishedShop:{name:"Established Shop",monthlyPrice:"349.00",description:"For mid-size establishments with growing wine programs"},PremiumCollection:{name:"Premium Collection",monthlyPrice:"599.00",description:"For restaurants with extensive wine lists and sommelier services"},LuxuryVintage:{name:"Luxury Vintage",monthlyPrice:"999.00",description:"For high-end establishments with rare wines and collector selections"}};return e[t]||e.EstablishedShop}},hs=({size:t="md",color:e="border-[#872657]",className:r=""})=>{const n={sm:"h-5 w-5 border-2",md:"h-8 w-8 border-2",lg:"h-12 w-12 border-3"}[t];return l.jsx("div",{className:`animate-spin rounded-full ${n} border-b-${e} ${r}`,role:"status","aria-label":"Loading"})},ph=({initialData:t,onSubmit:e,isSubmitting:r=!1,errors:n={},sessionId:a,tierInfo:s=null})=>{const[i,h]=N.useState(t),[c,p]=N.useState({});N.useEffect(()=>{h(t)},[t]),N.useEffect(()=>{p(n)},[n]);const d=f=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(f),m=f=>{const y=[];return f.length<8&&y.push("at least 8 characters"),/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/.test(f)||y.push("at least one special character"),/\d/.test(f)||y.push("at least one number"),/[A-Z]/.test(f)||y.push("at least one uppercase letter"),y},u=(f,y)=>{let P;switch(f){case"email":y&&!d(y)&&(P="Please enter a valid email address");break;case"password":if(y){const x=m(y);x.length>0&&(P=`Password must contain ${x.join(", ")}`)}break;case"confirmPassword":y!==i.password&&(P="Passwords do not match");break}return P},v=f=>{const{name:y,value:P}=f.target;h(b=>({...b,[y]:P})),c[y]&&p(b=>({...b,[y]:void 0}));const x=u(y,P);x&&p(b=>({...b,[y]:x}))},g=f=>{const y=f.target.files?.[0];if(!y)return;const P=["image/jpeg","image/png","image/webp"],x=5*1024*1024;if(!P.includes(y.type)){p({general:"Only JPG, PNG, and WEBP images are allowed"});return}if(y.size>x){p({general:"File size must be less than 5MB"});return}h({...i,logo:y})},T=f=>{f.preventDefault();let y=!0;const P={};if(i.restaurantName.trim()||(P.restaurantName="Restaurant name is required",y=!1),i.adminName.trim()||(P.adminName="Admin name is required",y=!1),i.email.trim()?d(i.email)||(P.email="Please enter a valid email address",y=!1):(P.email="Email is required",y=!1),!i.password)P.password="Password is required",y=!1;else{const x=m(i.password);x.length>0&&(P.password=`Password must contain ${x.join(", ")}`,y=!1)}i.password!==i.confirmPassword&&(P.confirmPassword="Passwords do not match",y=!1),p(P),y&&e({...i,sessionId:a})};return l.jsxs("form",{onSubmit:T,className:"space-y-8 md:space-y-10",children:[c.general&&l.jsx("div",{className:"p-4 bg-red-100 text-red-700 rounded-md border border-red-200",children:c.general}),s&&l.jsxs("div",{className:"mb-6 p-6 rounded-xl border border-[#872657] bg-gradient-to-br from-[#fff8f8] to-[#fff]",children:[l.jsxs("h3",{className:"text-xl font-bold mb-3 text-[#872657]",style:{fontFamily:"HV Florentino"},children:[s.name," Plan"]}),l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("p",{className:"text-2xl font-bold text-[#872657]",style:{fontFamily:"TayBasal"},children:["$",parseFloat(s.monthlyPrice).toFixed(2),l.jsx("span",{className:"text-sm text-gray-600 ml-1",children:"/month"})]}),l.jsx("div",{className:"px-3 py-1 bg-[#872657] bg-opacity-10 rounded-full text-[#872657] text-sm font-medium",children:"Selected Plan"})]}),l.jsx("p",{className:"text-gray-700",style:{fontFamily:"TayBasal"},children:s.description}),l.jsxs("div",{className:"mt-4 pt-4 border-t border-[#872657] border-opacity-20",children:[l.jsxs("h4",{className:"text-sm font-medium mb-2 text-gray-700",children:["Included with ",s.name,":"]}),l.jsxs("ul",{className:"space-y-2",children:[l.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[l.jsx("div",{className:"w-5 h-5 rounded-full bg-green-100 flex items-center justify-center mr-2",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3 h-3 text-green-600",children:l.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),"Personalized wine recommendations"]}),l.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[l.jsx("div",{className:"w-5 h-5 rounded-full bg-green-100 flex items-center justify-center mr-2",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3 h-3 text-green-600",children:l.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),"Membership tier management"]}),l.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[l.jsx("div",{className:"w-5 h-5 rounded-full bg-green-100 flex items-center justify-center mr-2",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3 h-3 text-green-600",children:l.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),"Customer accounts & profile data"]})]})]})]}),l.jsxs("div",{className:"space-y-6 md:space-y-8",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Restaurant Name *"}),l.jsx("input",{type:"text",name:"restaurantName",value:i.restaurantName,onChange:v,required:!0,className:`w-full px-4 py-2 border ${c.restaurantName?"border-red-500":"border-gray-300"} rounded-md focus:ring-2 focus:ring-[#872657]`}),c.restaurantName&&l.jsx("p",{className:"mt-1 text-sm text-red-500",children:c.restaurantName})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Name *"}),l.jsx("input",{type:"text",name:"adminName",value:i.adminName,onChange:v,required:!0,placeholder:"Your full name",className:`w-full px-4 py-2 border ${c.adminName?"border-red-500":"border-gray-300"} rounded-md focus:ring-2 focus:ring-[#872657]`}),c.adminName&&l.jsx("p",{className:"mt-1 text-sm text-red-500",children:c.adminName})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),l.jsx("input",{type:"email",name:"email",value:i.email,onChange:v,required:!0,placeholder:"admin@yourrestaurant.com",className:`w-full px-4 py-2 border ${c.email?"border-red-500":"border-gray-300"} rounded-md focus:ring-2 focus:ring-[#872657]`}),c.email&&l.jsx("p",{className:"mt-1 text-sm text-red-500",children:c.email})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),l.jsx("input",{type:"url",name:"website",value:i.website||"",onChange:v,placeholder:"https://www.yourrestaurant.com",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#872657]"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo"}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("label",{className:"cursor-pointer bg-[#2A3D45] text-white px-4 py-2 rounded-md hover:bg-opacity-90",children:[l.jsx(Ns,{className:"inline-block w-5 h-5 mr-2"}),"Upload Logo",l.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:g})]}),i.logo&&l.jsxs("span",{className:"text-sm text-gray-600",children:["File selected: ",i.logo.name]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),l.jsx("input",{type:"password",name:"password",value:i.password,onChange:v,required:!0,placeholder:"At least 8 characters",className:`w-full px-4 py-2 border ${c.password?"border-red-500":"border-gray-300"} rounded-md focus:ring-2 focus:ring-[#872657]`}),c.password&&l.jsx("p",{className:"mt-1 text-sm text-red-500",children:c.password})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password *"}),l.jsx("input",{type:"password",name:"confirmPassword",value:i.confirmPassword,onChange:v,required:!0,placeholder:"Confirm your password",className:`w-full px-4 py-2 border ${c.confirmPassword?"border-red-500":"border-gray-300"} rounded-md focus:ring-2 focus:ring-[#872657]`}),c.confirmPassword&&l.jsx("p",{className:"mt-1 text-sm text-red-500",children:c.confirmPassword})]})]}),l.jsx("button",{type:"submit",disabled:r,className:`w-full md:w-auto md:px-12 mt-8 bg-[#872657] text-white py-4 rounded-md hover:bg-opacity-90 font-bold text-lg flex items-center justify-center ${r?"opacity-70 cursor-not-allowed":""}`,children:r?l.jsxs(l.Fragment,{children:[l.jsx(hs,{size:"sm",className:"mr-2"}),"Processing..."]}):"Continue"})]})},fh=({isOpen:t,onClose:e,onSave:r,initialData:n,isEditing:a,restaurantId:s})=>{const[i,h]=N.useState(n),[c,p]=N.useState({}),[d,m]=N.useState(!1);N.useEffect(()=>{t&&(h(n),p({}))},[t,n]);const u=T=>{const{name:f,value:y}=T.target;h(P=>({...P,[f]:y})),c[f]&&p(P=>({...P,[f]:void 0}))},v=()=>{const T={};if(i.name.trim()||(T.name="Name is required"),!i.price)T.price="Price is required";else{const f=parseFloat(i.price);(isNaN(f)||f<=0)&&(T.price="Price must be a positive number")}return p(T),Object.keys(T).length===0},g=async T=>{if(T.preventDefault(),!!v()){m(!0),p({});try{if(!s){!a&&!i.id&&(i.id=crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).substring(2,15)),r(i),e();return}const f=await fetch("/api/membership-tiers",{method:a?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:a?i.id:void 0,name:i.name,price:i.price,description:i.description,restaurant_id:s,stripe_price_id:i.stripe_price_id,stripe_product_id:i.stripe_product_id})});if(!f.ok){const P=await f.json();throw new Error(P.error||"Failed to save membership tier")}const y=await f.json();y.warning&&console.warn("Stripe warning:",y.warning),r(y),e()}catch(f){console.error("Error saving tier:",f),p({general:f instanceof Error?f.message:"An unknown error occurred"})}finally{m(!1)}}};return t?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 bg-gray-50",children:[l.jsx("h2",{className:"text-xl font-bold text-[#800020]",style:{fontFamily:"HV Florentino"},children:a?"Edit Membership Tier":"Add Membership Tier"}),l.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 transition-colors duration-200",disabled:d,children:l.jsx(ys,{className:"w-6 h-6"})})]}),l.jsxs("form",{onSubmit:g,className:"p-6 space-y-5",children:[c.general&&l.jsx("div",{className:"p-4 bg-red-100 text-red-700 rounded-xl border border-red-200 mb-4",children:c.general}),l.jsxs("div",{children:[l.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",style:{fontFamily:"TayBasal"},children:[l.jsx(Me,{className:"w-4 h-4 mr-2 text-[#800020]"}),"Tier Name *"]}),l.jsx("input",{type:"text",name:"name",value:i.name,onChange:u,className:`w-full px-4 py-3 border ${c.name?"border-red-500":"border-gray-300"} rounded-xl focus:ring-2 focus:ring-[#800020] focus:border-transparent transition-all duration-200`,placeholder:"e.g., Bronze, Silver, Gold",disabled:d,required:!0}),c.name&&l.jsx("p",{className:"mt-1 text-sm text-red-500",children:c.name})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",style:{fontFamily:"TayBasal"},children:[l.jsx(Sa,{className:"w-4 h-4 mr-2 text-[#800020]"}),"Monthly Price ($) *"]}),l.jsx("input",{type:"number",name:"price",value:i.price,onChange:u,className:`w-full px-4 py-3 border ${c.price?"border-red-500":"border-gray-300"} rounded-xl focus:ring-2 focus:ring-[#800020] focus:border-transparent transition-all duration-200`,placeholder:"e.g., 29.99",step:"0.01",min:"0.01",disabled:d,required:!0}),c.price&&l.jsx("p",{className:"mt-1 text-sm text-red-500",children:c.price})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",style:{fontFamily:"TayBasal"},children:[l.jsx(vs,{className:"w-4 h-4 mr-2 text-[#800020]"}),"Description"]}),l.jsx("textarea",{name:"description",value:i.description,onChange:u,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#800020] focus:border-transparent transition-all duration-200",placeholder:"Describe what members get with this tier...",rows:3,disabled:d,style:{fontFamily:"Libre Baskerville"}})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx("button",{type:"button",onClick:e,className:"px-5 py-2.5 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition-colors duration-200",disabled:d,style:{fontFamily:"TayBasal"},children:"Cancel"}),l.jsx("button",{type:"submit",className:"px-5 py-2.5 bg-[#800020] text-white rounded-xl hover:bg-opacity-90 transition-all duration-200 flex items-center",disabled:d,style:{fontFamily:"TayBasal"},children:d?l.jsxs(l.Fragment,{children:[l.jsx(wa,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):"Save Tier"})]})]})]})}):null},Fr=[{icon:l.jsx(Me,{className:"w-6 h-6"}),color:"#800020"},{icon:l.jsx(Os,{className:"w-6 h-6"}),color:"#AA7F39"},{icon:l.jsx(Ps,{className:"w-6 h-6"}),color:"#2F4858"},{icon:l.jsx(xs,{className:"w-6 h-6"}),color:"#5E2750"},{icon:l.jsx(Ts,{className:"w-6 h-6"}),color:"#2A3D45"}],yh=({tiers:t,restaurantId:e,onTierAdded:r,onTierUpdated:n,onTierDeleted:a,minTiersRequired:s=1,error:i})=>{const[h,c]=N.useState(!1),[p,d]=N.useState({id:"",name:"",price:"",description:""}),[m,u]=N.useState(!1),v=()=>{d({id:"",name:"",price:"",description:""}),u(!1),c(!0)},g=P=>{d(P),u(!0),c(!0)},T=P=>{m?n(P):r(P),c(!1)},f=P=>{t.length<=s?confirm(`You must have at least ${s} membership tier(s). Replace this tier with a new one?`)&&(d({id:"",name:"",price:"",description:""}),u(!1),c(!0)):confirm(`Are you sure you want to delete the "${P.name}" tier?`)&&a(P.id)},y=P=>P<Fr.length?Fr[P]:Fr[0];return l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold mt-8 mb-10 text-[#800020]",style:{fontFamily:"HV Florentino"},children:"Membership Tiers"}),l.jsx("p",{className:"mb-8 text-gray-700",style:{fontFamily:"Libre Baskerville"},children:"Define 1-3 membership tiers that your guests can subscribe to. Each tier should have a unique name, price, and description of benefits."}),i&&l.jsx("div",{className:"p-5 bg-red-100 text-red-700 rounded-xl border border-red-200 mb-8",children:i}),t.length>0?l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.map((P,x)=>{const b=y(x);return l.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-100 hover:shadow-lg transition-all duration-300",style:{minHeight:"260px"},children:[l.jsxs("div",{className:"p-5 text-white flex justify-between items-center",style:{backgroundColor:b.color},children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-white bg-opacity-20 flex items-center justify-center mr-3",children:b.icon}),l.jsx("h3",{className:"font-bold text-xl",style:{fontFamily:"HV Florentino"},children:P.name})]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{type:"button",onClick:()=>g(P),className:"p-2 bg-white bg-opacity-20 rounded-full hover:bg-opacity-30 transition-all duration-200","aria-label":`Edit ${P.name}`,children:l.jsx(Es,{className:"w-4 h-4 text-white"})}),l.jsx("button",{type:"button",onClick:()=>f(P),className:"p-2 bg-white bg-opacity-20 rounded-full hover:bg-opacity-30 transition-all duration-200","aria-label":`Delete ${P.name}`,children:l.jsx(gs,{className:"w-4 h-4 text-white"})})]})]}),l.jsx("div",{className:"px-5 py-4 bg-gray-50 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(Sa,{className:"w-5 h-5 text-gray-500 mr-2"}),l.jsxs("span",{className:"text-2xl font-bold text-gray-800",style:{fontFamily:"TayBasal"},children:["$",parseFloat(P.price).toFixed(2)]}),l.jsx("span",{className:"text-gray-500 ml-1",style:{fontFamily:"TayBasal"},children:"/month"})]})}),l.jsx("div",{className:"p-5",children:l.jsx("p",{className:"text-gray-700 text-sm",style:{fontFamily:"Libre Baskerville"},children:P.description||"No description provided."})})]},P.id)}),t.length<3&&l.jsxs("div",{onClick:v,className:"bg-white rounded-xl border-2 border-dashed border-gray-300 flex flex-col items-center justify-center p-8 cursor-pointer hover:border-[#800020] hover:bg-gray-50 transition-all duration-300",style:{minHeight:"260px"},children:[l.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-6",children:l.jsx(fn,{className:"w-8 h-8 text-gray-400"})}),l.jsx("p",{className:"text-gray-500 font-medium text-center",style:{fontFamily:"TayBasal"},children:"Add Another Tier"}),l.jsx("p",{className:"text-xs text-gray-400 text-center mt-2",style:{fontFamily:"Libre Baskerville"},children:t.length===0?"Add your first membership tier":"You can add up to 3 tiers"})]})]}):l.jsxs("div",{onClick:v,className:"bg-white rounded-xl border-2 border-dashed border-gray-300 flex flex-col items-center justify-center p-12 cursor-pointer hover:border-[#800020] hover:bg-gray-50 transition-all duration-300",style:{minHeight:"260px"},children:[l.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-100 flex items-center justify-center mb-8",children:l.jsx(fn,{className:"w-10 h-10 text-gray-400"})}),l.jsx("h3",{className:"text-xl font-medium text-gray-700 mb-3",style:{fontFamily:"HV Florentino"},children:"Create Your First Tier"}),l.jsx("p",{className:"text-gray-500 text-center max-w-md",style:{fontFamily:"Libre Baskerville"},children:"Define at least one membership tier with a name, price, and description"})]}),l.jsx(fh,{isOpen:h,onClose:()=>c(!1),onSave:T,initialData:p,isEditing:m,restaurantId:e})]})},vh=({initialStep:t=1,initialRestaurantData:e={restaurantName:"",adminName:"",email:"",website:"",logo:null,password:"",confirmPassword:""},initialTiers:r=[],onComplete:n,isSubmitting:a=!1,sessionId:s,errors:i={},restaurantId:h})=>{const[c,p]=N.useState(t),[d,m]=N.useState(e),[u,v]=N.useState(r),g=w=>{m(w),p(2)},T=w=>{v([...u,w])},f=w=>{v(u.map(q=>q.id===w.id?w:q))},y=w=>{v(u.filter(q=>q.id!==w))},P=()=>{u.length!==0&&n({restaurant:d,tiers:u,restaurantId:h})},x=()=>l.jsx("div",{className:"mb-12",children:l.jsxs("div",{className:"flex items-center justify-between max-w-3xl mx-auto overflow-x-auto px-4 md:px-0",children:[l.jsxs("div",{className:`flex flex-col items-center flex-shrink-0 ${c>=1?"text-[#872657]":"text-gray-400"}`,children:[l.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center border-2 transition-all duration-300 ${c>=1?"border-[#872657] bg-[#872657] text-white":"border-gray-300 text-gray-400"}`,children:c>1?l.jsx(Dr,{className:"w-7 h-7"}):l.jsx(pn,{className:"w-7 h-7"})}),l.jsx("span",{className:"mt-3 text-sm font-medium",style:{fontFamily:"TayBasal"},children:"Restaurant Info"})]}),l.jsx("div",{className:`flex-1 h-1 mx-4 transition-all duration-300 min-w-[2rem] ${c>=2?"bg-[#872657]":"bg-gray-300"}`}),l.jsxs("div",{className:`flex flex-col items-center flex-shrink-0 ${c>=2?"text-[#872657]":"text-gray-400"}`,children:[l.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center border-2 transition-all duration-300 ${c>=2?"border-[#872657] bg-[#872657] text-white":"border-gray-300 text-gray-400"}`,children:c>2?l.jsx(Dr,{className:"w-7 h-7"}):l.jsx(Me,{className:"w-7 h-7"})}),l.jsx("span",{className:"mt-3 text-sm font-medium",style:{fontFamily:"TayBasal"},children:"Membership Tiers"})]}),l.jsx("div",{className:`flex-1 h-1 mx-4 transition-all duration-300 min-w-[2rem] ${c>=3?"bg-[#872657]":"bg-gray-300"}`}),l.jsxs("div",{className:`flex flex-col items-center flex-shrink-0 ${c>=3?"text-[#872657]":"text-gray-400"}`,children:[l.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center border-2 transition-all duration-300 ${c>=3?"border-[#872657] bg-[#872657] text-white":"border-gray-300 text-gray-400"}`,children:l.jsx(Ss,{className:"w-7 h-7"})}),l.jsx("span",{className:"mt-3 text-sm font-medium",style:{fontFamily:"TayBasal"},children:"Review & Submit"})]})]})});let b;switch(c){case 1:b=l.jsxs("div",{className:"bg-white p-8 md:p-10 rounded-2xl shadow-lg border border-gray-200 transition-all duration-300 transform",children:[l.jsx("h2",{className:"text-2xl font-bold mt-8 mb-10 text-[#872657]",style:{fontFamily:"HV Florentino"},children:"Restaurant Details"}),l.jsx(ph,{initialData:d,onSubmit:g,errors:i?.restaurant,sessionId:s,tierInfo:e.pricingTierInfo})]});break;case 2:b=l.jsxs("div",{className:"bg-white p-8 md:p-10 rounded-2xl shadow-lg border border-gray-200 transition-all duration-300 transform",children:[l.jsx(yh,{tiers:u,restaurantId:h,onTierAdded:T,onTierUpdated:f,onTierDeleted:y,error:i?.tiers}),l.jsxs("div",{className:"mt-10 flex flex-col sm:flex-row gap-4 sm:gap-6",children:[l.jsx("button",{type:"button",onClick:()=>p(1),className:"flex-1 py-4 px-6 bg-gray-100 text-gray-800 rounded-xl hover:bg-gray-200 transition-colors duration-300",style:{fontFamily:"TayBasal"},children:"Back"}),l.jsx("button",{type:"button",onClick:()=>p(3),disabled:u.length===0,className:`flex-1 py-4 px-6 bg-[#800020] text-white rounded-xl hover:bg-opacity-90 font-bold transition-all duration-300 ${u.length===0?"opacity-50 cursor-not-allowed":""}`,style:{fontFamily:"TayBasal"},children:"Continue"})]})]});break;case 3:b=l.jsxs("div",{className:"bg-white p-8 md:p-10 rounded-2xl shadow-lg border border-gray-200 transition-all duration-300 transform",children:[l.jsx("h2",{className:"text-2xl font-bold mt-8 mb-10 text-[#800020]",style:{fontFamily:"HV Florentino"},children:"Review Your Registration"}),i?.general&&l.jsx("div",{className:"mb-8 p-4 bg-red-100 text-red-700 rounded-xl border border-red-200",children:i.general}),l.jsxs("div",{className:"mb-12 space-y-10",children:[l.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 md:p-8 shadow-sm border border-gray-100",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-6 flex items-center text-[#800020]",style:{fontFamily:"HV Florentino"},children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-[#800020] text-white flex items-center justify-center mr-3 text-sm",children:l.jsx(pn,{className:"w-5 h-5"})}),"Restaurant Information"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-2",style:{fontFamily:"TayBasal"},children:"Restaurant Name"}),l.jsx("p",{className:"font-medium",style:{fontFamily:"Libre Baskerville"},children:d.restaurantName})]}),l.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-2",style:{fontFamily:"TayBasal"},children:"Admin Name"}),l.jsx("p",{className:"font-medium",style:{fontFamily:"Libre Baskerville"},children:d.adminName})]}),l.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-2",style:{fontFamily:"TayBasal"},children:"Email"}),l.jsx("p",{className:"font-medium",style:{fontFamily:"Libre Baskerville"},children:d.email})]}),d.website&&l.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-2",style:{fontFamily:"TayBasal"},children:"Website"}),l.jsx("p",{className:"font-medium",style:{fontFamily:"Libre Baskerville"},children:d.website})]}),d.logo&&l.jsxs("div",{className:"col-span-2 bg-white p-5 rounded-lg shadow-sm",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-2",style:{fontFamily:"TayBasal"},children:"Logo"}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-14 h-14 bg-gray-200 rounded-md flex items-center justify-center mr-3",children:l.jsx("img",{src:URL.createObjectURL(d.logo),alt:"Logo Preview",className:"max-w-full max-h-full object-contain rounded-md"})}),l.jsx("p",{className:"font-medium",style:{fontFamily:"Libre Baskerville"},children:d.logo.name})]})]})]})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 md:p-8 shadow-sm border border-gray-100",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-6 flex items-center text-[#800020]",style:{fontFamily:"HV Florentino"},children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-[#800020] text-white flex items-center justify-center mr-3 text-sm",children:l.jsx(Me,{className:"w-5 h-5"})}),"Membership Tiers"]}),u.length>0?l.jsx("div",{className:"space-y-5",children:u.map((w,q)=>l.jsx("div",{className:"p-5 bg-white rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow duration-300",children:l.jsxs("div",{className:"flex justify-between items-start sm:items-center flex-col sm:flex-row gap-4 sm:gap-0",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-[#800020] text-lg",style:{fontFamily:"HV Florentino"},children:w.name}),l.jsxs("p",{className:"text-gray-800 font-bold text-xl mt-2",style:{fontFamily:"TayBasal"},children:["$",parseFloat(w.price).toFixed(2),"/month"]}),l.jsx("p",{className:"text-sm text-gray-600 mt-4",style:{fontFamily:"Libre Baskerville"},children:w.description})]}),l.jsx("div",{className:"w-14 h-14 rounded-full bg-[#800020] bg-opacity-10 flex items-center justify-center self-end sm:self-auto",children:l.jsx(Me,{className:"w-7 h-7 text-[#800020]"})})]})},w.id))}):l.jsx("p",{className:"text-red-500 p-5 bg-red-50 rounded-lg border border-red-100",style:{fontFamily:"Libre Baskerville"},children:"No membership tiers added. Please go back and add at least one tier."})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-6",children:[l.jsx("button",{type:"button",onClick:()=>p(2),className:"flex-1 py-4 px-6 bg-gray-100 text-gray-800 rounded-xl hover:bg-gray-200 transition-colors duration-300",style:{fontFamily:"TayBasal"},children:"Back"}),l.jsx("button",{type:"button",onClick:P,disabled:a||u.length===0,className:`flex-1 py-4 px-6 bg-[#800020] text-white rounded-xl hover:bg-opacity-90 font-bold transition-all duration-300 ${a||u.length===0?"opacity-70 cursor-not-allowed":""}`,style:{fontFamily:"TayBasal"},children:a?l.jsxs("div",{className:"flex items-center justify-center",children:[l.jsx(hs,{size:"sm",className:"mr-2"}),"Processing..."]}):"Complete Registration"})]}),l.jsx("div",{className:"mt-8 text-center",children:l.jsxs("p",{className:"text-xs text-gray-500",style:{fontFamily:"Libre Baskerville"},children:["By completing registration, you agree to Club Cuvee's ",l.jsx("a",{href:"/terms",className:"text-[#800020] hover:underline",children:"Terms of Service"})," and ",l.jsx("a",{href:"/privacy",className:"text-[#800020] hover:underline",children:"Privacy Policy"})]})}),l.jsxs("p",{className:"text-sm text-gray-500 mt-4 text-center",children:["Didn't mean to register? ",l.jsx("a",{href:"mailto:support@clubcuvee.com",className:"text-[#800020] underline",children:"Contact support"})]})]});break;default:b=null}return l.jsxs("div",{className:"max-w-7xl w-full mx-auto",children:[x(),l.jsx("div",{className:"transition-all duration-500 ease-in-out transform",children:b})]})},Ph=()=>{const{restaurantRef:t}=bs(),e=_s(),r=ws(),n=new URLSearchParams(r.search),a=n.get("session_id"),s=n.get("status"),i=n.get("tier")||"EstablishedShop",[h,c]=N.useState(!0),[p,d]=N.useState(!1),[m,u]=N.useState(1),[v,g]=N.useState(!1),[T,f]=N.useState({}),[y,P]=N.useState(null),[x,b]=N.useState({restaurantName:"",adminName:"",email:"",website:"",logo:null,password:"",confirmPassword:""}),[w,q]=N.useState([]),[R,L]=N.useState(""),[H,M]=N.useState(!0);N.useEffect(()=>{(async()=>{try{if(c(!0),!Gr.validatePricingTier(i)){f({general:"Invalid pricing tier specified. Please use a valid tier or contact support."}),c(!1);return}const O=Gr.getBusinessPricingTierInfo(i);if(P(O),a&&s==="success"&&M(!0),t){const S=await ht.getInvitationByToken(t);if(S){if(S.status==="expired"){f({general:"This invitation link has expired. Please request a new invitation."}),c(!1);return}if(b({restaurantName:S.restaurant_name,adminName:S.admin_name||"",email:S.email,website:S.website||"",password:"",confirmPassword:"",tier:S.tier,invitationToken:S.token,pricingTier:i}),(S.status==="paid"||S.payment_session_id)&&M(!0),S.restaurant_id){L(S.restaurant_id),u(2);try{const C=await yn.getMembershipTiersByRestaurant(S.restaurant_id);C&&C.length>0&&q(C)}catch(C){console.error("Error fetching existing tiers:",C)}}S.status==="pending"&&await ht.updateInvitationStatus(S.token,"accepted")}else f({general:"Invalid invitation token. Please check your invitation email or contact support."})}else f({general:"No invitation token provided. Please use the link from your invitation email."})}catch(O){console.error("Error checking registration status:",O),f({general:"Error loading registration data. Please try again or contact support."})}finally{c(!1)}})()},[t,a,s,i]);const te=async A=>{g(!0),f({});try{if(!R&&A.restaurant.invitationToken){const O={name:A.restaurant.restaurantName,website:A.restaurant.website,admin_email:A.restaurant.email,logo_url:A.restaurant.logo?URL.createObjectURL(A.restaurant.logo):void 0},S=A.tiers.map(ce=>({name:ce.name,price:ce.price,description:ce.description})),C=await Gr.completeOnboarding(A.restaurant.invitationToken,O,S,i);if(!C.success)throw new Error(C.error||"Failed to complete onboarding");L(C.restaurantId);const{error:k}=await U.auth.signUp({email:A.restaurant.email,password:A.restaurant.password,options:{data:{restaurant_id:C.restaurantId,full_name:A.restaurant.adminName,role:"restaurant_admin"}}});k&&console.error("Error creating user account:",k),d(!0)}else{const O=A.restaurantId||R;if(!O)throw new Error("Missing restaurant ID");const S=A.tiers.map(async k=>k.id&&k.stripe_product_id&&k.stripe_price_id&&k.restaurant_id===O?k:await yn.createMembershipTier({name:k.name,price:k.price,description:k.description,stripe_product_id:k.stripe_product_id,stripe_price_id:k.stripe_price_id},O));await Promise.all(S),await ht.updateRestaurant(O,{registration_complete:!0,updated_at:new Date().toISOString()}),x.invitationToken&&await ht.updateInvitationStatus(x.invitationToken,"completed",O);const{error:C}=await U.auth.signUp({email:A.restaurant.email,password:A.restaurant.password,options:{data:{restaurant_id:O,full_name:A.restaurant.adminName,role:"restaurant_admin"}}});C&&console.error("Error creating user account:",C),d(!0)}}catch(O){console.error("Error completing registration:",O),f({general:O.message||"Failed to complete registration"})}finally{g(!1)}};return h?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#fdfaf7] px-6 md:px-10 py-10 md:py-20 overflow-x-hidden",children:l.jsxs("div",{className:"text-center max-w-7xl w-full mx-auto p-8",children:[l.jsx(wa,{className:"h-12 w-12 animate-spin text-[#872657] mx-auto mb-6"}),l.jsx("p",{className:"text-gray-600 text-lg",style:{fontFamily:"TayBasal"},children:"Loading your restaurant registration..."})]})}):p?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#fdfaf7] px-6 md:px-10 py-10 md:py-20 overflow-x-hidden",children:l.jsx("div",{className:"w-full max-w-7xl mx-auto",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 md:p-10 text-center",children:[l.jsx("div",{className:"mb-8 p-4 bg-green-100 rounded-full inline-flex items-center justify-center",children:l.jsx(Dr,{className:"w-16 h-16 text-green-500"})}),l.jsx("h1",{className:"text-3xl font-bold mb-6 text-[#872657]",style:{fontFamily:"HV Florentino"},children:"You're All Set!"}),l.jsx("p",{className:"mb-8 text-gray-700 text-lg",style:{fontFamily:"TayBasal"},children:"Your restaurant has been registered with Club Cuvee and your membership tiers are ready. You can now access your dashboard to manage your wine club."}),l.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-center space-y-4 sm:space-y-0 sm:space-x-4",children:[l.jsx("button",{onClick:()=>e("/dashboard"),className:"w-full sm:w-auto sm:px-8 bg-[#872657] text-white py-4 rounded-lg hover:bg-opacity-90 font-bold transition-all duration-300",style:{fontFamily:"TayBasal"},children:"Go to Dashboard"}),l.jsx("button",{onClick:()=>e("/preview-wine-club"),className:"w-full sm:w-auto sm:px-8 bg-white border border-[#872657] text-[#872657] py-4 rounded-lg hover:bg-gray-50 font-bold transition-all duration-300",style:{fontFamily:"TayBasal"},children:"Preview Your Wine Club"})]}),l.jsxs("p",{className:"text-sm text-gray-500 mt-4",children:["Didn't mean to register? ",l.jsx("a",{href:"mailto:support@clubcuvee.com",className:"text-[#800020] underline",children:"Contact support"})]})]})})}):T.general&&!R?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#fdfaf7] px-6 md:px-10 py-10 md:py-20 overflow-x-hidden",children:l.jsx("div",{className:"w-full max-w-7xl mx-auto",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 md:p-10 text-center",children:[l.jsx("div",{className:"mb-8 p-4 bg-red-100 rounded-full inline-flex items-center justify-center",children:l.jsx(Me,{className:"w-16 h-16 text-red-500"})}),l.jsx("h1",{className:"text-3xl font-bold mb-6 text-[#872657]",style:{fontFamily:"HV Florentino"},children:"Invitation Error"}),l.jsx("p",{className:"mb-4 text-gray-700 text-lg",style:{fontFamily:"TayBasal"},children:T.general}),l.jsx("p",{className:"text-sm text-gray-500 mb-8",style:{fontFamily:"TayBasal"},children:"Please check your email for a valid invitation or contact support for assistance."}),l.jsx("button",{onClick:()=>window.location.href="https://clubcuvee.com/contact",className:"w-full sm:w-auto sm:px-8 bg-[#872657] text-white py-4 rounded-lg hover:bg-opacity-90 font-bold mx-auto transition-all duration-300",style:{fontFamily:"TayBasal"},children:"Contact Support"}),l.jsxs("p",{className:"text-sm text-gray-500 mt-4",children:["Didn't mean to register? ",l.jsx("a",{href:"mailto:support@clubcuvee.com",className:"text-[#800020] underline",children:"Contact support"})]})]})})}):l.jsx("div",{className:"min-h-screen bg-[#fdfaf7] px-6 md:px-10 py-10 md:py-20 overflow-x-hidden",children:l.jsxs("div",{className:"max-w-7xl w-full mx-auto",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-[#872657] mb-6",style:{fontFamily:"HV Florentino"},children:"Welcome to Club Cuvee"}),l.jsx("p",{className:"text-xl text-gray-600",style:{fontFamily:"TayBasal"},children:"Set up your custom wine club and start offering personalized wine memberships to your guests"})]}),l.jsx(vh,{initialStep:m,initialRestaurantData:{...x,pricingTierInfo:y||void 0},initialTiers:w,onComplete:te,isSubmitting:v,sessionId:a||void 0,errors:T,restaurantId:R})]})})};export{Ph as RestaurantOnboarding,Ph as default};
//# sourceMappingURL=_restaurantRef_-CvCkwv58.js.map
